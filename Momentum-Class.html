<!DOCTYPE html>
<html lang="en" data-root="/Teaching/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Nicholas Hirschey; Davide Costa" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="Teaching">
    <meta property="og:title" content="Momentum Signal" />
    <meta property="og:url" content="/Teaching/Momentum-Class.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="/Teaching/">
    <meta name="twitter:title" content="Momentum Signal">
    
    <title>Momentum Signal | Teaching</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="/Teaching/img/logo.png" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="/Teaching/content/fsdocs-theme-set-dark.js"></script>
    <link href="/Teaching/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="/Teaching/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/blob/main/LICENSE.md">License</a>
                </li>
                <li class="nav-item"><a class="nav-link"
                                        href="https://github.com/nhirschey/Teaching/blob/main/CHANGELOG.md">Release
                    Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/">Source
                    Repository</a></li>
                <li class="nav-header ">
  Getting Started
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/install.html">
    Install Software
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/learn-fsharp.html">
    Learn F#
  </a>
</li>             
<li class="nav-header active">
  Lectures
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stockslongrun.html">
    Stocks for the long run
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stocksandbonds.html">
    Stocks and bonds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/riskyweight.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityTiming.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityManagedTypes.html">
    Volatility Managed, but with different vols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolAndReturnPred.html">
    Volatility and Return predictions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/mveComparisons.html">
    More managed portfolio comparisons
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/PortfolioFormation-SimpleExample.html">
    Building a strategy
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="/Teaching/Momentum-Class.html">
    Momentum Signal
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/optimization.html">
    Optimization
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/revisitRiskyWeights.html">
    Revisiting Mean-variance optimal risky weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/premiums.html">
    Premiums
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/calls-nn.html">
    Calls NN
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/portfolio-statistics.html">
    Basic Portfolio Statistics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/sentiment-mlnet.html">
    Sentiment classification
  </a>
</li>             
<li class="nav-header ">
  Assignments
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-1-download-data.html">
    Webscraping HTML to CSV
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-tuples-and-records.html">
    Tuples and Records (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-collection-functions.html">
    Collection functions (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-risky-weights.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-volatility-timing.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/select-project-signal.html">
    Select Project Signals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/signal-exploration.html">
    Signal Exploration
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-plotting.html">
    Plotting (with solutions)
  </a>
</li>             
<li class="nav-header ">
  Practice Quizzes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-list-module.html">
    List module functions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-options.html">
    Options
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-match-expressions.html">
    Match expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-map-collection.html">
    Map collection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-discriminated-union.html">
    Dicriminated Union
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-portfolios.html">
    Portfolios
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-factors.html">
    Factors
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-folding.html">
    Fold and Friends
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Common.html">
    Common
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/loading-scripts.html">
    Loading external scripts
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Portfolio.html">
    Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/YahooFinance.html">
    YahooFinance
  </a>
</li>
                
            </ul>
        </div>
        <a href="/Teaching/">
            <img alt="Header menu logo" src="/Teaching/img/logo.png">
            <strong>Teaching</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/nhirschey/Teaching/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/blob/main/LICENSE.md">License</a>
        </li>
        <li class="nav-item"><a class="nav-link"
                                href="https://github.com/nhirschey/Teaching/blob/main/CHANGELOG.md">Release
            Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/">Source
            Repository</a></li>
        <li class="nav-header ">
  Getting Started
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/install.html">
    Install Software
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/learn-fsharp.html">
    Learn F#
  </a>
</li>             
<li class="nav-header active">
  Lectures
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stockslongrun.html">
    Stocks for the long run
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stocksandbonds.html">
    Stocks and bonds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/riskyweight.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityTiming.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityManagedTypes.html">
    Volatility Managed, but with different vols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolAndReturnPred.html">
    Volatility and Return predictions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/mveComparisons.html">
    More managed portfolio comparisons
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/PortfolioFormation-SimpleExample.html">
    Building a strategy
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="/Teaching/Momentum-Class.html">
    Momentum Signal
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/optimization.html">
    Optimization
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/revisitRiskyWeights.html">
    Revisiting Mean-variance optimal risky weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/premiums.html">
    Premiums
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/calls-nn.html">
    Calls NN
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/portfolio-statistics.html">
    Basic Portfolio Statistics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/sentiment-mlnet.html">
    Sentiment classification
  </a>
</li>             
<li class="nav-header ">
  Assignments
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-1-download-data.html">
    Webscraping HTML to CSV
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-tuples-and-records.html">
    Tuples and Records (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-collection-functions.html">
    Collection functions (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-risky-weights.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-volatility-timing.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/select-project-signal.html">
    Select Project Signals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/signal-exploration.html">
    Signal Exploration
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-plotting.html">
    Plotting (with solutions)
  </a>
</li>             
<li class="nav-header ">
  Practice Quizzes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-list-module.html">
    List module functions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-options.html">
    Options
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-match-expressions.html">
    Match expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-map-collection.html">
    Map collection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-discriminated-union.html">
    Dicriminated Union
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-portfolios.html">
    Portfolios
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-factors.html">
    Factors
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-folding.html">
    Fold and Friends
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Common.html">
    Common
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/loading-scripts.html">
    Loading external scripts
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Portfolio.html">
    Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/YahooFinance.html">
    YahooFinance
  </a>
</li>
        
    </ul>
</aside>
<main>
    <div id="content">
        
<p><a href="https://mybinder.org/v2/gh/nhirschey/teaching/gh-pages?filepath=Momentum-Class.ipynb"><img src="img/badge-binder.svg" alt="Binder" /></a>&emsp;
<a href="/Teaching//Momentum-Class.fsx"><img src="img/badge-script.svg" alt="Script" /></a>&emsp;
<a href="/Teaching//Momentum-Class.ipynb"><img src="img/badge-notebook.svg" alt="Notebook" /></a></p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#time</span> <span class="s">&quot;on&quot;</span>

<span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Data, 5.0.2&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Stats, 0.5.0&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Plotly.NET, 3.*&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Plotly.NET.Interactive, 3.*&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: NovaSBE.Finance, 0.5.0&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 4)" onmouseover="showTip(event, 'fs2', 4)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="id">Stats</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="id">Plotly</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="id">NET</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="id">NovaSBE</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="id">Finance</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="m">Portfolio</span>

<span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="rt">Environment</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 12)" onmouseover="showTip(event, 'fs11', 12)" class="id">CurrentDirectory</span> <span class="k">&lt;-</span> <span class="k">__SOURCE_DIRECTORY__</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 13)" onmouseover="showTip(event, 'fs12', 13)" class="fn">samplePeriod</span> <span onmouseout="hideTip(event, 'fs13', 14)" onmouseover="showTip(event, 'fs13', 14)" class="fn">x</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="fn">x</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 16)" onmouseover="showTip(event, 'fs14', 16)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2010</span><span class="pn">,</span> <span class="n">1</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs13', 17)" onmouseover="showTip(event, 'fs13', 17)" class="fn">x</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span> <span class="n">2</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span>
</code></pre>
<h1><a name="Price-momentum" class="anchor" href="#Price-momentum">Price momentum</a></h1>
<p>Price momentum is one of the most common quant signals. It is (fairly)
straight forward to calculate, and you only need returns to do it,
so it is a good starting point and reference 'strategy'.</p>
<h2><a name="Input-data" class="anchor" href="#Input-data">Input data</a></h2>
<p>Create a type that represents the file.
This code figures out what the columns of the csv file are.</p>
<ul>
<li>
<code>Sample</code> is the path to our file. We assume in our source
directory there is a folder called <code>data</code>. Inside this data
folder we have our csv file.
</li>
<li>
<code>ResolutionFolder</code> to indicate what folder relative paths
are relative to.
</li>
</ul>
<p>First, let's verify that the csv file exists where we think it will be.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="pn">[&lt;</span><span onmouseout="hideTip(event, 'fs15', 19)" onmouseover="showTip(event, 'fs15', 19)" class="rt">Literal</span><span class="pn">&gt;]</span> <span onmouseout="hideTip(event, 'fs16', 20)" onmouseover="showTip(event, 'fs16', 20)" class="prop">ResolutionFolder</span> <span class="o">=</span> <span class="k">__SOURCE_DIRECTORY__</span>

<span class="k">let</span> <span class="pn">[&lt;</span><span onmouseout="hideTip(event, 'fs15', 21)" onmouseover="showTip(event, 'fs15', 21)" class="rt">Literal</span><span class="pn">&gt;]</span> <span onmouseout="hideTip(event, 'fs17', 22)" onmouseover="showTip(event, 'fs17', 22)" class="prop">CsvFile</span> <span class="o">=</span> <span class="s">&quot;data/msf-momentum.csv&quot;</span>

<span class="k">if</span> <span onmouseout="hideTip(event, 'fs18', 23)" onmouseover="showTip(event, 'fs18', 23)" class="id">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 24)" onmouseover="showTip(event, 'fs19', 24)" class="rt">File</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 25)" onmouseover="showTip(event, 'fs20', 25)" class="id">Exists</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="prop">ResolutionFolder</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="prop">CsvFile</span><span class="pn">)</span> <span class="k">then</span> 
    <span onmouseout="hideTip(event, 'fs21', 28)" onmouseover="showTip(event, 'fs21', 28)" class="fn">printfn</span> <span class="s">&quot;Success!!&quot;</span>
<span class="k">else</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 29)" onmouseover="showTip(event, 'fs22', 29)" class="fn">filesThere</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30)" class="id">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 31)" onmouseover="showTip(event, 'fs23', 31)" class="rt">Directory</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 32)" onmouseover="showTip(event, 'fs24', 32)" class="id">EnumerateFiles</span><span class="pn">(</span>
        <span onmouseout="hideTip(event, 'fs16', 33)" onmouseover="showTip(event, 'fs16', 33)" class="prop">ResolutionFolder</span><span class="pn">,</span>
        <span class="fn">searchPattern</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="pn">,</span>
        <span class="fn">searchOption</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs18', 34)" onmouseover="showTip(event, 'fs18', 34)" class="id">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 35)" onmouseover="showTip(event, 'fs25', 35)" class="en">SearchOption</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 36)" onmouseover="showTip(event, 'fs26', 36)" class="id">AllDirectories</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs21', 37)" onmouseover="showTip(event, 'fs21', 37)" class="fn">printfn</span> <span class="s">&quot;We did not find the file. Here are the files in your source directory.\n&quot;</span>
    <span onmouseout="hideTip(event, 'fs22', 38)" onmouseover="showTip(event, 'fs22', 38)" class="fn">filesThere</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 39)" onmouseover="showTip(event, 'fs27', 39)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs28', 40)" onmouseover="showTip(event, 'fs28', 40)" class="id">iteri</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs21', 41)" onmouseover="showTip(event, 'fs21', 41)" class="fn">printfn</span> <span class="s">&quot;</span><span class="pf">%i</span><span class="s">. </span><span class="pf">%A</span><span class="s">&quot;</span><span class="pn">)</span>
</code></pre>
<p>Assuming that you got "Success!!" above this code below will work.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs29', 42)" onmouseover="showTip(event, 'fs29', 42)" class="rt">MsfCsv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs30', 43)" onmouseover="showTip(event, 'fs30', 43)" class="rt">CsvProvider</span><span class="pn">&lt;</span><span class="fn">Sample</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs17', 44)" onmouseover="showTip(event, 'fs17', 44)" class="prop">CsvFile</span><span class="pn">,</span>
                          <span onmouseout="hideTip(event, 'fs16', 45)" onmouseover="showTip(event, 'fs16', 45)" class="fn">ResolutionFolder</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs16', 46)" onmouseover="showTip(event, 'fs16', 46)" class="prop">ResolutionFolder</span><span class="pn">&gt;</span>

<span class="c">// assign the content of the file to a value</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 47)" onmouseover="showTip(event, 'fs31', 47)" class="id">msfCsv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 48)" onmouseover="showTip(event, 'fs29', 48)" class="id">MsfCsv</span><span class="pn">.</span><span class="id">GetSample</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<p>look at the file attributes</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs31', 49)" onmouseover="showTip(event, 'fs31', 49)" class="id">msfCsv</span>
</code></pre>
<p>look at the headers</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs31', 50)" onmouseover="showTip(event, 'fs31', 50)" class="id">msfCsv</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 51)" onmouseover="showTip(event, 'fs32', 51)" class="id">Headers</span>
</code></pre>
<p>look at the first few rows</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs31', 52)" onmouseover="showTip(event, 'fs31', 52)" class="id">msfCsv</span><span class="pn">.</span><span class="id">Rows</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 53)" onmouseover="showTip(event, 'fs27', 53)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 54)" onmouseover="showTip(event, 'fs33', 54)" class="id">truncate</span> <span class="n">3</span>
</code></pre>
<p>Read them into a list.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 55)" onmouseover="showTip(event, 'fs34', 55)" class="id">msfRows</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 56)" onmouseover="showTip(event, 'fs31', 56)" class="id">msfCsv</span><span class="pn">.</span><span class="id">Rows</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs27', 57)" onmouseover="showTip(event, 'fs27', 57)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 58)" onmouseover="showTip(event, 'fs35', 58)" class="id">toList</span>

<span onmouseout="hideTip(event, 'fs34', 59)" onmouseover="showTip(event, 'fs34', 59)" class="id">msfRows</span><span class="pn">[</span><span class="o">..</span><span class="n">3</span><span class="pn">]</span>
</code></pre>
<h2><a name="Signal-construction" class="anchor" href="#Signal-construction">Signal construction</a></h2>
<p>We want to create a momentum signal and see how it relates to future returns.
The signal is some measure of past returns. A common measure is the past year return,
skipping the most recent month. We skip the most recent month because stocks tend
to reverse following very recent returns (known as "reversals").
The reversal is very likely a liquidity effect and it is less important this century.
So returns are positively correlated with returns from 12 months to 1 months ago,
but negatively correlated with returns last month. This is illustrated very nicely
in Jegadeesh (1990).</p>
<p>If we're forming a portfolio at the end of month <span class="math">\(t-1\)</span> to hold in month <span class="math">\(t\)</span>,
then we're saying returns in month <span class="math">\(t\)</span> are positively correlated
with returns in months <span class="math">\(t-12\)</span> through month <span class="math">\(t-2\)</span>.
For example, if we want to hold a momenum portfolio in January 2021,
then we will form it on December 31, 2020.
We will want to go long stocks that had high returns from the beginning
of January 2020 to the end of November 2020.</p>
<p>Let's create a record to hold some info about past returns for a stock.
We will use this as a trading signal.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs36', 60)" onmouseover="showTip(event, 'fs36', 60)" class="rt">PriorReturnOb</span> <span class="o">=</span> 
    <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs37', 61)" onmouseover="showTip(event, 'fs37', 61)" class="prop">SecurityId</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs37', 62)" onmouseover="showTip(event, 'fs37', 62)" class="rt">SecurityId</span>
      <span class="prop">FormationMonth</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 63)" onmouseover="showTip(event, 'fs14', 63)" class="vt">DateTime</span> 
      <span class="prop">Retm12m2</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs38', 64)" onmouseover="showTip(event, 'fs38', 64)" class="vt">float</span>
      <span onmouseout="hideTip(event, 'fs39', 65)" onmouseover="showTip(event, 'fs39', 65)" class="prop">N</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs40', 66)" onmouseover="showTip(event, 'fs40', 66)" class="vt">int</span> <span class="pn">}</span>
</code></pre>
<p>We're dealing with monthly data.
When we use <code>DateTime</code>, then we have to give the month a
day value. We will give it the first day of the month. Why?</p>
<p>If we use the last day of the month,
then what happens when we add months. For example,
we have to start doing things like.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 67)" onmouseover="showTip(event, 'fs41', 67)" class="id">endOfFebruary</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 68)" onmouseover="showTip(event, 'fs14', 68)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span><span class="n">2</span><span class="pn">,</span><span class="n">28</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 69)" onmouseover="showTip(event, 'fs42', 69)" class="id">endOfMarch</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 70)" onmouseover="showTip(event, 'fs14', 70)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span> <span class="n">3</span><span class="pn">,</span> <span class="n">31</span><span class="pn">)</span>
</code></pre>
<p>What if we add one month to <code>endOfFebruary</code>?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 71)" onmouseover="showTip(event, 'fs43', 71)" class="id">endOfFebruaryPlus1Month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 72)" onmouseover="showTip(event, 'fs41', 72)" class="id">endOfFebruary</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 73)" onmouseover="showTip(event, 'fs44', 73)" class="id">AddMonths</span><span class="pn">(</span><span class="n">1</span><span class="pn">)</span>
<span onmouseout="hideTip(event, 'fs43', 74)" onmouseover="showTip(event, 'fs43', 74)" class="id">endOfFebruaryPlus1Month</span>
</code></pre>
<p>Hmm.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="prop">(</span><span onmouseout="hideTip(event, 'fs42', 75)" onmouseover="showTip(event, 'fs42', 75)" class="id">endOfMarch</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs43', 76)" onmouseover="showTip(event, 'fs43', 76)" class="id">endOfFebruaryPlus1Month</span><span class="pn">)</span><span class="pn">.</span><span class="id">Days</span>
</code></pre>
<p>That's a problem. Instead, if we do it with the first day of the
month we're ok.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 77)" onmouseover="showTip(event, 'fs45', 77)" class="id">beginningOfFebruary</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 78)" onmouseover="showTip(event, 'fs14', 78)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span><span class="n">2</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs46', 79)" onmouseover="showTip(event, 'fs46', 79)" class="id">beginningOfMarch</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 80)" onmouseover="showTip(event, 'fs14', 80)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span><span class="n">3</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> 

<span onmouseout="hideTip(event, 'fs14', 81)" onmouseover="showTip(event, 'fs14', 81)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span><span class="n">3</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> <span class="o">=</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs45', 82)" onmouseover="showTip(event, 'fs45', 82)" class="id">beginningOfFebruary</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 83)" onmouseover="showTip(event, 'fs44', 83)" class="id">AddMonths</span><span class="pn">(</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> 
</code></pre>
<p>We just have to remember that 2000-01-01 is the
return for the full month of January, from December 31, 1999, until
January 31, 2000.</p>
<p>Note: the NodaTime library has a <code>YearMonth</code> to handle monthly data
without having to specify a day. But we're using <code>DateTime</code> to
keep things slightly simpler.</p>
<p>Let's focus on a single stock.</p>
<p>First few rows</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs34', 84)" onmouseover="showTip(event, 'fs34', 84)" class="id">msfRows</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 85)" onmouseover="showTip(event, 'fs47', 85)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 86)" onmouseover="showTip(event, 'fs48', 86)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 87)" onmouseover="showTip(event, 'fs49', 87)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs49', 88)" onmouseover="showTip(event, 'fs49', 88)" class="fn">x</span><span class="pn">.</span><span class="id">Ticker</span> <span class="o">=</span> <span class="s">&quot;AMZN&quot;</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 89)" onmouseover="showTip(event, 'fs47', 89)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 90)" onmouseover="showTip(event, 'fs50', 90)" class="id">truncate</span> <span class="n">3</span>
</code></pre>
<p>Key by security and month</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs34', 91)" onmouseover="showTip(event, 'fs34', 91)" class="id">msfRows</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 92)" onmouseover="showTip(event, 'fs47', 92)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 93)" onmouseover="showTip(event, 'fs48', 93)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 94)" onmouseover="showTip(event, 'fs49', 94)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs49', 95)" onmouseover="showTip(event, 'fs49', 95)" class="fn">x</span><span class="pn">.</span><span class="id">Ticker</span> <span class="o">=</span> <span class="s">&quot;AMZN&quot;</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 96)" onmouseover="showTip(event, 'fs47', 96)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 97)" onmouseover="showTip(event, 'fs51', 97)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 98)" onmouseover="showTip(event, 'fs49', 98)" class="fn">x</span> <span class="k">-&gt;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 99)" onmouseover="showTip(event, 'fs52', 99)" class="fn">ym</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 100)" onmouseover="showTip(event, 'fs14', 100)" class="fn">DateTime</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 101)" onmouseover="showTip(event, 'fs49', 101)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 102)" onmouseover="showTip(event, 'fs53', 102)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 103)" onmouseover="showTip(event, 'fs54', 103)" class="id">Year</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs49', 104)" onmouseover="showTip(event, 'fs49', 104)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 105)" onmouseover="showTip(event, 'fs53', 105)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 106)" onmouseover="showTip(event, 'fs55', 106)" class="id">Month</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 107)" onmouseover="showTip(event, 'fs56', 107)" class="fn">key</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 108)" onmouseover="showTip(event, 'fs57', 108)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs49', 109)" onmouseover="showTip(event, 'fs49', 109)" class="fn">x</span><span class="pn">.</span><span class="id">Permno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs52', 110)" onmouseover="showTip(event, 'fs52', 110)" class="fn">ym</span>
    <span onmouseout="hideTip(event, 'fs56', 111)" onmouseover="showTip(event, 'fs56', 111)" class="fn">key</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 112)" onmouseover="showTip(event, 'fs49', 112)" class="fn">x</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 113)" onmouseover="showTip(event, 'fs47', 113)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 114)" onmouseover="showTip(event, 'fs50', 114)" class="id">truncate</span> <span class="n">3</span>
</code></pre>
<p>Assign those to a value and index with a Map collection.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs58', 115)" onmouseover="showTip(event, 'fs58', 115)" class="id">amznReturns</span> <span class="o">=</span> 
    <span class="c">// we&#39;re filtering and then storing as a Map collection</span>
    <span class="c">// that allows us to look up by a key of (permno, yearMonth)</span>
    <span onmouseout="hideTip(event, 'fs34', 116)" onmouseover="showTip(event, 'fs34', 116)" class="id">msfRows</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 117)" onmouseover="showTip(event, 'fs47', 117)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 118)" onmouseover="showTip(event, 'fs48', 118)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 119)" onmouseover="showTip(event, 'fs49', 119)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs49', 120)" onmouseover="showTip(event, 'fs49', 120)" class="fn">x</span><span class="pn">.</span><span class="id">Ticker</span> <span class="o">=</span> <span class="s">&quot;AMZN&quot;</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 121)" onmouseover="showTip(event, 'fs47', 121)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 122)" onmouseover="showTip(event, 'fs51', 122)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 123)" onmouseover="showTip(event, 'fs49', 123)" class="fn">x</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 124)" onmouseover="showTip(event, 'fs52', 124)" class="fn">ym</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 125)" onmouseover="showTip(event, 'fs14', 125)" class="fn">DateTime</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 126)" onmouseover="showTip(event, 'fs49', 126)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 127)" onmouseover="showTip(event, 'fs53', 127)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 128)" onmouseover="showTip(event, 'fs54', 128)" class="id">Year</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs49', 129)" onmouseover="showTip(event, 'fs49', 129)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 130)" onmouseover="showTip(event, 'fs53', 130)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 131)" onmouseover="showTip(event, 'fs55', 131)" class="id">Month</span><span class="pn">,</span> <span class="n">1</span><span class="pn">)</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 132)" onmouseover="showTip(event, 'fs56', 132)" class="fn">key</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 133)" onmouseover="showTip(event, 'fs57', 133)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs49', 134)" onmouseover="showTip(event, 'fs49', 134)" class="fn">x</span><span class="pn">.</span><span class="id">Permno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs52', 135)" onmouseover="showTip(event, 'fs52', 135)" class="fn">ym</span>
        <span onmouseout="hideTip(event, 'fs56', 136)" onmouseover="showTip(event, 'fs56', 136)" class="fn">key</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 137)" onmouseover="showTip(event, 'fs49', 137)" class="fn">x</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 138)" onmouseover="showTip(event, 'fs59', 138)" class="fn">Map</span>
</code></pre>
<p>Amazon is Permno 84788</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 139)" onmouseover="showTip(event, 'fs60', 139)" class="id">amznPermno</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 140)" onmouseover="showTip(event, 'fs57', 140)" class="uc">Permno</span> <span class="n">84788</span>
<span onmouseout="hideTip(event, 'fs58', 141)" onmouseover="showTip(event, 'fs58', 141)" class="id">amznReturns</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs60', 142)" onmouseover="showTip(event, 'fs60', 142)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 143)" onmouseover="showTip(event, 'fs14', 143)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">]</span>
</code></pre>
<p>A function to get past year of returns.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 144)" onmouseover="showTip(event, 'fs61', 144)" class="fn">getPastYearObs</span> <span onmouseout="hideTip(event, 'fs62', 145)" onmouseover="showTip(event, 'fs62', 145)" class="fn">returns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs63', 146)" onmouseover="showTip(event, 'fs63', 146)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 147)" onmouseover="showTip(event, 'fs64', 147)" class="fn">formationMonth</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 148)" onmouseover="showTip(event, 'fs14', 148)" class="vt">DateTime</span><span class="pn">)</span> <span class="o">=</span>
        <span class="pn">[</span> <span class="o">-</span><span class="n">11</span> <span class="o">..</span> <span class="o">-</span><span class="n">1</span> <span class="pn">]</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 149)" onmouseover="showTip(event, 'fs47', 149)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 150)" onmouseover="showTip(event, 'fs65', 150)" class="id">choose</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 151)" onmouseover="showTip(event, 'fs66', 151)" class="fn">i</span> <span class="k">-&gt;</span> 
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 152)" onmouseover="showTip(event, 'fs67', 152)" class="fn">returnMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 153)" onmouseover="showTip(event, 'fs64', 153)" class="fn">formationMonth</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 154)" onmouseover="showTip(event, 'fs44', 154)" class="id">AddMonths</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs66', 155)" onmouseover="showTip(event, 'fs66', 155)" class="fn">i</span><span class="pn">)</span>
            <span onmouseout="hideTip(event, 'fs59', 156)" onmouseover="showTip(event, 'fs59', 156)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 157)" onmouseover="showTip(event, 'fs68', 157)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs63', 158)" onmouseover="showTip(event, 'fs63', 158)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs67', 159)" onmouseover="showTip(event, 'fs67', 159)" class="fn">returnMonth</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs62', 160)" onmouseover="showTip(event, 'fs62', 160)" class="fn">returns</span><span class="pn">)</span>    
</code></pre>
<p>check Permno Amzn</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs61', 161)" onmouseover="showTip(event, 'fs61', 161)" class="fn">getPastYearObs</span> <span onmouseout="hideTip(event, 'fs58', 162)" onmouseover="showTip(event, 'fs58', 162)" class="id">amznReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 163)" onmouseover="showTip(event, 'fs60', 163)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 164)" onmouseover="showTip(event, 'fs14', 164)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>  
</code></pre>
<p>Check bad data, nothing is returned</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs61', 165)" onmouseover="showTip(event, 'fs61', 165)" class="fn">getPastYearObs</span> <span onmouseout="hideTip(event, 'fs58', 166)" onmouseover="showTip(event, 'fs58', 166)" class="id">amznReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 167)" onmouseover="showTip(event, 'fs57', 167)" class="uc">Permno</span> <span class="o">-</span><span class="n">400</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 168)" onmouseover="showTip(event, 'fs14', 168)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>  

<span class="c">// making cumulative returns </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 169)" onmouseover="showTip(event, 'fs69', 169)" class="fn">cumulativeReturn</span> <span onmouseout="hideTip(event, 'fs70', 170)" onmouseover="showTip(event, 'fs70', 170)" class="fn">rets</span> <span class="o">=</span>
    <span class="c">// using Seq so that it will work with any collection</span>
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs71', 171)" onmouseover="showTip(event, 'fs71', 171)" class="mv">cr</span> <span class="o">=</span> <span class="n">1.0</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs72', 172)" onmouseover="showTip(event, 'fs72', 172)" class="fn">r</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs70', 173)" onmouseover="showTip(event, 'fs70', 173)" class="fn">rets</span> <span class="k">do</span>
        <span onmouseout="hideTip(event, 'fs71', 174)" onmouseover="showTip(event, 'fs71', 174)" class="mv">cr</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs71', 175)" onmouseover="showTip(event, 'fs71', 175)" class="mv">cr</span> <span class="o">*</span> <span class="pn">(</span><span class="n">1.0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs72', 176)" onmouseover="showTip(event, 'fs72', 176)" class="fn">r</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs71', 177)" onmouseover="showTip(event, 'fs71', 177)" class="mv">cr</span> <span class="o">-</span> <span class="n">1.0</span>
</code></pre>
<p>check result with no data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs69', 178)" onmouseover="showTip(event, 'fs69', 178)" class="fn">cumulativeReturn</span> <span class="pn">[</span><span class="pn">]</span>
</code></pre>
<p>check up 100\% and then down 50\%.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs69', 179)" onmouseover="showTip(event, 'fs69', 179)" class="fn">cumulativeReturn</span> <span class="pn">[</span><span class="n">1.0</span><span class="pn">;</span><span class="o">-</span><span class="n">0.5</span><span class="pn">]</span>
</code></pre>
<p>check</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs69', 180)" onmouseover="showTip(event, 'fs69', 180)" class="fn">cumulativeReturn</span> <span class="pn">[</span><span class="n">0.1</span><span class="pn">;</span> <span class="n">0.1</span><span class="pn">;</span> <span class="n">0.1</span><span class="pn">;</span> <span class="n">0.1</span><span class="pn">]</span>
</code></pre>
<p>compared to</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="n">1.1</span> <span class="o">**</span> <span class="n">4.0</span> <span class="o">-</span> <span class="n">1.0</span>
</code></pre>
<p>We're now ready to create our Momentum signal function.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// If you don&#39;t want to write the typessecurity, month all the time.</span>
<span class="c">// </span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs73', 181)" onmouseover="showTip(event, 'fs73', 181)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs74', 182)" onmouseover="showTip(event, 'fs74', 182)" class="fn">returns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 183)" onmouseover="showTip(event, 'fs75', 183)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 184)" onmouseover="showTip(event, 'fs64', 184)" class="fn">formationMonth</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs76', 185)" onmouseover="showTip(event, 'fs76', 185)" class="fn">priorObs</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 186)" onmouseover="showTip(event, 'fs61', 186)" class="fn">getPastYearObs</span>  <span onmouseout="hideTip(event, 'fs74', 187)" onmouseover="showTip(event, 'fs74', 187)" class="fn">returns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 188)" onmouseover="showTip(event, 'fs75', 188)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 189)" onmouseover="showTip(event, 'fs64', 189)" class="fn">formationMonth</span><span class="pn">)</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 190)" onmouseover="showTip(event, 'fs77', 190)" class="fn">priorRets</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs76', 191)" onmouseover="showTip(event, 'fs76', 191)" class="fn">priorObs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 192)" onmouseover="showTip(event, 'fs47', 192)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 193)" onmouseover="showTip(event, 'fs65', 193)" class="id">choose</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs78', 194)" onmouseover="showTip(event, 'fs78', 194)" class="fn">x</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs29', 195)" onmouseover="showTip(event, 'fs29', 195)" class="id">MsfCsv</span><span class="pn">.</span><span class="id">Row</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs78', 196)" onmouseover="showTip(event, 'fs78', 196)" class="fn">x</span><span class="pn">.</span><span class="id">Ret</span><span class="pn">)</span>
    <span class="c">// We should probably return None if there are no observations.</span>
    <span class="c">// If they are all missing, List.choose will return an empty</span>
    <span class="c">// array. See:</span>
    <span class="c">// ([ None; None ]: int option list) |&gt; List.choose id</span>
    <span class="c">//</span>
    <span class="c">// So we&#39;ll check for an empty array and return None in that case.</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs47', 197)" onmouseover="showTip(event, 'fs47', 197)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs79', 198)" onmouseover="showTip(event, 'fs79', 198)" class="id">isEmpty</span> <span onmouseout="hideTip(event, 'fs77', 199)" onmouseover="showTip(event, 'fs77', 199)" class="fn">priorRets</span> <span class="k">then</span>
        <span onmouseout="hideTip(event, 'fs80', 200)" onmouseover="showTip(event, 'fs80', 200)" class="uc">None</span> 
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs81', 201)" onmouseover="showTip(event, 'fs81', 201)" class="uc">Some</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs37', 202)" onmouseover="showTip(event, 'fs37', 202)" class="prop">SecurityId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs75', 203)" onmouseover="showTip(event, 'fs75', 203)" class="fn">security</span> 
               <span class="prop">FormationMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 204)" onmouseover="showTip(event, 'fs64', 204)" class="fn">formationMonth</span>
               <span class="prop">Retm12m2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs69', 205)" onmouseover="showTip(event, 'fs69', 205)" class="fn">cumulativeReturn</span> <span onmouseout="hideTip(event, 'fs77', 206)" onmouseover="showTip(event, 'fs77', 206)" class="fn">priorRets</span>
               <span onmouseout="hideTip(event, 'fs39', 207)" onmouseover="showTip(event, 'fs39', 207)" class="prop">N</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs77', 208)" onmouseover="showTip(event, 'fs77', 208)" class="fn">priorRets</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 209)" onmouseover="showTip(event, 'fs82', 209)" class="id">Length</span> <span class="pn">}</span>

<span class="c">// Check</span>
<span onmouseout="hideTip(event, 'fs73', 210)" onmouseover="showTip(event, 'fs73', 210)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs58', 211)" onmouseover="showTip(event, 'fs58', 211)" class="id">amznReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 212)" onmouseover="showTip(event, 'fs60', 212)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 213)" onmouseover="showTip(event, 'fs14', 213)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> 
<span onmouseout="hideTip(event, 'fs73', 214)" onmouseover="showTip(event, 'fs73', 214)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs58', 215)" onmouseover="showTip(event, 'fs58', 215)" class="id">amznReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 216)" onmouseover="showTip(event, 'fs57', 216)" class="uc">Permno</span> <span class="o">-</span><span class="n">400</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 217)" onmouseover="showTip(event, 'fs14', 217)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>  
</code></pre>
<p>One thing you may notice is that our momentum signal function gets everything from
it's inputs. That means that if we give it different intputs then
we could get momentum signals for other stocks.</p>
<p>For example we can create a map collection like we had for amzn, but for all stocks.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs83', 218)" onmouseover="showTip(event, 'fs83', 218)" class="id">msfByPermnoMonth</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs34', 219)" onmouseover="showTip(event, 'fs34', 219)" class="id">msfRows</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 220)" onmouseover="showTip(event, 'fs47', 220)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 221)" onmouseover="showTip(event, 'fs51', 221)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 222)" onmouseover="showTip(event, 'fs49', 222)" class="fn">x</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 223)" onmouseover="showTip(event, 'fs52', 223)" class="fn">ym</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 224)" onmouseover="showTip(event, 'fs14', 224)" class="fn">DateTime</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 225)" onmouseover="showTip(event, 'fs49', 225)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 226)" onmouseover="showTip(event, 'fs53', 226)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 227)" onmouseover="showTip(event, 'fs54', 227)" class="id">Year</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs49', 228)" onmouseover="showTip(event, 'fs49', 228)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 229)" onmouseover="showTip(event, 'fs53', 229)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 230)" onmouseover="showTip(event, 'fs55', 230)" class="id">Month</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 231)" onmouseover="showTip(event, 'fs56', 231)" class="fn">key</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 232)" onmouseover="showTip(event, 'fs57', 232)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs49', 233)" onmouseover="showTip(event, 'fs49', 233)" class="fn">x</span><span class="pn">.</span><span class="id">Permno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs52', 234)" onmouseover="showTip(event, 'fs52', 234)" class="fn">ym</span>
        <span onmouseout="hideTip(event, 'fs56', 235)" onmouseover="showTip(event, 'fs56', 235)" class="fn">key</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 236)" onmouseover="showTip(event, 'fs49', 236)" class="fn">x</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 237)" onmouseover="showTip(event, 'fs59', 237)" class="fn">Map</span>
</code></pre>
<p>finding some permnos for notable tickers</p>
<p>don't use tickers. companies change tickers, so you might look up the wrong company
That's why I'm picking some tickers that I know haven't changed, but my function
is using PERMNO.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 238)" onmouseover="showTip(event, 'fs84', 238)" class="id">testTicker</span> <span class="o">=</span> <span class="s">&quot;HOG&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 239)" onmouseover="showTip(event, 'fs85', 239)" class="id">firstTestTickerRow</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs34', 240)" onmouseover="showTip(event, 'fs34', 240)" class="id">msfRows</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 241)" onmouseover="showTip(event, 'fs47', 241)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs86', 242)" onmouseover="showTip(event, 'fs86', 242)" class="id">find</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs87', 243)" onmouseover="showTip(event, 'fs87', 243)" class="fn">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs87', 244)" onmouseover="showTip(event, 'fs87', 244)" class="fn">row</span><span class="pn">.</span><span class="id">Ticker</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs84', 245)" onmouseover="showTip(event, 'fs84', 245)" class="id">testTicker</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs85', 246)" onmouseover="showTip(event, 'fs85', 246)" class="id">firstTestTickerRow</span><span class="pn">.</span><span class="id">Ticker</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs85', 247)" onmouseover="showTip(event, 'fs85', 247)" class="id">firstTestTickerRow</span><span class="pn">.</span><span class="id">Permno</span>
</code></pre>
<p>Now do for a list of tickers</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 248)" onmouseover="showTip(event, 'fs88', 248)" class="id">notableTicks</span> <span class="o">=</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs89', 249)" onmouseover="showTip(event, 'fs89', 249)" class="fn">ticker</span> <span class="k">in</span> <span class="pn">[</span><span class="s">&quot;MSFT&quot;</span><span class="pn">;</span><span class="s">&quot;AAPL&quot;</span><span class="pn">;</span><span class="s">&quot;HOG&quot;</span><span class="pn">]</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 250)" onmouseover="showTip(event, 'fs90', 250)" class="fn">firstTickerRow</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs34', 251)" onmouseover="showTip(event, 'fs34', 251)" class="id">msfRows</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 252)" onmouseover="showTip(event, 'fs47', 252)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs86', 253)" onmouseover="showTip(event, 'fs86', 253)" class="id">find</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs87', 254)" onmouseover="showTip(event, 'fs87', 254)" class="fn">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs87', 255)" onmouseover="showTip(event, 'fs87', 255)" class="fn">row</span><span class="pn">.</span><span class="id">Ticker</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs89', 256)" onmouseover="showTip(event, 'fs89', 256)" class="fn">ticker</span><span class="pn">)</span>
        <span onmouseout="hideTip(event, 'fs90', 257)" onmouseover="showTip(event, 'fs90', 257)" class="fn">firstTickerRow</span><span class="pn">.</span><span class="id">Ticker</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs90', 258)" onmouseover="showTip(event, 'fs90', 258)" class="fn">firstTickerRow</span><span class="pn">.</span><span class="id">Permno</span> <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 259)" onmouseover="showTip(event, 'fs59', 259)" class="fn">Map</span>

<span onmouseout="hideTip(event, 'fs88', 260)" onmouseover="showTip(event, 'fs88', 260)" class="id">notableTicks</span>
</code></pre>
<p>wrap integer ticker in <code>Permno</code> tag
to make it have type <code>SecurityId</code>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs91', 261)" onmouseover="showTip(event, 'fs91', 261)" class="id">msftPermno</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 262)" onmouseover="showTip(event, 'fs57', 262)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs88', 263)" onmouseover="showTip(event, 'fs88', 263)" class="id">notableTicks</span><span class="pn">[</span><span class="s">&quot;MSFT&quot;</span><span class="pn">]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 264)" onmouseover="showTip(event, 'fs92', 264)" class="id">aaplPermno</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 265)" onmouseover="showTip(event, 'fs57', 265)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs88', 266)" onmouseover="showTip(event, 'fs88', 266)" class="id">notableTicks</span><span class="pn">[</span><span class="s">&quot;AAPL&quot;</span><span class="pn">]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs93', 267)" onmouseover="showTip(event, 'fs93', 267)" class="id">hogPermno</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 268)" onmouseover="showTip(event, 'fs57', 268)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs88', 269)" onmouseover="showTip(event, 'fs88', 269)" class="id">notableTicks</span><span class="pn">[</span><span class="s">&quot;HOG&quot;</span><span class="pn">]</span>

<span onmouseout="hideTip(event, 'fs91', 270)" onmouseover="showTip(event, 'fs91', 270)" class="id">msftPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs92', 271)" onmouseover="showTip(event, 'fs92', 271)" class="id">aaplPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs93', 272)" onmouseover="showTip(event, 'fs93', 272)" class="id">hogPermno</span>
</code></pre>
<p>Creating a tuple of (permno, yearMonth) that
we can use for looking up things in that month
for that ticker.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 273)" onmouseover="showTip(event, 'fs94', 273)" class="id">msftTestIndex</span> <span class="o">=</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs91', 274)" onmouseover="showTip(event, 'fs91', 274)" class="id">msftPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 275)" onmouseover="showTip(event, 'fs14', 275)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs95', 276)" onmouseover="showTip(event, 'fs95', 276)" class="id">aaplTestIndex</span> <span class="o">=</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs92', 277)" onmouseover="showTip(event, 'fs92', 277)" class="id">aaplPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 278)" onmouseover="showTip(event, 'fs14', 278)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>  

<span onmouseout="hideTip(event, 'fs94', 279)" onmouseover="showTip(event, 'fs94', 279)" class="id">msftTestIndex</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs95', 280)" onmouseover="showTip(event, 'fs95', 280)" class="id">aaplTestIndex</span>
</code></pre>
<p>Microsoft momentum signal:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs73', 281)" onmouseover="showTip(event, 'fs73', 281)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs83', 282)" onmouseover="showTip(event, 'fs83', 282)" class="id">msfByPermnoMonth</span> <span onmouseout="hideTip(event, 'fs94', 283)" onmouseover="showTip(event, 'fs94', 283)" class="id">msftTestIndex</span> 
</code></pre>
<p>Apple momentum signal:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs73', 284)" onmouseover="showTip(event, 'fs73', 284)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs83', 285)" onmouseover="showTip(event, 'fs83', 285)" class="id">msfByPermnoMonth</span> <span onmouseout="hideTip(event, 'fs95', 286)" onmouseover="showTip(event, 'fs95', 286)" class="id">aaplTestIndex</span>  
</code></pre>
<p>and we can use <a href="https://fsharpforfunandprofit.com/posts/partial-application/">partial function application</a>
to "bake in" the msfByPermnoMonth parameter so that we don't keep having to pass it around.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 287)" onmouseover="showTip(event, 'fs96', 287)" class="fn">getMomentumSignalAny</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 288)" onmouseover="showTip(event, 'fs73', 288)" class="fn">getMomentumSignal</span> <span onmouseout="hideTip(event, 'fs83', 289)" onmouseover="showTip(event, 'fs83', 289)" class="id">msfByPermnoMonth</span>
</code></pre>
<p>Microsoft again:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs96', 290)" onmouseover="showTip(event, 'fs96', 290)" class="fn">getMomentumSignalAny</span> <span onmouseout="hideTip(event, 'fs94', 291)" onmouseover="showTip(event, 'fs94', 291)" class="id">msftTestIndex</span> 
</code></pre>
<p>Apple again:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs96', 292)" onmouseover="showTip(event, 'fs96', 292)" class="fn">getMomentumSignalAny</span> <span onmouseout="hideTip(event, 'fs95', 293)" onmouseover="showTip(event, 'fs95', 293)" class="id">aaplTestIndex</span>  
</code></pre>
<h2><a name="Defining-the-investment-universe" class="anchor" href="#Defining-the-investment-universe">Defining the investment universe</a></h2>
<p>Let's say we have a portfolio formation month. Can we look up securities available to invest in?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs97', 294)" onmouseover="showTip(event, 'fs97', 294)" class="id">securitiesByFormationMonth</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs98', 295)" onmouseover="showTip(event, 'fs98', 295)" class="fn">byYearMonth</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs34', 296)" onmouseover="showTip(event, 'fs34', 296)" class="id">msfRows</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 297)" onmouseover="showTip(event, 'fs47', 297)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs99', 298)" onmouseover="showTip(event, 'fs99', 298)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 299)" onmouseover="showTip(event, 'fs49', 299)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs14', 300)" onmouseover="showTip(event, 'fs14', 300)" class="fn">DateTime</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 301)" onmouseover="showTip(event, 'fs49', 301)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 302)" onmouseover="showTip(event, 'fs53', 302)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 303)" onmouseover="showTip(event, 'fs54', 303)" class="id">Year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 304)" onmouseover="showTip(event, 'fs49', 304)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs53', 305)" onmouseover="showTip(event, 'fs53', 305)" class="prop">Month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 306)" onmouseover="showTip(event, 'fs55', 306)" class="id">Month</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
    <span class="pn">[</span> <span class="k">for</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs100', 307)" onmouseover="showTip(event, 'fs100', 307)" class="fn">yearMonth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs101', 308)" onmouseover="showTip(event, 'fs101', 308)" class="fn">stocksThatMonth</span><span class="pn">)</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs98', 309)" onmouseover="showTip(event, 'fs98', 309)" class="fn">byYearMonth</span> <span class="k">do</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs102', 310)" onmouseover="showTip(event, 'fs102', 310)" class="fn">permnos</span> <span class="o">=</span> <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs103', 311)" onmouseover="showTip(event, 'fs103', 311)" class="fn">stock</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs101', 312)" onmouseover="showTip(event, 'fs101', 312)" class="fn">stocksThatMonth</span> <span class="k">do</span> <span onmouseout="hideTip(event, 'fs57', 313)" onmouseover="showTip(event, 'fs57', 313)" class="uc">Permno</span> <span onmouseout="hideTip(event, 'fs103', 314)" onmouseover="showTip(event, 'fs103', 314)" class="fn">stock</span><span class="pn">.</span><span class="id">Permno</span> <span class="pn">]</span>
        <span onmouseout="hideTip(event, 'fs100', 315)" onmouseover="showTip(event, 'fs100', 315)" class="fn">yearMonth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs102', 316)" onmouseover="showTip(event, 'fs102', 316)" class="fn">permnos</span> <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs59', 317)" onmouseover="showTip(event, 'fs59', 317)" class="fn">Map</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs104', 318)" onmouseover="showTip(event, 'fs104', 318)" class="fn">getInvestmentUniverse</span> <span onmouseout="hideTip(event, 'fs64', 319)" onmouseover="showTip(event, 'fs64', 319)" class="fn">formationMonth</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 320)" onmouseover="showTip(event, 'fs59', 320)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 321)" onmouseover="showTip(event, 'fs68', 321)" class="id">tryFind</span> <span onmouseout="hideTip(event, 'fs64', 322)" onmouseover="showTip(event, 'fs64', 322)" class="fn">formationMonth</span> <span onmouseout="hideTip(event, 'fs97', 323)" onmouseover="showTip(event, 'fs97', 323)" class="id">securitiesByFormationMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 324)" onmouseover="showTip(event, 'fs81', 324)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs105', 325)" onmouseover="showTip(event, 'fs105', 325)" class="fn">securities</span> <span class="k">-&gt;</span> 
        <span class="pn">{</span> <span class="prop">FormationMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 326)" onmouseover="showTip(event, 'fs64', 326)" class="fn">formationMonth</span> 
          <span class="prop">Securities</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs105', 327)" onmouseover="showTip(event, 'fs105', 327)" class="fn">securities</span> <span class="pn">}</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 328)" onmouseover="showTip(event, 'fs80', 328)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs106', 329)" onmouseover="showTip(event, 'fs106', 329)" class="fn">failwith</span> <span class="s">$&quot;{</span><span onmouseout="hideTip(event, 'fs64', 330)" onmouseover="showTip(event, 'fs64', 330)" class="fn">formationMonth</span><span class="s">} is not in the date range&quot;</span>      

<span onmouseout="hideTip(event, 'fs104', 331)" onmouseover="showTip(event, 'fs104', 331)" class="fn">getInvestmentUniverse</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs14', 332)" onmouseover="showTip(event, 'fs14', 332)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2011</span><span class="pn">,</span><span class="n">10</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
<span class="c">// getInvestmentUniverse (YearMonth(1990,10))</span>
</code></pre>
<p>You might also want to filter the investment universe by some criteria.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs107', 333)" onmouseover="showTip(event, 'fs107', 333)" class="fn">isCommonStock</span> <span onmouseout="hideTip(event, 'fs108', 334)" onmouseover="showTip(event, 'fs108', 334)" class="fn">securityFormationMonth</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 335)" onmouseover="showTip(event, 'fs59', 335)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 336)" onmouseover="showTip(event, 'fs68', 336)" class="id">tryFind</span> <span onmouseout="hideTip(event, 'fs108', 337)" onmouseover="showTip(event, 'fs108', 337)" class="fn">securityFormationMonth</span> <span onmouseout="hideTip(event, 'fs83', 338)" onmouseover="showTip(event, 'fs83', 338)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 339)" onmouseover="showTip(event, 'fs80', 339)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 340)" onmouseover="showTip(event, 'fs81', 340)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs49', 341)" onmouseover="showTip(event, 'fs49', 341)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs47', 342)" onmouseover="showTip(event, 'fs47', 342)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs109', 343)" onmouseover="showTip(event, 'fs109', 343)" class="id">contains</span> <span onmouseout="hideTip(event, 'fs49', 344)" onmouseover="showTip(event, 'fs49', 344)" class="fn">x</span><span class="pn">.</span><span class="id">Shrcd</span> <span class="pn">[</span><span class="n">10</span><span class="pn">;</span> <span class="n">11</span><span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 345)" onmouseover="showTip(event, 'fs110', 345)" class="fn">onNyseNasdaqAmex</span> <span onmouseout="hideTip(event, 'fs108', 346)" onmouseover="showTip(event, 'fs108', 346)" class="fn">securityFormationMonth</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 347)" onmouseover="showTip(event, 'fs59', 347)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 348)" onmouseover="showTip(event, 'fs68', 348)" class="id">tryFind</span> <span onmouseout="hideTip(event, 'fs108', 349)" onmouseover="showTip(event, 'fs108', 349)" class="fn">securityFormationMonth</span> <span onmouseout="hideTip(event, 'fs83', 350)" onmouseover="showTip(event, 'fs83', 350)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 351)" onmouseover="showTip(event, 'fs80', 351)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 352)" onmouseover="showTip(event, 'fs81', 352)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs49', 353)" onmouseover="showTip(event, 'fs49', 353)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs47', 354)" onmouseover="showTip(event, 'fs47', 354)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs109', 355)" onmouseover="showTip(event, 'fs109', 355)" class="id">contains</span> <span onmouseout="hideTip(event, 'fs49', 356)" onmouseover="showTip(event, 'fs49', 356)" class="fn">x</span><span class="pn">.</span><span class="id">Exchcd</span> <span class="pn">[</span> <span class="n">1</span><span class="pn">;</span> <span class="n">2</span><span class="pn">;</span> <span class="n">3</span><span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs111', 357)" onmouseover="showTip(event, 'fs111', 357)" class="fn">hasPrice13mAgo</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 358)" onmouseover="showTip(event, 'fs75', 358)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 359)" onmouseover="showTip(event, 'fs64', 359)" class="fn">formationMonth</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs14', 360)" onmouseover="showTip(event, 'fs14', 360)" class="vt">DateTime</span><span class="pn">)</span> <span class="o">=</span>
    <span class="c">//13m before the holding month, 12m before the formation month</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 361)" onmouseover="showTip(event, 'fs59', 361)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 362)" onmouseover="showTip(event, 'fs68', 362)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 363)" onmouseover="showTip(event, 'fs75', 363)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 364)" onmouseover="showTip(event, 'fs64', 364)" class="fn">formationMonth</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 365)" onmouseover="showTip(event, 'fs44', 365)" class="id">AddMonths</span><span class="pn">(</span><span class="o">-</span><span class="n">12</span><span class="pn">)</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs83', 366)" onmouseover="showTip(event, 'fs83', 366)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 367)" onmouseover="showTip(event, 'fs80', 367)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 368)" onmouseover="showTip(event, 'fs81', 368)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs112', 369)" onmouseover="showTip(event, 'fs112', 369)" class="fn">m13</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs112', 370)" onmouseover="showTip(event, 'fs112', 370)" class="fn">m13</span><span class="pn">.</span><span class="id">Prc</span><span class="pn">.</span><span class="id">IsSome</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs113', 371)" onmouseover="showTip(event, 'fs113', 371)" class="fn">hasReturn2mAgo</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 372)" onmouseover="showTip(event, 'fs75', 372)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 373)" onmouseover="showTip(event, 'fs64', 373)" class="fn">formationMonth</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs14', 374)" onmouseover="showTip(event, 'fs14', 374)" class="vt">DateTime</span><span class="pn">)</span> <span class="o">=</span>
    <span class="c">//2m before the holding month, 1m before the formation month</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 375)" onmouseover="showTip(event, 'fs59', 375)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 376)" onmouseover="showTip(event, 'fs68', 376)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 377)" onmouseover="showTip(event, 'fs75', 377)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 378)" onmouseover="showTip(event, 'fs64', 378)" class="fn">formationMonth</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 379)" onmouseover="showTip(event, 'fs44', 379)" class="id">AddMonths</span><span class="pn">(</span><span class="o">-</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs83', 380)" onmouseover="showTip(event, 'fs83', 380)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 381)" onmouseover="showTip(event, 'fs80', 381)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 382)" onmouseover="showTip(event, 'fs81', 382)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs114', 383)" onmouseover="showTip(event, 'fs114', 383)" class="fn">m2</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs114', 384)" onmouseover="showTip(event, 'fs114', 384)" class="fn">m2</span><span class="pn">.</span><span class="id">Ret</span><span class="pn">.</span><span class="id">IsSome</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs115', 385)" onmouseover="showTip(event, 'fs115', 385)" class="fn">hasMe1mAgo</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 386)" onmouseover="showTip(event, 'fs75', 386)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 387)" onmouseover="showTip(event, 'fs64', 387)" class="fn">formationMonth</span><span class="pn">)</span> <span class="o">=</span>
    <span class="c">//1m before the holding month, so the formation month</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 388)" onmouseover="showTip(event, 'fs59', 388)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 389)" onmouseover="showTip(event, 'fs68', 389)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 390)" onmouseover="showTip(event, 'fs75', 390)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 391)" onmouseover="showTip(event, 'fs64', 391)" class="fn">formationMonth</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs83', 392)" onmouseover="showTip(event, 'fs83', 392)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 393)" onmouseover="showTip(event, 'fs80', 393)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 394)" onmouseover="showTip(event, 'fs81', 394)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs116', 395)" onmouseover="showTip(event, 'fs116', 395)" class="fn">m1</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs116', 396)" onmouseover="showTip(event, 'fs116', 396)" class="fn">m1</span><span class="pn">.</span><span class="id">Prc</span><span class="pn">.</span><span class="id">IsSome</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs116', 397)" onmouseover="showTip(event, 'fs116', 397)" class="fn">m1</span><span class="pn">.</span><span class="id">Shrout</span><span class="pn">.</span><span class="id">IsSome</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs117', 398)" onmouseover="showTip(event, 'fs117', 398)" class="fn">has8ReturnsPastYear</span> <span onmouseout="hideTip(event, 'fs108', 399)" onmouseover="showTip(event, 'fs108', 399)" class="fn">securityFormationMonth</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs96', 400)" onmouseover="showTip(event, 'fs96', 400)" class="fn">getMomentumSignalAny</span> <span onmouseout="hideTip(event, 'fs108', 401)" onmouseover="showTip(event, 'fs108', 401)" class="fn">securityFormationMonth</span> <span class="k">with</span> 
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 402)" onmouseover="showTip(event, 'fs80', 402)" class="uc">None</span> <span class="k">-&gt;</span> <span class="k">false</span> 
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 403)" onmouseover="showTip(event, 'fs81', 403)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs118', 404)" onmouseover="showTip(event, 'fs118', 404)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs118', 405)" onmouseover="showTip(event, 'fs118', 405)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 406)" onmouseover="showTip(event, 'fs39', 406)" class="id">N</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">8</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs119', 407)" onmouseover="showTip(event, 'fs119', 407)" class="fn">danielMoskowitzRestrictions</span> <span onmouseout="hideTip(event, 'fs108', 408)" onmouseover="showTip(event, 'fs108', 408)" class="fn">securityFormationMonth</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs107', 409)" onmouseover="showTip(event, 'fs107', 409)" class="fn">isCommonStock</span> <span onmouseout="hideTip(event, 'fs108', 410)" onmouseover="showTip(event, 'fs108', 410)" class="fn">securityFormationMonth</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs110', 411)" onmouseover="showTip(event, 'fs110', 411)" class="fn">onNyseNasdaqAmex</span> <span onmouseout="hideTip(event, 'fs108', 412)" onmouseover="showTip(event, 'fs108', 412)" class="fn">securityFormationMonth</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs111', 413)" onmouseover="showTip(event, 'fs111', 413)" class="fn">hasPrice13mAgo</span> <span onmouseout="hideTip(event, 'fs108', 414)" onmouseover="showTip(event, 'fs108', 414)" class="fn">securityFormationMonth</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs113', 415)" onmouseover="showTip(event, 'fs113', 415)" class="fn">hasReturn2mAgo</span> <span onmouseout="hideTip(event, 'fs108', 416)" onmouseover="showTip(event, 'fs108', 416)" class="fn">securityFormationMonth</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs115', 417)" onmouseover="showTip(event, 'fs115', 417)" class="fn">hasMe1mAgo</span> <span onmouseout="hideTip(event, 'fs108', 418)" onmouseover="showTip(event, 'fs108', 418)" class="fn">securityFormationMonth</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs117', 419)" onmouseover="showTip(event, 'fs117', 419)" class="fn">has8ReturnsPastYear</span> <span onmouseout="hideTip(event, 'fs108', 420)" onmouseover="showTip(event, 'fs108', 420)" class="fn">securityFormationMonth</span> 

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs120', 421)" onmouseover="showTip(event, 'fs120', 421)" class="fn">restrictUniverse</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs121', 422)" onmouseover="showTip(event, 'fs121', 422)" class="fn">investmentUniverse</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs122', 423)" onmouseover="showTip(event, 'fs122', 423)" class="rt">InvestmentUniverse</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs123', 424)" onmouseover="showTip(event, 'fs123', 424)" class="fn">filtered</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs121', 425)" onmouseover="showTip(event, 'fs121', 425)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs124', 426)" onmouseover="showTip(event, 'fs124', 426)" class="id">Securities</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 427)" onmouseover="showTip(event, 'fs47', 427)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 428)" onmouseover="showTip(event, 'fs48', 428)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs75', 429)" onmouseover="showTip(event, 'fs75', 429)" class="fn">security</span> <span class="k">-&gt;</span> 
            <span onmouseout="hideTip(event, 'fs119', 430)" onmouseover="showTip(event, 'fs119', 430)" class="fn">danielMoskowitzRestrictions</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 431)" onmouseover="showTip(event, 'fs75', 431)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs121', 432)" onmouseover="showTip(event, 'fs121', 432)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs125', 433)" onmouseover="showTip(event, 'fs125', 433)" class="id">FormationMonth</span><span class="pn">)</span><span class="pn">)</span>
    <span class="pn">{</span> <span class="prop">FormationMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 434)" onmouseover="showTip(event, 'fs121', 434)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs125', 435)" onmouseover="showTip(event, 'fs125', 435)" class="id">FormationMonth</span>
      <span class="prop">Securities</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs123', 436)" onmouseover="showTip(event, 'fs123', 436)" class="fn">filtered</span> <span class="pn">}</span>        
</code></pre>
<p>Now we can see where we are.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs14', 437)" onmouseover="showTip(event, 'fs14', 437)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2011</span><span class="pn">,</span><span class="n">10</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 438)" onmouseover="showTip(event, 'fs104', 438)" class="fn">getInvestmentUniverse</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 439)" onmouseover="showTip(event, 'fs120', 439)" class="fn">restrictUniverse</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs121', 440)" onmouseover="showTip(event, 'fs121', 440)" class="id">investmentUniverse</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs14', 441)" onmouseover="showTip(event, 'fs14', 441)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2011</span><span class="pn">,</span><span class="n">10</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 442)" onmouseover="showTip(event, 'fs104', 442)" class="fn">getInvestmentUniverse</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs126', 443)" onmouseover="showTip(event, 'fs126', 443)" class="id">restrictedInvestmentUniverse</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs121', 444)" onmouseover="showTip(event, 'fs121', 444)" class="id">investmentUniverse</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 445)" onmouseover="showTip(event, 'fs120', 445)" class="fn">restrictUniverse</span>

<span class="c">// See if we&#39;re excluding some securities.</span>
<span onmouseout="hideTip(event, 'fs121', 446)" onmouseover="showTip(event, 'fs121', 446)" class="id">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs124', 447)" onmouseover="showTip(event, 'fs124', 447)" class="prop">Securities</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 448)" onmouseover="showTip(event, 'fs82', 448)" class="id">Length</span>
<span onmouseout="hideTip(event, 'fs126', 449)" onmouseover="showTip(event, 'fs126', 449)" class="id">restrictedInvestmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs124', 450)" onmouseover="showTip(event, 'fs124', 450)" class="prop">Securities</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs82', 451)" onmouseover="showTip(event, 'fs82', 451)" class="id">Length</span>
</code></pre>
<h2><a name="Momentum-signals-for-our-investment-universe" class="anchor" href="#Momentum-signals-for-our-investment-universe">Momentum signals for our investment universe</a></h2>
<p>Let's look at how to transform our array of securities in our investment
universe into an array with the signals.</p>
<p>Recall that our momentum function returns a type of observation specific to momentum.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs96', 473)" onmouseover="showTip(event, 'fs96', 473)" class="fn">getMomentumSignalAny</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 474)" onmouseover="showTip(event, 'fs57', 474)" class="uc">Permno</span> <span class="n">84788</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 475)" onmouseover="showTip(event, 'fs14', 475)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> 
</code></pre>
<p>This is fine, but if we want our code to work with any type of signal,
then we need to transform it into something more generic.</p>
<p>This is the purpose of the <code>SecuritySignal</code> record in the <code>Portfolio</code> module.
It's the same thing that we had in the simpler portfolio formation example.
It can represent any signal that is a float.
And to hold an array of security signals for a particular month,
we now have the type <code>SecuritiesWithSignals</code> also from the <code>Portfolio</code> module.</p>
<p>Let's write a function that transforms our momentum signal into a more generic
security signal.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs127', 455)" onmouseover="showTip(event, 'fs127', 455)" class="fn">getMomentumSecuritySignal</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 456)" onmouseover="showTip(event, 'fs75', 456)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 457)" onmouseover="showTip(event, 'fs64', 457)" class="fn">formationMonth</span> <span class="pn">)</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs96', 458)" onmouseover="showTip(event, 'fs96', 458)" class="fn">getMomentumSignalAny</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 459)" onmouseover="showTip(event, 'fs75', 459)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 460)" onmouseover="showTip(event, 'fs64', 460)" class="fn">formationMonth</span><span class="pn">)</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 461)" onmouseover="showTip(event, 'fs80', 461)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs80', 462)" onmouseover="showTip(event, 'fs80', 462)" class="uc">None</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 463)" onmouseover="showTip(event, 'fs81', 463)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs128', 464)" onmouseover="showTip(event, 'fs128', 464)" class="fn">signalOb</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs129', 465)" onmouseover="showTip(event, 'fs129', 465)" class="fn">signal</span> <span class="o">=</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs37', 466)" onmouseover="showTip(event, 'fs37', 466)" class="prop">SecurityId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs75', 467)" onmouseover="showTip(event, 'fs75', 467)" class="fn">security</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs130', 468)" onmouseover="showTip(event, 'fs130', 468)" class="prop">Signal</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs128', 469)" onmouseover="showTip(event, 'fs128', 469)" class="fn">signalOb</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs131', 470)" onmouseover="showTip(event, 'fs131', 470)" class="id">Retm12m2</span> <span class="pn">}</span>
        <span onmouseout="hideTip(event, 'fs81', 471)" onmouseover="showTip(event, 'fs81', 471)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs129', 472)" onmouseover="showTip(event, 'fs129', 472)" class="fn">signal</span>
</code></pre>
<p>Now compare</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs96', 473)" onmouseover="showTip(event, 'fs96', 473)" class="fn">getMomentumSignalAny</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 474)" onmouseover="showTip(event, 'fs57', 474)" class="uc">Permno</span> <span class="n">84788</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 475)" onmouseover="showTip(event, 'fs14', 475)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> 
</code></pre>
<p>to</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs127', 476)" onmouseover="showTip(event, 'fs127', 476)" class="fn">getMomentumSecuritySignal</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs57', 477)" onmouseover="showTip(event, 'fs57', 477)" class="uc">Permno</span> <span class="n">84788</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 478)" onmouseover="showTip(event, 'fs14', 478)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
</code></pre>
<p>Now a function that takes our investment universe and returns
our securities with their (now more generic) signal.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs132', 479)" onmouseover="showTip(event, 'fs132', 479)" class="fn">getMomentumSignals</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs121', 480)" onmouseover="showTip(event, 'fs121', 480)" class="fn">investmentUniverse</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs122', 481)" onmouseover="showTip(event, 'fs122', 481)" class="rt">InvestmentUniverse</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs133', 482)" onmouseover="showTip(event, 'fs133', 482)" class="fn">arrayOfSecuritySignals</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs121', 483)" onmouseover="showTip(event, 'fs121', 483)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs124', 484)" onmouseover="showTip(event, 'fs124', 484)" class="id">Securities</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 485)" onmouseover="showTip(event, 'fs47', 485)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 486)" onmouseover="showTip(event, 'fs65', 486)" class="id">choose</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs75', 487)" onmouseover="showTip(event, 'fs75', 487)" class="fn">security</span> <span class="k">-&gt;</span> 
            <span onmouseout="hideTip(event, 'fs127', 488)" onmouseover="showTip(event, 'fs127', 488)" class="fn">getMomentumSecuritySignal</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 489)" onmouseover="showTip(event, 'fs75', 489)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs121', 490)" onmouseover="showTip(event, 'fs121', 490)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs125', 491)" onmouseover="showTip(event, 'fs125', 491)" class="id">FormationMonth</span><span class="pn">)</span><span class="pn">)</span>    
    <span class="pn">{</span> <span class="prop">FormationMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 492)" onmouseover="showTip(event, 'fs121', 492)" class="fn">investmentUniverse</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs125', 493)" onmouseover="showTip(event, 'fs125', 493)" class="id">FormationMonth</span> 
      <span class="prop">Signals</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs133', 494)" onmouseover="showTip(event, 'fs133', 494)" class="fn">arrayOfSecuritySignals</span> <span class="pn">}</span>

<span onmouseout="hideTip(event, 'fs126', 495)" onmouseover="showTip(event, 'fs126', 495)" class="id">restrictedInvestmentUniverse</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs132', 496)" onmouseover="showTip(event, 'fs132', 496)" class="fn">getMomentumSignals</span>
</code></pre>
<p>or, if we want to look at the full pipeline.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs14', 497)" onmouseover="showTip(event, 'fs14', 497)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2015</span><span class="pn">,</span><span class="n">7</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 498)" onmouseover="showTip(event, 'fs104', 498)" class="fn">getInvestmentUniverse</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 499)" onmouseover="showTip(event, 'fs120', 499)" class="fn">restrictUniverse</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs132', 500)" onmouseover="showTip(event, 'fs132', 500)" class="fn">getMomentumSignals</span>
</code></pre>
<h2><a name="Assigning-portfolios" class="anchor" href="#Assigning-portfolios">Assigning portfolios</a></h2>
<p>Now that we have the signals for our portfolio,
we can assign portfolios. For many strategies it
is common to use decile sorts. This means that
you sort securities into 10 portfolios based on the signal.
But other numbers of portfolios (tercile = 3, quintile = 5, etc)
are also common.</p>
<p>There's a tradeoff between signal strength and diversification.
More portfolios means that top/bottom portfolios are stronger bets
on the signal. But there are fewer securities,
so they are also less diversified. Often, the trade-off between
a stronger signal vs. less diversificaton balances out.
Specifically, long-short tercile sorts may have a lower return spread
than decile sorts. But since terciles are better diversified,
the tercile and decile shorts are not as different when looking
at sharpe ratios.</p>
<p>The <code>Portfolio</code> module has a function named <code>assignSignalSorts</code>
to form portfolios by sorting securities into <code>n</code> groups.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs134', 501)" onmouseover="showTip(event, 'fs134', 501)" class="id">mom201507</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs14', 502)" onmouseover="showTip(event, 'fs14', 502)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2015</span><span class="pn">,</span><span class="n">7</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 503)" onmouseover="showTip(event, 'fs104', 503)" class="fn">getInvestmentUniverse</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 504)" onmouseover="showTip(event, 'fs120', 504)" class="fn">restrictUniverse</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs132', 505)" onmouseover="showTip(event, 'fs132', 505)" class="fn">getMomentumSignals</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs135', 506)" onmouseover="showTip(event, 'fs135', 506)" class="fn">assignSignalSort</span> <span class="s">&quot;Momentum&quot;</span> <span class="n">10</span>

<span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs136', 507)" onmouseover="showTip(event, 'fs136', 507)" class="fn">port</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs134', 508)" onmouseover="showTip(event, 'fs134', 508)" class="id">mom201507</span> <span class="k">do</span> 
    <span class="s">$&quot;My name is {</span><span onmouseout="hideTip(event, 'fs136', 509)" onmouseover="showTip(event, 'fs136', 509)" class="fn">port</span><span class="pn">.</span><span class="id">PortfolioId</span><span class="s">} and I have {</span><span class="fn">port</span><span class="pn">.</span><span class="prop">Signals</span><span class="pn">.</span><span class="id">Length</span><span class="s">} stocks&quot;</span> <span class="pn">]</span>
</code></pre>
<h2><a name="Calculating-Portfolio-weights" class="anchor" href="#Calculating-Portfolio-weights">Calculating Portfolio weights</a></h2>
<p>We'll use a value-weight scheme. So we need a function that gets market capitalizations.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs137', 510)" onmouseover="showTip(event, 'fs137', 510)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 511)" onmouseover="showTip(event, 'fs75', 511)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 512)" onmouseover="showTip(event, 'fs64', 512)" class="fn">formationMonth</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 513)" onmouseover="showTip(event, 'fs59', 513)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 514)" onmouseover="showTip(event, 'fs68', 514)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 515)" onmouseover="showTip(event, 'fs75', 515)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 516)" onmouseover="showTip(event, 'fs64', 516)" class="fn">formationMonth</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs83', 517)" onmouseover="showTip(event, 'fs83', 517)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 518)" onmouseover="showTip(event, 'fs80', 518)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs80', 519)" onmouseover="showTip(event, 'fs80', 519)" class="uc">None</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 520)" onmouseover="showTip(event, 'fs81', 520)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs49', 521)" onmouseover="showTip(event, 'fs49', 521)" class="fn">x</span> <span class="k">-&gt;</span> 
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs49', 522)" onmouseover="showTip(event, 'fs49', 522)" class="fn">x</span><span class="pn">.</span><span class="id">Prc</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 523)" onmouseover="showTip(event, 'fs49', 523)" class="fn">x</span><span class="pn">.</span><span class="id">Shrout</span> <span class="k">with</span> 
        <span class="c">// we need valid price and valid shrout to get market caps</span>
        <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 524)" onmouseover="showTip(event, 'fs81', 524)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs138', 525)" onmouseover="showTip(event, 'fs138', 525)" class="fn">prc</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs81', 526)" onmouseover="showTip(event, 'fs81', 526)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs139', 527)" onmouseover="showTip(event, 'fs139', 527)" class="fn">shrout</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 528)" onmouseover="showTip(event, 'fs81', 528)" class="uc">Some</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 529)" onmouseover="showTip(event, 'fs75', 529)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs138', 530)" onmouseover="showTip(event, 'fs138', 530)" class="fn">prc</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs139', 531)" onmouseover="showTip(event, 'fs139', 531)" class="fn">shrout</span><span class="pn">)</span>
        <span class="c">// anything else and we can&#39;t calculate it</span>
        <span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs80', 532)" onmouseover="showTip(event, 'fs80', 532)" class="uc">None</span>
</code></pre>
<p>Some examples.</p>
<p>Amazon market cap:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs137', 533)" onmouseover="showTip(event, 'fs137', 533)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 534)" onmouseover="showTip(event, 'fs60', 534)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 535)" onmouseover="showTip(event, 'fs14', 535)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
</code></pre>
<p>Amazon future market cap, returns none:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs137', 536)" onmouseover="showTip(event, 'fs137', 536)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 537)" onmouseover="showTip(event, 'fs60', 537)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 538)" onmouseover="showTip(event, 'fs14', 538)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2030</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
</code></pre>
<p>Now for a list of securities:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span onmouseout="hideTip(event, 'fs137', 539)" onmouseover="showTip(event, 'fs137', 539)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 540)" onmouseover="showTip(event, 'fs60', 540)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 541)" onmouseover="showTip(event, 'fs14', 541)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
  <span onmouseout="hideTip(event, 'fs137', 542)" onmouseover="showTip(event, 'fs137', 542)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 543)" onmouseover="showTip(event, 'fs93', 543)" class="id">hogPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 544)" onmouseover="showTip(event, 'fs14', 544)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">]</span>
</code></pre>
<p>Using List.choose will unwrap the option type.</p>
<p>Compare this</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span onmouseout="hideTip(event, 'fs137', 545)" onmouseover="showTip(event, 'fs137', 545)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 546)" onmouseover="showTip(event, 'fs60', 546)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 547)" onmouseover="showTip(event, 'fs14', 547)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
  <span onmouseout="hideTip(event, 'fs80', 548)" onmouseover="showTip(event, 'fs80', 548)" class="uc">None</span>
  <span onmouseout="hideTip(event, 'fs137', 549)" onmouseover="showTip(event, 'fs137', 549)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 550)" onmouseover="showTip(event, 'fs93', 550)" class="id">hogPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 551)" onmouseover="showTip(event, 'fs14', 551)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">]</span>
</code></pre>
<p>to this</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span onmouseout="hideTip(event, 'fs137', 552)" onmouseover="showTip(event, 'fs137', 552)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 553)" onmouseover="showTip(event, 'fs60', 553)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 554)" onmouseover="showTip(event, 'fs14', 554)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
  <span onmouseout="hideTip(event, 'fs80', 555)" onmouseover="showTip(event, 'fs80', 555)" class="uc">None</span>
  <span onmouseout="hideTip(event, 'fs137', 556)" onmouseover="showTip(event, 'fs137', 556)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 557)" onmouseover="showTip(event, 'fs93', 557)" class="id">hogPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 558)" onmouseover="showTip(event, 'fs14', 558)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">]</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 559)" onmouseover="showTip(event, 'fs47', 559)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 560)" onmouseover="showTip(event, 'fs65', 560)" class="id">choose</span> <span onmouseout="hideTip(event, 'fs140', 561)" onmouseover="showTip(event, 'fs140', 561)" class="fn">id</span> <span class="c">// id is a special build-in function: `let id x = x`</span>
</code></pre>
<p>Assign our example capitalizations to a value</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs141', 562)" onmouseover="showTip(event, 'fs141', 562)" class="id">exampleCapitalizations</span> <span class="o">=</span>
    <span class="pn">[</span> <span onmouseout="hideTip(event, 'fs137', 563)" onmouseover="showTip(event, 'fs137', 563)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 564)" onmouseover="showTip(event, 'fs60', 564)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 565)" onmouseover="showTip(event, 'fs14', 565)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>
      <span onmouseout="hideTip(event, 'fs137', 566)" onmouseover="showTip(event, 'fs137', 566)" class="fn">getMarketCap</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 567)" onmouseover="showTip(event, 'fs93', 567)" class="id">hogPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 568)" onmouseover="showTip(event, 'fs14', 568)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 569)" onmouseover="showTip(event, 'fs47', 569)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 570)" onmouseover="showTip(event, 'fs65', 570)" class="id">choose</span> <span onmouseout="hideTip(event, 'fs140', 571)" onmouseover="showTip(event, 'fs140', 571)" class="fn">id</span> 

<span onmouseout="hideTip(event, 'fs141', 572)" onmouseover="showTip(event, 'fs141', 572)" class="id">exampleCapitalizations</span>
</code></pre>
<p>Now the value weights</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs142', 573)" onmouseover="showTip(event, 'fs142', 573)" class="id">exampleValueWeights</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs143', 574)" onmouseover="showTip(event, 'fs143', 574)" class="fn">tot</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs141', 575)" onmouseover="showTip(event, 'fs141', 575)" class="id">exampleCapitalizations</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 576)" onmouseover="showTip(event, 'fs47', 576)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs144', 577)" onmouseover="showTip(event, 'fs144', 577)" class="id">sumBy</span> <span onmouseout="hideTip(event, 'fs145', 578)" onmouseover="showTip(event, 'fs145', 578)" class="fn">snd</span>
    <span onmouseout="hideTip(event, 'fs141', 579)" onmouseover="showTip(event, 'fs141', 579)" class="id">exampleCapitalizations</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 580)" onmouseover="showTip(event, 'fs47', 580)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 581)" onmouseover="showTip(event, 'fs51', 581)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs146', 582)" onmouseover="showTip(event, 'fs146', 582)" class="id">_id</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs147', 583)" onmouseover="showTip(event, 'fs147', 583)" class="fn">cap</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs147', 584)" onmouseover="showTip(event, 'fs147', 584)" class="fn">cap</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs143', 585)" onmouseover="showTip(event, 'fs143', 585)" class="fn">tot</span> <span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 586)" onmouseover="showTip(event, 'fs47', 586)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs148', 587)" onmouseover="showTip(event, 'fs148', 587)" class="id">sortDescending</span>

<span onmouseout="hideTip(event, 'fs142', 588)" onmouseover="showTip(event, 'fs142', 588)" class="id">exampleValueWeights</span>
</code></pre>
<p>Now imagining we have the same example in terms of an assigned portfolio
with made up signals.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs149', 589)" onmouseover="showTip(event, 'fs149', 589)" class="id">mktCapExPort</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs150', 590)" onmouseover="showTip(event, 'fs150', 590)" class="rt">AssignedPortfolio</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs151', 591)" onmouseover="showTip(event, 'fs151', 591)" class="fn">signals</span> <span class="o">=</span>
        <span class="pn">[</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs37', 592)" onmouseover="showTip(event, 'fs37', 592)" class="prop">SecurityId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 593)" onmouseover="showTip(event, 'fs60', 593)" class="id">amznPermno</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs130', 594)" onmouseover="showTip(event, 'fs130', 594)" class="prop">Signal</span> <span class="o">=</span> <span class="n">1.0</span> <span class="pn">}</span>
          <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs37', 595)" onmouseover="showTip(event, 'fs37', 595)" class="prop">SecurityId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs93', 596)" onmouseover="showTip(event, 'fs93', 596)" class="id">hogPermno</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs130', 597)" onmouseover="showTip(event, 'fs130', 597)" class="prop">Signal</span> <span class="o">=</span> <span class="n">1.0</span> <span class="pn">}</span> <span class="pn">]</span>  
    <span class="pn">{</span> <span class="id">PortfolioId</span> <span class="o">=</span> <span class="id">Named</span> <span class="s">&quot;Mkt Cap Example&quot;</span>
      <span class="prop">FormationMonth</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 598)" onmouseover="showTip(event, 'fs14', 598)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
      <span class="prop">Signals</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs151', 599)" onmouseover="showTip(event, 'fs151', 599)" class="fn">signals</span> <span class="pn">}</span>
</code></pre>
<p>The portfolio module has a function that can help us.
It has two inputs.</p>
<ul>
<li>A function that gets market capitalizations</li>
<li>An assigned portfolio</li>
</ul>
<p>We should see that it gives the same value weights.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs152', 600)" onmouseover="showTip(event, 'fs152', 600)" class="id">exampleValueWeights2</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs153', 601)" onmouseover="showTip(event, 'fs153', 601)" class="fn">giveValueWeights</span> <span onmouseout="hideTip(event, 'fs137', 602)" onmouseover="showTip(event, 'fs137', 602)" class="fn">getMarketCap</span> <span onmouseout="hideTip(event, 'fs149', 603)" onmouseover="showTip(event, 'fs149', 603)" class="id">mktCapExPort</span>

<span onmouseout="hideTip(event, 'fs152', 604)" onmouseover="showTip(event, 'fs152', 604)" class="id">exampleValueWeights2</span>
</code></pre>
<p>It can be more convenient to "bake in" my function to get market caps:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs154', 605)" onmouseover="showTip(event, 'fs154', 605)" class="fn">myValueWeights</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs153', 606)" onmouseover="showTip(event, 'fs153', 606)" class="fn">giveValueWeights</span> <span onmouseout="hideTip(event, 'fs137', 607)" onmouseover="showTip(event, 'fs137', 607)" class="fn">getMarketCap</span>

<span onmouseout="hideTip(event, 'fs154', 608)" onmouseover="showTip(event, 'fs154', 608)" class="fn">myValueWeights</span> <span onmouseout="hideTip(event, 'fs149', 609)" onmouseover="showTip(event, 'fs149', 609)" class="id">mktCapExPort</span>
</code></pre>
<p>So now we can construct our portfolios with value weights.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs155', 610)" onmouseover="showTip(event, 'fs155', 610)" class="id">portfoliosWithWeights</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs156', 611)" onmouseover="showTip(event, 'fs156', 611)" class="fn">assignedPortfolios</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs14', 612)" onmouseover="showTip(event, 'fs14', 612)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2015</span><span class="pn">,</span><span class="n">7</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 613)" onmouseover="showTip(event, 'fs104', 613)" class="fn">getInvestmentUniverse</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 614)" onmouseover="showTip(event, 'fs120', 614)" class="fn">restrictUniverse</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs132', 615)" onmouseover="showTip(event, 'fs132', 615)" class="fn">getMomentumSignals</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs135', 616)" onmouseover="showTip(event, 'fs135', 616)" class="fn">assignSignalSort</span> <span class="s">&quot;Momentum&quot;</span> <span class="n">10</span>

    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs157', 617)" onmouseover="showTip(event, 'fs157', 617)" class="fn">portfolio</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs156', 618)" onmouseover="showTip(event, 'fs156', 618)" class="fn">assignedPortfolios</span> <span class="k">do</span>
        <span onmouseout="hideTip(event, 'fs154', 619)" onmouseover="showTip(event, 'fs154', 619)" class="fn">myValueWeights</span> <span onmouseout="hideTip(event, 'fs157', 620)" onmouseover="showTip(event, 'fs157', 620)" class="fn">portfolio</span> <span class="pn">]</span>
</code></pre>
<p>Note that because of the size distribution,
some of these portfolios are not very diversified.
This is illustrated by inspecting maximum portfolio
weights.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs158', 621)" onmouseover="showTip(event, 'fs158', 621)" class="fn">port</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs155', 622)" onmouseover="showTip(event, 'fs155', 622)" class="id">portfoliosWithWeights</span> <span class="k">do</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs159', 623)" onmouseover="showTip(event, 'fs159', 623)" class="fn">maxWeight</span> <span class="o">=</span> 
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs160', 624)" onmouseover="showTip(event, 'fs160', 624)" class="fn">position</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs158', 625)" onmouseover="showTip(event, 'fs158', 625)" class="fn">port</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs161', 626)" onmouseover="showTip(event, 'fs161', 626)" class="id">Positions</span> <span class="k">do</span> 
            <span onmouseout="hideTip(event, 'fs160', 627)" onmouseover="showTip(event, 'fs160', 627)" class="fn">position</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs162', 628)" onmouseover="showTip(event, 'fs162', 628)" class="id">Weight</span> <span class="pn">]</span> 
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 629)" onmouseover="showTip(event, 'fs47', 629)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs163', 630)" onmouseover="showTip(event, 'fs163', 630)" class="id">max</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs164', 631)" onmouseover="showTip(event, 'fs164', 631)" class="fn">totalWeights</span> <span class="o">=</span>
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs160', 632)" onmouseover="showTip(event, 'fs160', 632)" class="fn">position</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs158', 633)" onmouseover="showTip(event, 'fs158', 633)" class="fn">port</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs161', 634)" onmouseover="showTip(event, 'fs161', 634)" class="id">Positions</span> <span class="k">do</span> 
            <span onmouseout="hideTip(event, 'fs160', 635)" onmouseover="showTip(event, 'fs160', 635)" class="fn">position</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs162', 636)" onmouseover="showTip(event, 'fs162', 636)" class="id">Weight</span> <span class="pn">]</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 637)" onmouseover="showTip(event, 'fs47', 637)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs165', 638)" onmouseover="showTip(event, 'fs165', 638)" class="id">sum</span>    
    <span onmouseout="hideTip(event, 'fs158', 639)" onmouseover="showTip(event, 'fs158', 639)" class="fn">port</span><span class="pn">.</span><span class="id">PortfolioId</span><span class="pn">.</span><span class="id">ToString</span><span class="pn">(</span><span class="pn">)</span> <span class="pn">,</span> <span onmouseout="hideTip(event, 'fs159', 640)" onmouseover="showTip(event, 'fs159', 640)" class="fn">maxWeight</span> <span class="pn">]</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 641)" onmouseover="showTip(event, 'fs166', 641)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs167', 642)" onmouseover="showTip(event, 'fs167', 642)" class="id">Bar</span>
</code></pre>
<h2><a name="Calculating-Portfolio-returns" class="anchor" href="#Calculating-Portfolio-returns">Calculating Portfolio returns</a></h2>
<p>We need our function to get returns given weights.</p>
<p>We can start with a function that gets returns.
It looks a lot like our function to get market capitalizations.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs168', 643)" onmouseover="showTip(event, 'fs168', 643)" class="fn">getSecurityReturn</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 644)" onmouseover="showTip(event, 'fs75', 644)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 645)" onmouseover="showTip(event, 'fs64', 645)" class="fn">formationMonth</span><span class="pn">)</span> <span class="o">=</span>
    <span class="c">// If the security has a missing return, assume that we got 0.0.</span>
    <span class="c">// Note: If we were doing excess returns, we&#39;d need 0.0 - rf</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs169', 646)" onmouseover="showTip(event, 'fs169', 646)" class="fn">missingReturn</span> <span class="o">=</span> <span class="n">0.0</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs59', 647)" onmouseover="showTip(event, 'fs59', 647)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 648)" onmouseover="showTip(event, 'fs68', 648)" class="id">tryFind</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs75', 649)" onmouseover="showTip(event, 'fs75', 649)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs64', 650)" onmouseover="showTip(event, 'fs64', 650)" class="fn">formationMonth</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs83', 651)" onmouseover="showTip(event, 'fs83', 651)" class="id">msfByPermnoMonth</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 652)" onmouseover="showTip(event, 'fs80', 652)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs75', 653)" onmouseover="showTip(event, 'fs75', 653)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs169', 654)" onmouseover="showTip(event, 'fs169', 654)" class="fn">missingReturn</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 655)" onmouseover="showTip(event, 'fs81', 655)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs49', 656)" onmouseover="showTip(event, 'fs49', 656)" class="fn">x</span> <span class="k">-&gt;</span>  
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs49', 657)" onmouseover="showTip(event, 'fs49', 657)" class="fn">x</span><span class="pn">.</span><span class="id">Ret</span> <span class="k">with</span> 
        <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs80', 658)" onmouseover="showTip(event, 'fs80', 658)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs75', 659)" onmouseover="showTip(event, 'fs75', 659)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs169', 660)" onmouseover="showTip(event, 'fs169', 660)" class="fn">missingReturn</span>
        <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs81', 661)" onmouseover="showTip(event, 'fs81', 661)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs72', 662)" onmouseover="showTip(event, 'fs72', 662)" class="fn">r</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs75', 663)" onmouseover="showTip(event, 'fs75', 663)" class="fn">security</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs72', 664)" onmouseover="showTip(event, 'fs72', 664)" class="fn">r</span>

<span onmouseout="hideTip(event, 'fs168', 665)" onmouseover="showTip(event, 'fs168', 665)" class="fn">getSecurityReturn</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 666)" onmouseover="showTip(event, 'fs60', 666)" class="id">amznPermno</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 667)" onmouseover="showTip(event, 'fs14', 667)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span>        

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs170', 668)" onmouseover="showTip(event, 'fs170', 668)" class="id">portReturn</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs171', 669)" onmouseover="showTip(event, 'fs171', 669)" class="fn">getPortfolioReturn</span> <span onmouseout="hideTip(event, 'fs168', 670)" onmouseover="showTip(event, 'fs168', 670)" class="fn">getSecurityReturn</span> <span onmouseout="hideTip(event, 'fs152', 671)" onmouseover="showTip(event, 'fs152', 671)" class="id">exampleValueWeights2</span>

<span onmouseout="hideTip(event, 'fs155', 672)" onmouseover="showTip(event, 'fs155', 672)" class="id">portfoliosWithWeights</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 673)" onmouseover="showTip(event, 'fs47', 673)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 674)" onmouseover="showTip(event, 'fs51', 674)" class="id">map</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs171', 675)" onmouseover="showTip(event, 'fs171', 675)" class="fn">getPortfolioReturn</span> <span onmouseout="hideTip(event, 'fs168', 676)" onmouseover="showTip(event, 'fs168', 676)" class="fn">getSecurityReturn</span><span class="pn">)</span>    
</code></pre>
<p>baking in the getSecurityReturn function</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs172', 677)" onmouseover="showTip(event, 'fs172', 677)" class="fn">myPortfolioReturns</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs171', 678)" onmouseover="showTip(event, 'fs171', 678)" class="fn">getPortfolioReturn</span> <span onmouseout="hideTip(event, 'fs168', 679)" onmouseover="showTip(event, 'fs168', 679)" class="fn">getSecurityReturn</span>

<span onmouseout="hideTip(event, 'fs155', 680)" onmouseover="showTip(event, 'fs155', 680)" class="id">portfoliosWithWeights</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 681)" onmouseover="showTip(event, 'fs47', 681)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 682)" onmouseover="showTip(event, 'fs51', 682)" class="id">map</span> <span onmouseout="hideTip(event, 'fs172', 683)" onmouseover="showTip(event, 'fs172', 683)" class="fn">myPortfolioReturns</span>


<span class="c">// Put it all together.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs173', 684)" onmouseover="showTip(event, 'fs173', 684)" class="id">sampleMonths</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs174', 685)" onmouseover="showTip(event, 'fs174', 685)" class="fn">getSampleMonths</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs14', 686)" onmouseover="showTip(event, 'fs14', 686)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2010</span><span class="pn">,</span><span class="n">5</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs14', 687)" onmouseover="showTip(event, 'fs14', 687)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2020</span><span class="pn">,</span><span class="n">2</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">)</span> 

<span onmouseout="hideTip(event, 'fs173', 688)" onmouseover="showTip(event, 'fs173', 688)" class="id">sampleMonths</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 689)" onmouseover="showTip(event, 'fs47', 689)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs175', 690)" onmouseover="showTip(event, 'fs175', 690)" class="id">rev</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 691)" onmouseover="showTip(event, 'fs47', 691)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs176', 692)" onmouseover="showTip(event, 'fs176', 692)" class="id">take</span> <span class="n">3</span>
</code></pre>
<p>These two functions below produce the same result. The first assigns each function
result to an intermediate value. The second uses a pipeline.
Either style is fine, though while I may start with something like the first
version while writing test code, I typically use the pipeline
style shown in in the second version.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs177', 693)" onmouseover="showTip(event, 'fs177', 693)" class="fn">formMomtenumPortWithAssignments</span> <span onmouseout="hideTip(event, 'fs52', 694)" onmouseover="showTip(event, 'fs52', 694)" class="fn">ym</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs178', 695)" onmouseover="showTip(event, 'fs178', 695)" class="fn">universe</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs104', 696)" onmouseover="showTip(event, 'fs104', 696)" class="fn">getInvestmentUniverse</span> <span onmouseout="hideTip(event, 'fs52', 697)" onmouseover="showTip(event, 'fs52', 697)" class="fn">ym</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs179', 698)" onmouseover="showTip(event, 'fs179', 698)" class="fn">restricted</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs120', 699)" onmouseover="showTip(event, 'fs120', 699)" class="fn">restrictUniverse</span> <span onmouseout="hideTip(event, 'fs178', 700)" onmouseover="showTip(event, 'fs178', 700)" class="fn">universe</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs180', 701)" onmouseover="showTip(event, 'fs180', 701)" class="fn">signals</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs132', 702)" onmouseover="showTip(event, 'fs132', 702)" class="fn">getMomentumSignals</span> <span onmouseout="hideTip(event, 'fs179', 703)" onmouseover="showTip(event, 'fs179', 703)" class="fn">restricted</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs156', 704)" onmouseover="showTip(event, 'fs156', 704)" class="fn">assignedPortfolios</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs135', 705)" onmouseover="showTip(event, 'fs135', 705)" class="fn">assignSignalSort</span> <span class="s">&quot;Momentum&quot;</span> <span class="n">10</span> <span onmouseout="hideTip(event, 'fs180', 706)" onmouseover="showTip(event, 'fs180', 706)" class="fn">signals</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs155', 707)" onmouseover="showTip(event, 'fs155', 707)" class="fn">portfoliosWithWeights</span> <span class="o">=</span>
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs157', 708)" onmouseover="showTip(event, 'fs157', 708)" class="fn">portfolio</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs156', 709)" onmouseover="showTip(event, 'fs156', 709)" class="fn">assignedPortfolios</span> <span class="k">do</span>
            <span onmouseout="hideTip(event, 'fs154', 710)" onmouseover="showTip(event, 'fs154', 710)" class="fn">myValueWeights</span> <span onmouseout="hideTip(event, 'fs157', 711)" onmouseover="showTip(event, 'fs157', 711)" class="fn">portfolio</span> <span class="pn">]</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs181', 712)" onmouseover="showTip(event, 'fs181', 712)" class="fn">portfolioReturns</span> <span class="o">=</span>
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs182', 713)" onmouseover="showTip(event, 'fs182', 713)" class="fn">portfolio</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs155', 714)" onmouseover="showTip(event, 'fs155', 714)" class="fn">portfoliosWithWeights</span> <span class="k">do</span>
            <span onmouseout="hideTip(event, 'fs172', 715)" onmouseover="showTip(event, 'fs172', 715)" class="fn">myPortfolioReturns</span> <span onmouseout="hideTip(event, 'fs182', 716)" onmouseover="showTip(event, 'fs182', 716)" class="fn">portfolio</span> <span class="pn">]</span>
    <span onmouseout="hideTip(event, 'fs181', 717)" onmouseover="showTip(event, 'fs181', 717)" class="fn">portfolioReturns</span>


<span class="k">let</span> <span onmouseout="hideTip(event, 'fs183', 718)" onmouseover="showTip(event, 'fs183', 718)" class="fn">formMomentumPort</span> <span onmouseout="hideTip(event, 'fs52', 719)" onmouseover="showTip(event, 'fs52', 719)" class="fn">ym</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs52', 720)" onmouseover="showTip(event, 'fs52', 720)" class="fn">ym</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs104', 721)" onmouseover="showTip(event, 'fs104', 721)" class="fn">getInvestmentUniverse</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs120', 722)" onmouseover="showTip(event, 'fs120', 722)" class="fn">restrictUniverse</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs132', 723)" onmouseover="showTip(event, 'fs132', 723)" class="fn">getMomentumSignals</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs135', 724)" onmouseover="showTip(event, 'fs135', 724)" class="fn">assignSignalSort</span> <span class="s">&quot;Momentum&quot;</span> <span class="n">10</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 725)" onmouseover="showTip(event, 'fs47', 725)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 726)" onmouseover="showTip(event, 'fs51', 726)" class="id">map</span> <span onmouseout="hideTip(event, 'fs154', 727)" onmouseover="showTip(event, 'fs154', 727)" class="fn">myValueWeights</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 728)" onmouseover="showTip(event, 'fs47', 728)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 729)" onmouseover="showTip(event, 'fs51', 729)" class="id">map</span> <span onmouseout="hideTip(event, 'fs172', 730)" onmouseover="showTip(event, 'fs172', 730)" class="fn">myPortfolioReturns</span>
</code></pre>
<p>We can process months sequentially.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs184', 731)" onmouseover="showTip(event, 'fs184', 731)" class="id">momentumPortsSequential</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs173', 732)" onmouseover="showTip(event, 'fs173', 732)" class="id">sampleMonths</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 733)" onmouseover="showTip(event, 'fs47', 733)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs185', 734)" onmouseover="showTip(event, 'fs185', 734)" class="id">collect</span> <span onmouseout="hideTip(event, 'fs183', 735)" onmouseover="showTip(event, 'fs183', 735)" class="fn">formMomentumPort</span>
</code></pre>
<p>Or we can speed things up and process months in Parallel using
all available CPU cores. Note that the only changes are to</p>
<ol>
<li>
Use <code>Array.Parallel.collect</code> intead of 
<code>List.collect</code>. The array collection is the only parallel
collection in base F# and the module functions are somewhat limited,
but if you google F# parallel processing
you can find other options and also asynchronous coding and PSeq
(I mostly use PSeq for my parallel code).
</li>
<li>
<code>Array.Parallel.collect</code> expects to operate on arrays, so 
we need to have our portfolio returned as arrays instead of lists.
This is what we are doing with <code>formMomentumPortArray</code>.
</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs186', 736)" onmouseover="showTip(event, 'fs186', 736)" class="fn">formMomentumPortArray</span> <span onmouseout="hideTip(event, 'fs52', 737)" onmouseover="showTip(event, 'fs52', 737)" class="fn">ym</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs52', 738)" onmouseover="showTip(event, 'fs52', 738)" class="fn">ym</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs183', 739)" onmouseover="showTip(event, 'fs183', 739)" class="fn">formMomentumPort</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 740)" onmouseover="showTip(event, 'fs47', 740)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs187', 741)" onmouseover="showTip(event, 'fs187', 741)" class="id">toArray</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs188', 742)" onmouseover="showTip(event, 'fs188', 742)" class="id">momentumPortsParallel</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs173', 743)" onmouseover="showTip(event, 'fs173', 743)" class="id">sampleMonths</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 744)" onmouseover="showTip(event, 'fs47', 744)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs187', 745)" onmouseover="showTip(event, 'fs187', 745)" class="id">toArray</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs189', 746)" onmouseover="showTip(event, 'fs189', 746)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs190', 747)" onmouseover="showTip(event, 'fs190', 747)" class="m">Parallel</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs191', 748)" onmouseover="showTip(event, 'fs191', 748)" class="id">collect</span> <span onmouseout="hideTip(event, 'fs186', 749)" onmouseover="showTip(event, 'fs186', 749)" class="fn">formMomentumPortArray</span> 
</code></pre>
<h2><a name="Plotting-returns" class="anchor" href="#Plotting-returns">Plotting returns</a></h2>
<p>Let's look at the cumulative returns of the portfolios.</p>
<p>To start, get the top momentum portfolio.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs192', 750)" onmouseover="showTip(event, 'fs192', 750)" class="id">mom10</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs184', 751)" onmouseover="showTip(event, 'fs184', 751)" class="id">momentumPortsSequential</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 752)" onmouseover="showTip(event, 'fs47', 752)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 753)" onmouseover="showTip(event, 'fs48', 753)" class="id">filter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs193', 754)" onmouseover="showTip(event, 'fs193', 754)" class="fn">p</span> <span class="k">-&gt;</span> 
        <span onmouseout="hideTip(event, 'fs193', 755)" onmouseover="showTip(event, 'fs193', 755)" class="fn">p</span><span class="pn">.</span><span class="id">PortfolioId</span> <span class="o">=</span> <span class="id">Indexed</span> <span class="pn">{|</span> <span onmouseout="hideTip(event, 'fs194', 756)" onmouseover="showTip(event, 'fs194', 756)" class="id">Index</span> <span class="o">=</span> <span class="n">10</span><span class="pn">;</span> <span class="id">Name</span> <span class="o">=</span> <span class="s">&quot;Momentum&quot;</span> <span class="pn">|}</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 757)" onmouseover="showTip(event, 'fs47', 757)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs195', 758)" onmouseover="showTip(event, 'fs195', 758)" class="id">sortBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs193', 759)" onmouseover="showTip(event, 'fs193', 759)" class="fn">p</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs193', 760)" onmouseover="showTip(event, 'fs193', 760)" class="fn">p</span><span class="pn">.</span><span class="id">YearMonth</span> <span class="pn">)</span>

<span class="c">// first few months</span>
<span onmouseout="hideTip(event, 'fs192', 761)" onmouseover="showTip(event, 'fs192', 761)" class="id">mom10</span><span class="pn">[</span><span class="n">0..</span><span class="n">3</span><span class="pn">]</span>
</code></pre>
<p>Now calculate returns.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs196', 762)" onmouseover="showTip(event, 'fs196', 762)" class="id">mom10CumulativeReturns</span> <span class="o">=</span>
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs71', 763)" onmouseover="showTip(event, 'fs71', 763)" class="mv">cr</span> <span class="o">=</span> <span class="n">1.0</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs49', 764)" onmouseover="showTip(event, 'fs49', 764)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs192', 765)" onmouseover="showTip(event, 'fs192', 765)" class="id">mom10</span> <span class="k">do</span> 
        <span onmouseout="hideTip(event, 'fs71', 766)" onmouseover="showTip(event, 'fs71', 766)" class="mv">cr</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs71', 767)" onmouseover="showTip(event, 'fs71', 767)" class="mv">cr</span> <span class="o">*</span> <span class="pn">(</span><span class="n">1.0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs49', 768)" onmouseover="showTip(event, 'fs49', 768)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs197', 769)" onmouseover="showTip(event, 'fs197', 769)" class="id">Return</span><span class="pn">)</span>
        <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs49', 770)" onmouseover="showTip(event, 'fs49', 770)" class="fn">x</span> <span class="k">with</span> <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 771)" onmouseover="showTip(event, 'fs71', 771)" class="mv">cr</span> <span class="o">-</span> <span class="n">1.0</span> <span class="pn">}</span> <span class="pn">]</span>
</code></pre>
<p>The first cumulative return is just the first return:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs21', 772)" onmouseover="showTip(event, 'fs21', 772)" class="fn">printfn</span> <span class="s">$&quot;The first return is:            </span><span class="pf">%.4f</span><span class="s">{</span><span onmouseout="hideTip(event, 'fs192', 773)" onmouseover="showTip(event, 'fs192', 773)" class="id">mom10</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span><span class="pn">.</span><span class="id">Return</span><span class="s">}&quot;</span>
<span onmouseout="hideTip(event, 'fs21', 774)" onmouseover="showTip(event, 'fs21', 774)" class="fn">printfn</span> <span class="s">$&quot;The first cumulative return is: </span><span class="pf">%.4f</span><span class="s">{</span><span onmouseout="hideTip(event, 'fs196', 775)" onmouseover="showTip(event, 'fs196', 775)" class="id">mom10CumulativeReturns</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span><span class="pn">.</span><span class="id">Return</span><span class="s">}&quot;</span>
</code></pre>
<p>But subsequently the cumulative returns reflect the running total:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs198', 776)" onmouseover="showTip(event, 'fs198', 776)" class="fn">month</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs196', 777)" onmouseover="showTip(event, 'fs196', 777)" class="id">mom10CumulativeReturns</span> <span class="k">do</span>
    <span onmouseout="hideTip(event, 'fs198', 778)" onmouseover="showTip(event, 'fs198', 778)" class="fn">month</span><span class="pn">.</span><span class="id">YearMonth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs198', 779)" onmouseover="showTip(event, 'fs198', 779)" class="fn">month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs197', 780)" onmouseover="showTip(event, 'fs197', 780)" class="id">Return</span> <span class="pn">]</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 781)" onmouseover="showTip(event, 'fs166', 781)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs199', 782)" onmouseover="showTip(event, 'fs199', 782)" class="id">Line</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 783)" onmouseover="showTip(event, 'fs166', 783)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs200', 784)" onmouseover="showTip(event, 'fs200', 784)" class="id">withTitle</span> <span class="s">&quot;Momentum Portfolio 10&quot;</span>
</code></pre>
<p>We can also plot all 10 portfolios.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs201', 785)" onmouseover="showTip(event, 'fs201', 785)" class="fn">makeCumulativeReturn</span> <span onmouseout="hideTip(event, 'fs202', 786)" onmouseover="showTip(event, 'fs202', 786)" class="fn">portfolioObs</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs203', 787)" onmouseover="showTip(event, 'fs203', 787)" class="fn">sorted</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs202', 788)" onmouseover="showTip(event, 'fs202', 788)" class="fn">portfolioObs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 789)" onmouseover="showTip(event, 'fs47', 789)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs195', 790)" onmouseover="showTip(event, 'fs195', 790)" class="id">sortBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs204', 791)" onmouseover="showTip(event, 'fs204', 791)" class="fn">p</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs204', 792)" onmouseover="showTip(event, 'fs204', 792)" class="fn">p</span><span class="pn">.</span><span class="id">YearMonth</span> <span class="pn">)</span>
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs71', 793)" onmouseover="showTip(event, 'fs71', 793)" class="mv">cr</span> <span class="o">=</span> <span class="n">1.0</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs205', 794)" onmouseover="showTip(event, 'fs205', 794)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs203', 795)" onmouseover="showTip(event, 'fs203', 795)" class="fn">sorted</span> <span class="k">do</span> 
        <span onmouseout="hideTip(event, 'fs71', 796)" onmouseover="showTip(event, 'fs71', 796)" class="mv">cr</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs71', 797)" onmouseover="showTip(event, 'fs71', 797)" class="mv">cr</span> <span class="o">*</span> <span class="pn">(</span><span class="n">1.0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs205', 798)" onmouseover="showTip(event, 'fs205', 798)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs206', 799)" onmouseover="showTip(event, 'fs206', 799)" class="id">Return</span><span class="pn">)</span>
        <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs205', 800)" onmouseover="showTip(event, 'fs205', 800)" class="fn">x</span> <span class="k">with</span> <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 801)" onmouseover="showTip(event, 'fs71', 801)" class="mv">cr</span> <span class="o">-</span> <span class="n">1.0</span> <span class="pn">}</span> <span class="pn">]</span>

<span class="c">// test it</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs207', 802)" onmouseover="showTip(event, 'fs207', 802)" class="id">testMom10</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs201', 803)" onmouseover="showTip(event, 'fs201', 803)" class="fn">makeCumulativeReturn</span> <span onmouseout="hideTip(event, 'fs192', 804)" onmouseover="showTip(event, 'fs192', 804)" class="id">mom10</span>

<span onmouseout="hideTip(event, 'fs207', 805)" onmouseover="showTip(event, 'fs207', 805)" class="id">testMom10</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs196', 806)" onmouseover="showTip(event, 'fs196', 806)" class="id">mom10CumulativeReturns</span> <span class="c">// should evaluate to true</span>
</code></pre>
<p>Now let's use that function to do it for all 10 portfolios.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs208', 807)" onmouseover="showTip(event, 'fs208', 807)" class="id">byPortfolioId</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs184', 808)" onmouseover="showTip(event, 'fs184', 808)" class="id">momentumPortsSequential</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs47', 809)" onmouseover="showTip(event, 'fs47', 809)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs99', 810)" onmouseover="showTip(event, 'fs99', 810)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs193', 811)" onmouseover="showTip(event, 'fs193', 811)" class="fn">p</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs193', 812)" onmouseover="showTip(event, 'fs193', 812)" class="fn">p</span><span class="pn">.</span><span class="id">PortfolioId</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs209', 813)" onmouseover="showTip(event, 'fs209', 813)" class="id">listOfCharts</span> <span class="o">=</span>
    <span class="pn">[</span> <span class="k">for</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs210', 814)" onmouseover="showTip(event, 'fs210', 814)" class="fn">portId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs211', 815)" onmouseover="showTip(event, 'fs211', 815)" class="fn">portObs</span><span class="pn">)</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs208', 816)" onmouseover="showTip(event, 'fs208', 816)" class="id">byPortfolioId</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs212', 817)" onmouseover="showTip(event, 'fs212', 817)" class="fn">cumulativeReturn</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs201', 818)" onmouseover="showTip(event, 'fs201', 818)" class="fn">makeCumulativeReturn</span> <span onmouseout="hideTip(event, 'fs211', 819)" onmouseover="showTip(event, 'fs211', 819)" class="fn">portObs</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs213', 820)" onmouseover="showTip(event, 'fs213', 820)" class="fn">plotData</span> <span class="o">=</span>
            <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs214', 821)" onmouseover="showTip(event, 'fs214', 821)" class="fn">month</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs212', 822)" onmouseover="showTip(event, 'fs212', 822)" class="fn">cumulativeReturn</span> <span class="k">do</span>
                <span onmouseout="hideTip(event, 'fs214', 823)" onmouseover="showTip(event, 'fs214', 823)" class="fn">month</span><span class="pn">.</span><span class="id">YearMonth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs214', 824)" onmouseover="showTip(event, 'fs214', 824)" class="fn">month</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs206', 825)" onmouseover="showTip(event, 'fs206', 825)" class="id">Return</span> <span class="pn">]</span>
        <span onmouseout="hideTip(event, 'fs166', 826)" onmouseover="showTip(event, 'fs166', 826)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs199', 827)" onmouseover="showTip(event, 'fs199', 827)" class="id">Line</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs213', 828)" onmouseover="showTip(event, 'fs213', 828)" class="fn">plotData</span><span class="pn">,</span> <span class="fn">Name</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs210', 829)" onmouseover="showTip(event, 'fs210', 829)" class="fn">portId</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs215', 830)" onmouseover="showTip(event, 'fs215', 830)" class="id">ToString</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">]</span>
</code></pre>
<p>Plot one of them.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs209', 831)" onmouseover="showTip(event, 'fs209', 831)" class="id">listOfCharts</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span>
</code></pre>
<p>Plot all of them.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs209', 832)" onmouseover="showTip(event, 'fs209', 832)" class="id">listOfCharts</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 833)" onmouseover="showTip(event, 'fs166', 833)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs216', 834)" onmouseover="showTip(event, 'fs216', 834)" class="id">combine</span>
</code></pre>

        <div class="fsdocs-tip" id="fs1">namespace System</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs3">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="fsdocs-tip" id="fs4">namespace FSharp.Stats</div>
<div class="fsdocs-tip" id="fs5">namespace Plotly</div>
<div class="fsdocs-tip" id="fs6">namespace Plotly.NET</div>
<div class="fsdocs-tip" id="fs7">namespace NovaSBE</div>
<div class="fsdocs-tip" id="fs8">namespace NovaSBE.Finance</div>
<div class="fsdocs-tip" id="fs9">module Portfolio

from NovaSBE.Finance</div>
<div class="fsdocs-tip" id="fs10">type Environment =
  static member Exit: exitCode: int -&gt; unit
  static member ExpandEnvironmentVariables: name: string -&gt; string
  static member FailFast: message: string -&gt; unit + 1 overload
  static member GetCommandLineArgs: unit -&gt; string array
  static member GetEnvironmentVariable: variable: string -&gt; string + 1 overload
  static member GetEnvironmentVariables: unit -&gt; IDictionary + 1 overload
  static member GetFolderPath: folder: SpecialFolder -&gt; string + 1 overload
  static member GetLogicalDrives: unit -&gt; string array
  static member SetEnvironmentVariable: variable: string * value: string -&gt; unit + 1 overload
  static member CommandLine: string
  ...<br /><em>&lt;summary&gt;Provides information about, and means to manipulate, the current environment and platform. This class cannot be inherited.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs11">property Environment.CurrentDirectory: string with get, set<br /><em>&lt;summary&gt;Gets or sets the fully qualified path of the current working directory.&lt;/summary&gt;<br />&lt;exception cref=&quot;T:System.ArgumentException&quot;&gt;Attempted to set to an empty string (&quot;&quot;).&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Attempted to set to &lt;see langword=&quot;null&quot; /&gt;.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.IO.IOException&quot;&gt;An I/O error occurred.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.IO.DirectoryNotFoundException&quot;&gt;Attempted to set a local path that cannot be found.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.Security.SecurityException&quot;&gt;The caller does not have the appropriate permission.&lt;/exception&gt;<br />&lt;returns&gt;The directory path.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs12">val samplePeriod: x: DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs13">val x: DateTime</div>
<div class="fsdocs-tip" id="fs14">Multiple items<br />[&lt;Struct&gt;]
type DateTime =
  new: year: int * month: int * day: int -&gt; unit + 16 overloads
  member Add: value: TimeSpan -&gt; DateTime
  member AddDays: value: float -&gt; DateTime
  member AddHours: value: float -&gt; DateTime
  member AddMicroseconds: value: float -&gt; DateTime
  member AddMilliseconds: value: float -&gt; DateTime
  member AddMinutes: value: float -&gt; DateTime
  member AddMonths: months: int -&gt; DateTime
  member AddSeconds: value: float -&gt; DateTime
  member AddTicks: value: int64 -&gt; DateTime
  ...<br /><em>&lt;summary&gt;Represents an instant in time, typically expressed as a date and time of day.&lt;/summary&gt;</em><br /><br />--------------------<br />DateTime ()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="fsdocs-tip" id="fs15">Multiple items<br />type LiteralAttribute =
  inherit Attribute
  new: unit -&gt; LiteralAttribute<br /><br />--------------------<br />new: unit -&gt; LiteralAttribute</div>
<div class="fsdocs-tip" id="fs16">[&lt;Literal&gt;]
val ResolutionFolder: string = &quot;D:\a\Teaching\Teaching\docs&quot;</div>
<div class="fsdocs-tip" id="fs17">Multiple items<br />[&lt;Literal&gt;]
val CsvFile: string = &quot;data/msf-momentum.csv&quot;<br /><br />--------------------<br />type CsvFile =
  inherit CsvFile&lt;CsvRow&gt;
  member GetColumnIndex: columnName: string -&gt; int
  member TryGetColumnIndex: columnName: string -&gt; int option
  static member AsyncLoad: uri: string * [&lt;Optional&gt;] ?separators: string * [&lt;Optional&gt;] ?quote: char * [&lt;Optional&gt;] ?hasHeaders: bool * [&lt;Optional&gt;] ?ignoreErrors: bool * [&lt;Optional&gt;] ?skipRows: int * [&lt;Optional&gt;] ?encoding: Encoding -&gt; Async&lt;CsvFile&gt;
  static member Load: stream: Stream * [&lt;Optional&gt;] ?separators: string * [&lt;Optional&gt;] ?quote: char * [&lt;Optional&gt;] ?hasHeaders: bool * [&lt;Optional&gt;] ?ignoreErrors: bool * [&lt;Optional&gt;] ?skipRows: int -&gt; CsvFile + 2 overloads
  static member Parse: text: string * [&lt;Optional&gt;] ?separators: string * [&lt;Optional&gt;] ?quote: char * [&lt;Optional&gt;] ?hasHeaders: bool * [&lt;Optional&gt;] ?ignoreErrors: bool * [&lt;Optional&gt;] ?skipRows: int -&gt; CsvFile<br /><em>&lt;summary&gt;
 Represents a CSV file. The lines are read on demand from &lt;c&gt;reader&lt;/c&gt;.
 Columns are delimited by one of the chars passed by &lt;c&gt;separators&lt;/c&gt; (defaults to just &lt;c&gt;,&lt;/c&gt;), and
 to escape the separator chars, the &lt;c&gt;quote&lt;/c&gt; character will be used (defaults to &lt;c&gt;&quot;&lt;/c&gt;).
 If &lt;c&gt;hasHeaders&lt;/c&gt; is true (the default), the first line read by &lt;c&gt;reader&lt;/c&gt; will not be considered part of data.
 If &lt;c&gt;ignoreErrors&lt;/c&gt; is true (the default is false), rows with a different number of columns from the header row
 (or the first row if headers are not present) will be ignored.
 The first &lt;c&gt;skipRows&lt;/c&gt; lines will be skipped.
 &lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs18">namespace System.IO</div>
<div class="fsdocs-tip" id="fs19">type File =
  static member AppendAllLines: path: string * contents: IEnumerable&lt;string&gt; -&gt; unit + 1 overload
  static member AppendAllLinesAsync: path: string * contents: IEnumerable&lt;string&gt; * encoding: Encoding * ?cancellationToken: CancellationToken -&gt; Task + 1 overload
  static member AppendAllText: path: string * contents: string -&gt; unit + 1 overload
  static member AppendAllTextAsync: path: string * contents: string * encoding: Encoding * ?cancellationToken: CancellationToken -&gt; Task + 1 overload
  static member AppendText: path: string -&gt; StreamWriter
  static member Copy: sourceFileName: string * destFileName: string -&gt; unit + 1 overload
  static member Create: path: string -&gt; FileStream + 2 overloads
  static member CreateSymbolicLink: path: string * pathToTarget: string -&gt; FileSystemInfo
  static member CreateText: path: string -&gt; StreamWriter
  static member Decrypt: path: string -&gt; unit
  ...<br /><em>&lt;summary&gt;Provides static methods for the creation, copying, deletion, moving, and opening of a single file, and aids in the creation of &lt;see cref=&quot;T:System.IO.FileStream&quot; /&gt; objects.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs20">IO.File.Exists(path: string) : bool</div>
<div class="fsdocs-tip" id="fs21">val printfn: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs22">val filesThere: Collections.Generic.IEnumerable&lt;string&gt;</div>
<div class="fsdocs-tip" id="fs23">type Directory =
  static member CreateDirectory: path: string -&gt; DirectoryInfo + 1 overload
  static member CreateSymbolicLink: path: string * pathToTarget: string -&gt; FileSystemInfo
  static member CreateTempSubdirectory: ?prefix: string -&gt; DirectoryInfo
  static member Delete: path: string -&gt; unit + 1 overload
  static member EnumerateDirectories: path: string -&gt; IEnumerable&lt;string&gt; + 3 overloads
  static member EnumerateFileSystemEntries: path: string -&gt; IEnumerable&lt;string&gt; + 3 overloads
  static member EnumerateFiles: path: string -&gt; IEnumerable&lt;string&gt; + 3 overloads
  static member Exists: path: string -&gt; bool
  static member GetCreationTime: path: string -&gt; DateTime
  static member GetCreationTimeUtc: path: string -&gt; DateTime
  ...<br /><em>&lt;summary&gt;Exposes static methods for creating, moving, and enumerating through directories and subdirectories. This class cannot be inherited.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs24">IO.Directory.EnumerateFiles(path: string) : Collections.Generic.IEnumerable&lt;string&gt;<br />IO.Directory.EnumerateFiles(path: string, searchPattern: string) : Collections.Generic.IEnumerable&lt;string&gt;<br />IO.Directory.EnumerateFiles(path: string, searchPattern: string, searchOption: IO.SearchOption) : Collections.Generic.IEnumerable&lt;string&gt;<br />IO.Directory.EnumerateFiles(path: string, searchPattern: string, enumerationOptions: IO.EnumerationOptions) : Collections.Generic.IEnumerable&lt;string&gt;</div>
<div class="fsdocs-tip" id="fs25">[&lt;Struct&gt;]
type SearchOption =
  | TopDirectoryOnly = 0
  | AllDirectories = 1<br /><em>&lt;summary&gt;Specifies whether to search the current directory, or the current directory and all subdirectories.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs26">field IO.SearchOption.AllDirectories: IO.SearchOption = 1</div>
<div class="fsdocs-tip" id="fs27">Multiple items<br />module Seq

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to compute common statistical measure
&lt;/summary&gt;</em><br /><br />--------------------<br />module Seq

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Seq =
  new: unit -&gt; Seq
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float seq
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float seq<br /><br />--------------------<br />new: unit -&gt; Seq</div>
<div class="fsdocs-tip" id="fs28">val iteri: action: (int -&gt; &#39;T -&gt; unit) -&gt; source: &#39;T seq -&gt; unit</div>
<div class="fsdocs-tip" id="fs29">type MsfCsv = obj</div>
<div class="fsdocs-tip" id="fs30">type CsvProvider<br /><em>&lt;summary&gt;Typed representation of a CSV file.&lt;/summary&gt;
           &lt;param name=&#39;Sample&#39;&gt;Location of a CSV sample file or a string containing a sample CSV document.&lt;/param&gt;
           &lt;param name=&#39;Separators&#39;&gt;Column delimiter(s). Defaults to &lt;c&gt;,&lt;/c&gt;.&lt;/param&gt;
           &lt;param name=&#39;InferRows&#39;&gt;Number of rows to use for inference. Defaults to &lt;c&gt;1000&lt;/c&gt;. If this is zero, all rows are used.&lt;/param&gt;
           &lt;param name=&#39;Schema&#39;&gt;Optional column types, in a comma separated list. Valid types are &lt;c&gt;int&lt;/c&gt;, &lt;c&gt;int64&lt;/c&gt;, &lt;c&gt;bool&lt;/c&gt;, &lt;c&gt;float&lt;/c&gt;, &lt;c&gt;decimal&lt;/c&gt;, &lt;c&gt;date&lt;/c&gt;, &lt;c&gt;datetimeoffset&lt;/c&gt;, &lt;c&gt;timespan&lt;/c&gt;, &lt;c&gt;guid&lt;/c&gt;, &lt;c&gt;string&lt;/c&gt;, &lt;c&gt;int?&lt;/c&gt;, &lt;c&gt;int64?&lt;/c&gt;, &lt;c&gt;bool?&lt;/c&gt;, &lt;c&gt;float?&lt;/c&gt;, &lt;c&gt;decimal?&lt;/c&gt;, &lt;c&gt;date?&lt;/c&gt;, &lt;c&gt;datetimeoffset?&lt;/c&gt;, &lt;c&gt;timespan?&lt;/c&gt;, &lt;c&gt;guid?&lt;/c&gt;, &lt;c&gt;int option&lt;/c&gt;, &lt;c&gt;int64 option&lt;/c&gt;, &lt;c&gt;bool option&lt;/c&gt;, &lt;c&gt;float option&lt;/c&gt;, &lt;c&gt;decimal option&lt;/c&gt;, &lt;c&gt;date option&lt;/c&gt;, &lt;c&gt;datetimeoffset option&lt;/c&gt;, &lt;c&gt;timespan option&lt;/c&gt;, &lt;c&gt;guid option&lt;/c&gt; and &lt;c&gt;string option&lt;/c&gt;.
           You can also specify a unit and the name of the column like this: &lt;c&gt;Name (type&amp;lt;unit&amp;gt;)&lt;/c&gt;, or you can override only the name. If you don&#39;t want to specify all the columns, you can reference the columns by name like this: &lt;c&gt;ColumnName=type&lt;/c&gt;.&lt;/param&gt;
           &lt;param name=&#39;HasHeaders&#39;&gt;Whether the sample contains the names of the columns as its first line.&lt;/param&gt;
           &lt;param name=&#39;IgnoreErrors&#39;&gt;Whether to ignore rows that have the wrong number of columns or which can&#39;t be parsed using the inferred or specified schema. Otherwise an exception is thrown when these rows are encountered.&lt;/param&gt;
           &lt;param name=&#39;SkipRows&#39;&gt;Skips the first n rows of the CSV file.&lt;/param&gt;
           &lt;param name=&#39;AssumeMissingValues&#39;&gt;When set to true, the type provider will assume all columns can have missing values, even if in the provided sample all values are present. Defaults to false.&lt;/param&gt;
           &lt;param name=&#39;PreferOptionals&#39;&gt;When set to true, inference will prefer to use the option type instead of nullable types, &lt;c&gt;double.NaN&lt;/c&gt; or &lt;c&gt;&quot;&quot;&lt;/c&gt; for missing values. Defaults to false.&lt;/param&gt;
           &lt;param name=&#39;Quote&#39;&gt;The quotation mark (for surrounding values containing the delimiter). Defaults to &lt;c&gt;&quot;&lt;/c&gt;.&lt;/param&gt;
           &lt;param name=&#39;MissingValues&#39;&gt;The set of strings recognized as missing values specified as a comma-separated string (e.g., &quot;NA,N/A&quot;). Defaults to &lt;c&gt;NaN,NA,N/A,#N/A,:,-,TBA,TBD&lt;/c&gt;.&lt;/param&gt;
           &lt;param name=&#39;CacheRows&#39;&gt;Whether the rows should be caches so they can be iterated multiple times. Defaults to true. Disable for large datasets.&lt;/param&gt;
           &lt;param name=&#39;Culture&#39;&gt;The culture used for parsing numbers and dates. Defaults to the invariant culture.&lt;/param&gt;
           &lt;param name=&#39;Encoding&#39;&gt;The encoding used to read the sample. You can specify either the character set name or the codepage number. Defaults to UTF8 for files, and to ISO-8859-1 the for HTTP requests, unless &lt;c&gt;charset&lt;/c&gt; is specified in the &lt;c&gt;Content-Type&lt;/c&gt; response header.&lt;/param&gt;
           &lt;param name=&#39;ResolutionFolder&#39;&gt;A directory that is used when resolving relative file references (at design time and in hosted execution).&lt;/param&gt;
           &lt;param name=&#39;EmbeddedResource&#39;&gt;When specified, the type provider first attempts to load the sample from the specified resource 
              (e.g. &#39;MyCompany.MyAssembly, resource_name.csv&#39;). This is useful when exposing types generated by the type provider.&lt;/param&gt;</em></div>
<div class="fsdocs-tip" id="fs31">val msfCsv: HttpResponseWithStream</div>
<div class="fsdocs-tip" id="fs32">HttpResponseWithStream.Headers: Map&lt;string,string&gt;<br /><em>&lt;summary&gt;
 If the same header is present multiple times, the values will be concatenated with comma as the separator
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs33">val truncate: count: int -&gt; source: &#39;T seq -&gt; &#39;T seq</div>
<div class="fsdocs-tip" id="fs34">val msfRows: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs35">val toList: source: &#39;T seq -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs36">type PriorReturnOb =
  {
    SecurityId: SecurityId
    FormationMonth: DateTime
    Retm12m2: float
    N: int
  }</div>
<div class="fsdocs-tip" id="fs37">type SecurityId =
  | Ticker of string
  | Cusip of string
  | Bloomberg of string
  | Permno of int
  | Other of string</div>
<div class="fsdocs-tip" id="fs38">Multiple items<br />val float: value: &#39;T -&gt; float (requires member op_Explicit)<br /><br />--------------------<br />type float = Double<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; =
  float</div>
<div class="fsdocs-tip" id="fs39">PriorReturnOb.N: int</div>
<div class="fsdocs-tip" id="fs40">Multiple items<br />val int: value: &#39;T -&gt; int (requires member op_Explicit)<br /><br />--------------------<br />type int = int32<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; =
  int</div>
<div class="fsdocs-tip" id="fs41">val endOfFebruary: DateTime</div>
<div class="fsdocs-tip" id="fs42">val endOfMarch: DateTime</div>
<div class="fsdocs-tip" id="fs43">val endOfFebruaryPlus1Month: DateTime</div>
<div class="fsdocs-tip" id="fs44">DateTime.AddMonths(months: int) : DateTime</div>
<div class="fsdocs-tip" id="fs45">val beginningOfFebruary: DateTime</div>
<div class="fsdocs-tip" id="fs46">val beginningOfMarch: DateTime</div>
<div class="fsdocs-tip" id="fs47">Multiple items<br />module List

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to compute common statistical measure on list
&lt;/summary&gt;</em><br /><br />--------------------<br />module List

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List =
  new: unit -&gt; List
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float list
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float list<br /><br />--------------------<br />type List&lt;&#39;T&gt; =
  | op_Nil
  | op_ColonColon of Head: &#39;T * Tail: &#39;T list
  interface IReadOnlyList&lt;&#39;T&gt;
  interface IReadOnlyCollection&lt;&#39;T&gt;
  interface IEnumerable
  interface IEnumerable&lt;&#39;T&gt;
  member GetReverseIndex: rank: int * offset: int -&gt; int
  member GetSlice: startIndex: int option * endIndex: int option -&gt; &#39;T list
  static member Cons: head: &#39;T * tail: &#39;T list -&gt; &#39;T list
  member Head: &#39;T
  member IsEmpty: bool
  member Item: index: int -&gt; &#39;T with get
  ...<br /><br />--------------------<br />new: unit -&gt; List</div>
<div class="fsdocs-tip" id="fs48">val filter: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs49">val x: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs50">val truncate: count: int -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs51">val map: mapping: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U list</div>
<div class="fsdocs-tip" id="fs52">val ym: DateTime</div>
<div class="fsdocs-tip" id="fs53">PortfolioReturn.Month: DateTime</div>
<div class="fsdocs-tip" id="fs54">property DateTime.Year: int with get<br /><em>&lt;summary&gt;Gets the year component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The year, between 1 and 9999.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs55">property DateTime.Month: int with get<br /><em>&lt;summary&gt;Gets the month component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The month component, expressed as a value between 1 and 12.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs56">val key: SecurityId * DateTime</div>
<div class="fsdocs-tip" id="fs57">union case SecurityId.Permno: int -&gt; SecurityId</div>
<div class="fsdocs-tip" id="fs58">val amznReturns: Map&lt;(SecurityId * DateTime),PortfolioReturn&gt;</div>
<div class="fsdocs-tip" id="fs59">Multiple items<br />module Map

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to strore specialised computations on maps
&lt;/summary&gt;</em><br /><br />--------------------<br />module Map

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Map&lt;&#39;Key,&#39;Value (requires comparison)&gt; =
  interface IReadOnlyDictionary&lt;&#39;Key,&#39;Value&gt;
  interface IReadOnlyCollection&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface IEnumerable
  interface IStructuralEquatable
  interface IComparable
  interface IEnumerable&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface ICollection&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface IDictionary&lt;&#39;Key,&#39;Value&gt;
  new: elements: (&#39;Key * &#39;Value) seq -&gt; Map&lt;&#39;Key,&#39;Value&gt;
  member Add: key: &#39;Key * value: &#39;Value -&gt; Map&lt;&#39;Key,&#39;Value&gt;
  ...<br /><br />--------------------<br />new: elements: (&#39;Key * &#39;Value) seq -&gt; Map&lt;&#39;Key,&#39;Value&gt;</div>
<div class="fsdocs-tip" id="fs60">val amznPermno: SecurityId</div>
<div class="fsdocs-tip" id="fs61">val getPastYearObs: returns: Map&lt;(&#39;a * DateTime),&#39;b&gt; -&gt; security: &#39;a * formationMonth: DateTime -&gt; &#39;b list (requires comparison)</div>
<div class="fsdocs-tip" id="fs62">val returns: Map&lt;(&#39;a * DateTime),&#39;b&gt; (requires comparison)</div>
<div class="fsdocs-tip" id="fs63">val security: &#39;a (requires comparison)</div>
<div class="fsdocs-tip" id="fs64">val formationMonth: DateTime</div>
<div class="fsdocs-tip" id="fs65">val choose: chooser: (&#39;T -&gt; &#39;U option) -&gt; list: &#39;T list -&gt; &#39;U list</div>
<div class="fsdocs-tip" id="fs66">val i: int</div>
<div class="fsdocs-tip" id="fs67">val returnMonth: DateTime</div>
<div class="fsdocs-tip" id="fs68">val tryFind: key: &#39;Key -&gt; table: Map&lt;&#39;Key,&#39;T&gt; -&gt; &#39;T option (requires comparison)</div>
<div class="fsdocs-tip" id="fs69">val cumulativeReturn: rets: float seq -&gt; float</div>
<div class="fsdocs-tip" id="fs70">val rets: float seq</div>
<div class="fsdocs-tip" id="fs71">val mutable cr: float</div>
<div class="fsdocs-tip" id="fs72">val r: float</div>
<div class="fsdocs-tip" id="fs73">val getMomentumSignal: returns: Map&lt;(SecurityId * DateTime),&#39;a&gt; -&gt; security: SecurityId * formationMonth: DateTime -&gt; PriorReturnOb option</div>
<div class="fsdocs-tip" id="fs74">val returns: Map&lt;(SecurityId * DateTime),&#39;a&gt;</div>
<div class="fsdocs-tip" id="fs75">val security: SecurityId</div>
<div class="fsdocs-tip" id="fs76">val priorObs: &#39;a list</div>
<div class="fsdocs-tip" id="fs77">val priorRets: float list</div>
<div class="fsdocs-tip" id="fs78">val x: &#39;a</div>
<div class="fsdocs-tip" id="fs79">val isEmpty: list: &#39;T list -&gt; bool</div>
<div class="fsdocs-tip" id="fs80">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs81">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs82">property List.Length: int with get</div>
<div class="fsdocs-tip" id="fs83">val msfByPermnoMonth: Map&lt;(SecurityId * DateTime),PortfolioReturn&gt;</div>
<div class="fsdocs-tip" id="fs84">val testTicker: string</div>
<div class="fsdocs-tip" id="fs85">val firstTestTickerRow: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs86">val find: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs87">val row: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs88">val notableTicks: Map&lt;string,int&gt;</div>
<div class="fsdocs-tip" id="fs89">val ticker: string</div>
<div class="fsdocs-tip" id="fs90">val firstTickerRow: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs91">val msftPermno: SecurityId</div>
<div class="fsdocs-tip" id="fs92">val aaplPermno: SecurityId</div>
<div class="fsdocs-tip" id="fs93">val hogPermno: SecurityId</div>
<div class="fsdocs-tip" id="fs94">val msftTestIndex: SecurityId * DateTime</div>
<div class="fsdocs-tip" id="fs95">val aaplTestIndex: SecurityId * DateTime</div>
<div class="fsdocs-tip" id="fs96">val getMomentumSignalAny: (SecurityId * DateTime -&gt; PriorReturnOb option)</div>
<div class="fsdocs-tip" id="fs97">val securitiesByFormationMonth: Map&lt;DateTime,SecurityId list&gt;</div>
<div class="fsdocs-tip" id="fs98">val byYearMonth: (DateTime * PortfolioReturn list) list</div>
<div class="fsdocs-tip" id="fs99">val groupBy: projection: (&#39;T -&gt; &#39;Key) -&gt; list: &#39;T list -&gt; (&#39;Key * &#39;T list) list (requires equality)</div>
<div class="fsdocs-tip" id="fs100">val yearMonth: DateTime</div>
<div class="fsdocs-tip" id="fs101">val stocksThatMonth: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs102">val permnos: SecurityId list</div>
<div class="fsdocs-tip" id="fs103">val stock: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs104">val getInvestmentUniverse: formationMonth: DateTime -&gt; InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs105">val securities: SecurityId list</div>
<div class="fsdocs-tip" id="fs106">val failwith: message: string -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs107">val isCommonStock: SecurityId * DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs108">val securityFormationMonth: SecurityId * DateTime</div>
<div class="fsdocs-tip" id="fs109">val contains: value: &#39;T -&gt; source: &#39;T list -&gt; bool (requires equality)</div>
<div class="fsdocs-tip" id="fs110">val onNyseNasdaqAmex: SecurityId * DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs111">val hasPrice13mAgo: security: SecurityId * formationMonth: DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs112">val m13: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs113">val hasReturn2mAgo: security: SecurityId * formationMonth: DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs114">val m2: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs115">val hasMe1mAgo: security: SecurityId * formationMonth: DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs116">val m1: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs117">val has8ReturnsPastYear: SecurityId * DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs118">val x: PriorReturnOb</div>
<div class="fsdocs-tip" id="fs119">val danielMoskowitzRestrictions: SecurityId * DateTime -&gt; bool</div>
<div class="fsdocs-tip" id="fs120">val restrictUniverse: investmentUniverse: InvestmentUniverse -&gt; InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs121">val investmentUniverse: InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs122">type InvestmentUniverse =
  {
    FormationMonth: DateTime
    Securities: SecurityId list
  }</div>
<div class="fsdocs-tip" id="fs123">val filtered: SecurityId list</div>
<div class="fsdocs-tip" id="fs124">InvestmentUniverse.Securities: SecurityId list</div>
<div class="fsdocs-tip" id="fs125">InvestmentUniverse.FormationMonth: DateTime</div>
<div class="fsdocs-tip" id="fs126">val restrictedInvestmentUniverse: InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs127">val getMomentumSecuritySignal: security: SecurityId * formationMonth: DateTime -&gt; SecuritySignal option</div>
<div class="fsdocs-tip" id="fs128">val signalOb: PriorReturnOb</div>
<div class="fsdocs-tip" id="fs129">val signal: SecuritySignal</div>
<div class="fsdocs-tip" id="fs130">Multiple items<br />namespace FSharp.Stats.Signal<br /><br />--------------------<br />type Signal =
  {
    SecurityId: SecurityId
    FormationDate: DateTime
    Signal: float
  }</div>
<div class="fsdocs-tip" id="fs131">PriorReturnOb.Retm12m2: float</div>
<div class="fsdocs-tip" id="fs132">val getMomentumSignals: investmentUniverse: InvestmentUniverse -&gt; SecuritiesWithSignals</div>
<div class="fsdocs-tip" id="fs133">val arrayOfSecuritySignals: SecuritySignal list</div>
<div class="fsdocs-tip" id="fs134">val mom201507: AssignedPortfolio seq</div>
<div class="fsdocs-tip" id="fs135">val assignSignalSort: name: string -&gt; n: int -&gt; xs: SecuritiesWithSignals -&gt; AssignedPortfolio seq</div>
<div class="fsdocs-tip" id="fs136">val port: AssignedPortfolio</div>
<div class="fsdocs-tip" id="fs137">val getMarketCap: security: SecurityId * formationMonth: DateTime -&gt; (SecurityId * float) option</div>
<div class="fsdocs-tip" id="fs138">val prc: float</div>
<div class="fsdocs-tip" id="fs139">val shrout: float</div>
<div class="fsdocs-tip" id="fs140">val id: x: &#39;T -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs141">val exampleCapitalizations: (SecurityId * float) list</div>
<div class="fsdocs-tip" id="fs142">val exampleValueWeights: float list</div>
<div class="fsdocs-tip" id="fs143">val tot: float</div>
<div class="fsdocs-tip" id="fs144">val sumBy: projection: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U (requires member (+) and member Zero)</div>
<div class="fsdocs-tip" id="fs145">val snd: tuple: (&#39;T1 * &#39;T2) -&gt; &#39;T2</div>
<div class="fsdocs-tip" id="fs146">val _id: SecurityId</div>
<div class="fsdocs-tip" id="fs147">val cap: float</div>
<div class="fsdocs-tip" id="fs148">val sortDescending: list: &#39;T list -&gt; &#39;T list (requires comparison)</div>
<div class="fsdocs-tip" id="fs149">val mktCapExPort: AssignedPortfolio</div>
<div class="fsdocs-tip" id="fs150">type AssignedPortfolio =
  {
    Name: string
    Index: int
    FormationMonth: DateTime
    Signals: SecuritySignal list
  }</div>
<div class="fsdocs-tip" id="fs151">val signals: SecuritySignal list</div>
<div class="fsdocs-tip" id="fs152">val exampleValueWeights2: Portfolio</div>
<div class="fsdocs-tip" id="fs153">val giveValueWeights: marketCapGetter: GetsMarketCaps -&gt; x: AssignedPortfolio -&gt; Portfolio<br /><em>&lt;summary&gt;
 Defining this type alias makes it easier to read the type of the function that I want for
 marketCapGetter in the function that I have below. Otherwise it might look something like
 let giveValueWeights (marketCapGetter: (SecurityId * YearMonth -&amp;gt; (SecurityId * float) Option) ...
 which is the same thing but not as clear what we&#39;re trying to do.
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs154">val myValueWeights: (AssignedPortfolio -&gt; Portfolio)</div>
<div class="fsdocs-tip" id="fs155">val portfoliosWithWeights: Portfolio list</div>
<div class="fsdocs-tip" id="fs156">val assignedPortfolios: AssignedPortfolio seq</div>
<div class="fsdocs-tip" id="fs157">val portfolio: AssignedPortfolio</div>
<div class="fsdocs-tip" id="fs158">val port: Portfolio</div>
<div class="fsdocs-tip" id="fs159">val maxWeight: float</div>
<div class="fsdocs-tip" id="fs160">val position: Position</div>
<div class="fsdocs-tip" id="fs161">Portfolio.Positions: Position list</div>
<div class="fsdocs-tip" id="fs162">Position.Weight: float</div>
<div class="fsdocs-tip" id="fs163">val max: list: &#39;T list -&gt; &#39;T (requires comparison)</div>
<div class="fsdocs-tip" id="fs164">val totalWeights: float</div>
<div class="fsdocs-tip" id="fs165">val sum: list: &#39;T list -&gt; &#39;T (requires member (+) and member Zero)</div>
<div class="fsdocs-tip" id="fs166">type Chart =
  static member AnnotatedHeatmap: zData: #(&#39;a1 seq) seq * annotationText: #(string seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?XGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?YGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a5 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a5 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ZSmooth: SmoothAlg * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?ReverseYAxis: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a5 :&gt; IConvertible) + 1 overload
  static member Area: x: #IConvertible seq * y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: MarkerSymbol * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: MarkerSymbol seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: GroupNorm * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 1 overload
  static member Bar: values: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Keys: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: PatternShape * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: PatternShape seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: Pattern * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  static member BoxPlot: [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?WhiskerWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?BoxPoints: BoxPoints * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?BoxMean: BoxMean * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Jitter: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?PointPos: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutlineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutlineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Outline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?AlignmentGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OffsetGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Notched: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?NotchWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?QuartileMethod: QuartileMethod * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 2 overloads
  static member Bubble: x: #IConvertible seq * y: #IConvertible seq * sizes: int seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: MarkerSymbol * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: MarkerSymbol seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: GroupNorm * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 1 overload
  static member Candlestick: ``open`` : #IConvertible seq * high: #IConvertible seq * low: #IConvertible seq * close: #IConvertible seq * x: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a5 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a5 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?IncreasingColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Increasing: FinanceMarker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?DecreasingColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Decreasing: FinanceMarker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?WhiskerWidth: float * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a5 :&gt; IConvertible) + 1 overload
  static member Column: values: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Keys: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: PatternShape * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: PatternShape seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: Pattern * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  static member Contour: zData: #(&#39;a1 seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineSmoothing: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLine: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursColoring: ContourColoring * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursOperation: ConstraintOperation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursType: ContourType * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowContourLabels: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLabelFont: Font * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Contours: Contours * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?NContours: int * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a4 :&gt; IConvertible)
  static member Funnel: x: #IConvertible seq * y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Offset: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?AlignmentGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OffsetGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextInfo: TextInfo * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLineStyle: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorFillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLine: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Connector: FunnelConnector * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?InsideTextFont: Font * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutsideTextFont: Font * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible)
  static member Heatmap: zData: #(&#39;a1 seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?XGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?YGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ZSmooth: SmoothAlg * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?ReverseYAxis: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  ...</div>
<div class="fsdocs-tip" id="fs167">static member Chart.Bar: keysValues: (#IConvertible * #IConvertible) seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: StyleParam.PatternShape * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: StyleParam.PatternShape seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: TraceObjects.Pattern * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible)<br />static member Chart.Bar: values: #IConvertible seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Keys: #IConvertible seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: StyleParam.PatternShape * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: StyleParam.PatternShape seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: TraceObjects.Pattern * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible)</div>
<div class="fsdocs-tip" id="fs168">val getSecurityReturn: security: SecurityId * formationMonth: DateTime -&gt; SecurityId * float</div>
<div class="fsdocs-tip" id="fs169">val missingReturn: float</div>
<div class="fsdocs-tip" id="fs170">val portReturn: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs171">val getPortfolioReturn: returnGetter: GetsReturn -&gt; x: Portfolio -&gt; PortfolioReturn</div>
<div class="fsdocs-tip" id="fs172">val myPortfolioReturns: (Portfolio -&gt; PortfolioReturn)</div>
<div class="fsdocs-tip" id="fs173">val sampleMonths: DateTime list</div>
<div class="fsdocs-tip" id="fs174">val getSampleMonths: sampleStart: DateTime * sampleEnd: DateTime -&gt; DateTime list<br /><em>&lt;summary&gt;
 This function takes a sample start and sample end
 and returns a list with all months from start to end.
 Don&#39;t worry about understanding what this function does.
 The details are beyond the scope of the class, but if you&#39;re
 curious it&#39;s a recursive function:
 https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/functions/recursive-functions-the-rec-keyword
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs175">val rev: list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs176">val take: count: int -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs177">val formMomtenumPortWithAssignments: ym: DateTime -&gt; PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs178">val universe: InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs179">val restricted: InvestmentUniverse</div>
<div class="fsdocs-tip" id="fs180">val signals: SecuritiesWithSignals</div>
<div class="fsdocs-tip" id="fs181">val portfolioReturns: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs182">val portfolio: Portfolio</div>
<div class="fsdocs-tip" id="fs183">val formMomentumPort: ym: DateTime -&gt; PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs184">val momentumPortsSequential: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs185">val collect: mapping: (&#39;T -&gt; &#39;U list) -&gt; list: &#39;T list -&gt; &#39;U list</div>
<div class="fsdocs-tip" id="fs186">val formMomentumPortArray: ym: DateTime -&gt; PortfolioReturn array</div>
<div class="fsdocs-tip" id="fs187">val toArray: list: &#39;T list -&gt; &#39;T array</div>
<div class="fsdocs-tip" id="fs188">val momentumPortsParallel: PortfolioReturn array</div>
<div class="fsdocs-tip" id="fs189">Multiple items<br />type Array =
  new: unit -&gt; Array
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float array
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float array<br /><br />--------------------<br />new: unit -&gt; Array</div>
<div class="fsdocs-tip" id="fs190">module Parallel

from Microsoft.FSharp.Collections.ArrayModule</div>
<div class="fsdocs-tip" id="fs191">val collect: mapping: (&#39;T -&gt; &#39;U array) -&gt; array: &#39;T array -&gt; &#39;U array</div>
<div class="fsdocs-tip" id="fs192">val mom10: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs193">val p: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs194">Multiple items<br />[&lt;Struct&gt;]
type Index =
  new: value: int * ?fromEnd: bool -&gt; unit
  member Equals: other: Index -&gt; bool + 1 overload
  member GetHashCode: unit -&gt; int
  member GetOffset: length: int -&gt; int
  member ToString: unit -&gt; string
  static member FromEnd: value: int -&gt; Index
  static member FromStart: value: int -&gt; Index
  static member op_Implicit: value: int -&gt; Index
  member IsFromEnd: bool
  member Value: int
  ...<br /><em>&lt;summary&gt;Represents a type that can be used to index a collection either from the beginning or the end.&lt;/summary&gt;</em><br /><br />--------------------<br />Index ()<br />Index(value: int, ?fromEnd: bool) : Index</div>
<div class="fsdocs-tip" id="fs195">val sortBy: projection: (&#39;T -&gt; &#39;Key) -&gt; list: &#39;T list -&gt; &#39;T list (requires comparison)</div>
<div class="fsdocs-tip" id="fs196">val mom10CumulativeReturns: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs197">PortfolioReturn.Return: float</div>
<div class="fsdocs-tip" id="fs198">val month: PortfolioReturn</div>
<div class="fsdocs-tip" id="fs199">static member Chart.Line: xy: (#IConvertible * #IConvertible) seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: StyleParam.MarkerSymbol * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: StyleParam.MarkerSymbol seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: StyleParam.DrawingStyle * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: StyleParam.Orientation * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: StyleParam.GroupNorm * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Fill: StyleParam.Fill * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;a2 :&gt; IConvertible)<br />static member Chart.Line: x: #IConvertible seq * y: #IConvertible seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: StyleParam.MarkerSymbol * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: StyleParam.MarkerSymbol seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: StyleParam.DrawingStyle * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: StyleParam.Orientation * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: StyleParam.GroupNorm * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Fill: StyleParam.Fill * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;a2 :&gt; IConvertible)</div>
<div class="fsdocs-tip" id="fs200">static member Chart.withTitle: title: Title -&gt; (GenericChart.GenericChart -&gt; GenericChart.GenericChart)<br />static member Chart.withTitle: title: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TitleFont: Font -&gt; (GenericChart.GenericChart -&gt; GenericChart.GenericChart)</div>
<div class="fsdocs-tip" id="fs201">val makeCumulativeReturn: portfolioObs: SecurityReturn list -&gt; SecurityReturn list</div>
<div class="fsdocs-tip" id="fs202">val portfolioObs: SecurityReturn list</div>
<div class="fsdocs-tip" id="fs203">val sorted: SecurityReturn list</div>
<div class="fsdocs-tip" id="fs204">val p: SecurityReturn</div>
<div class="fsdocs-tip" id="fs205">val x: SecurityReturn</div>
<div class="fsdocs-tip" id="fs206">SecurityReturn.Return: float</div>
<div class="fsdocs-tip" id="fs207">val testMom10: SecurityReturn list</div>
<div class="fsdocs-tip" id="fs208">val byPortfolioId: (obj * PortfolioReturn list) list</div>
<div class="fsdocs-tip" id="fs209">val listOfCharts: GenericChart.GenericChart list</div>
<div class="fsdocs-tip" id="fs210">val portId: obj</div>
<div class="fsdocs-tip" id="fs211">val portObs: PortfolioReturn list</div>
<div class="fsdocs-tip" id="fs212">val cumulativeReturn: SecurityReturn list</div>
<div class="fsdocs-tip" id="fs213">val plotData: (IConvertible * float) list</div>
<div class="fsdocs-tip" id="fs214">val month: SecurityReturn</div>
<div class="fsdocs-tip" id="fs215">Object.ToString() : string</div>
<div class="fsdocs-tip" id="fs216">static member Chart.combine: gCharts: GenericChart.GenericChart seq -&gt; GenericChart.GenericChart</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Price-momentum">
      Price momentum
    </a>
  </li>
  <li class="level-2">
    <a href="#Input-data">
      Input data
    </a>
  </li>
  <li class="level-2">
    <a href="#Signal-construction">
      Signal construction
    </a>
  </li>
  <li class="level-2">
    <a href="#Defining-the-investment-universe">
      Defining the investment universe
    </a>
  </li>
  <li class="level-2">
    <a href="#Momentum-signals-for-our-investment-universe">
      Momentum signals for our investment universe
    </a>
  </li>
  <li class="level-2">
    <a href="#Assigning-portfolios">
      Assigning portfolios
    </a>
  </li>
  <li class="level-2">
    <a href="#Calculating-Portfolio-weights">
      Calculating Portfolio weights
    </a>
  </li>
  <li class="level-2">
    <a href="#Calculating-Portfolio-returns">
      Calculating Portfolio returns
    </a>
  </li>
  <li class="level-2">
    <a href="#Plotting-returns">
      Plotting returns
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="/Teaching/content/fsdocs-tips.js"></script>
<script type="module" src="/Teaching/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="/Teaching/content/fsdocs-theme.js"></script>
<script type="module" src="/Teaching/content/fsdocs-search.js"></script>

</body>
</html>