<!DOCTYPE html>
<html lang="en" data-root="/Teaching/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Nicholas Hirschey; Davide Costa" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="Teaching">
    <meta property="og:title" content="Optimization" />
    <meta property="og:url" content="/Teaching/optimization.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="/Teaching/">
    <meta name="twitter:title" content="Optimization">
    
    <title>Optimization | Teaching</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="/Teaching/img/logo.png" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="/Teaching/content/fsdocs-theme-set-dark.js"></script>
    <link href="/Teaching/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="/Teaching/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/blob/main/LICENSE.md">License</a>
                </li>
                <li class="nav-item"><a class="nav-link"
                                        href="https://github.com/nhirschey/Teaching/blob/main/CHANGELOG.md">Release
                    Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/">Source
                    Repository</a></li>
                <li class="nav-header ">
  Getting Started
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/install.html">
    Install Software
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/learn-fsharp.html">
    Learn F#
  </a>
</li>             
<li class="nav-header active">
  Lectures
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stockslongrun.html">
    Stocks for the long run
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stocksandbonds.html">
    Stocks and bonds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/riskyweight.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityTiming.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityManagedTypes.html">
    Volatility Managed, but with different vols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolAndReturnPred.html">
    Volatility and Return predictions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/mveComparisons.html">
    More managed portfolio comparisons
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/PortfolioFormation-SimpleExample.html">
    Building a strategy
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Momentum-Class.html">
    Momentum Signal
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="/Teaching/optimization.html">
    Optimization
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/revisitRiskyWeights.html">
    Revisiting Mean-variance optimal risky weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/premiums.html">
    Premiums
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/calls-nn.html">
    Calls NN
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/portfolio-statistics.html">
    Basic Portfolio Statistics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/sentiment-mlnet.html">
    Sentiment classification
  </a>
</li>             
<li class="nav-header ">
  Assignments
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-1-download-data.html">
    Webscraping HTML to CSV
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-tuples-and-records.html">
    Tuples and Records (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-collection-functions.html">
    Collection functions (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-risky-weights.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-volatility-timing.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/select-project-signal.html">
    Select Project Signals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/signal-exploration.html">
    Signal Exploration
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-plotting.html">
    Plotting (with solutions)
  </a>
</li>             
<li class="nav-header ">
  Practice Quizzes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-list-module.html">
    List module functions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-options.html">
    Options
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-match-expressions.html">
    Match expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-map-collection.html">
    Map collection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-discriminated-union.html">
    Dicriminated Union
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-portfolios.html">
    Portfolios
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-factors.html">
    Factors
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-folding.html">
    Fold and Friends
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Common.html">
    Common
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/loading-scripts.html">
    Loading external scripts
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Portfolio.html">
    Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/YahooFinance.html">
    YahooFinance
  </a>
</li>
                
            </ul>
        </div>
        <a href="/Teaching/">
            <img alt="Header menu logo" src="/Teaching/img/logo.png">
            <strong>Teaching</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/nhirschey/Teaching/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/blob/main/LICENSE.md">License</a>
        </li>
        <li class="nav-item"><a class="nav-link"
                                href="https://github.com/nhirschey/Teaching/blob/main/CHANGELOG.md">Release
            Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/nhirschey/Teaching/">Source
            Repository</a></li>
        <li class="nav-header ">
  Getting Started
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/install.html">
    Install Software
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/learn-fsharp.html">
    Learn F#
  </a>
</li>             
<li class="nav-header active">
  Lectures
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stockslongrun.html">
    Stocks for the long run
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/stocksandbonds.html">
    Stocks and bonds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/riskyweight.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityTiming.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolatilityManagedTypes.html">
    Volatility Managed, but with different vols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/VolAndReturnPred.html">
    Volatility and Return predictions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/mveComparisons.html">
    More managed portfolio comparisons
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/PortfolioFormation-SimpleExample.html">
    Building a strategy
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Momentum-Class.html">
    Momentum Signal
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="/Teaching/optimization.html">
    Optimization
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/revisitRiskyWeights.html">
    Revisiting Mean-variance optimal risky weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/premiums.html">
    Premiums
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/calls-nn.html">
    Calls NN
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/portfolio-statistics.html">
    Basic Portfolio Statistics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/sentiment-mlnet.html">
    Sentiment classification
  </a>
</li>             
<li class="nav-header ">
  Assignments
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-1-download-data.html">
    Webscraping HTML to CSV
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-tuples-and-records.html">
    Tuples and Records (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-collection-functions.html">
    Collection functions (with solutions)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-risky-weights.html">
    Risky Weights
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignment-volatility-timing.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/select-project-signal.html">
    Select Project Signals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/signal-exploration.html">
    Signal Exploration
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-signal-portfolio.html">
    Signal Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/assignments/assignment-performance-evaluation.html">
    Performance Evaluation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/football-plotting.html">
    Plotting (with solutions)
  </a>
</li>             
<li class="nav-header ">
  Practice Quizzes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-list-module.html">
    List module functions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-options.html">
    Options
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-match-expressions.html">
    Match expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-map-collection.html">
    Map collection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-discriminated-union.html">
    Dicriminated Union
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-portfolios.html">
    Portfolios
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-factors.html">
    Factors
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/quizzes/quiz-folding.html">
    Fold and Friends
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Common.html">
    Common
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/loading-scripts.html">
    Loading external scripts
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/Portfolio.html">
    Portfolio
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="/Teaching/YahooFinance.html">
    YahooFinance
  </a>
</li>
        
    </ul>
</aside>
<main>
    <div id="content">
        
<p><a href="https://mybinder.org/v2/gh/nhirschey/teaching/gh-pages?filepath=optimization.ipynb"><img src="img/badge-binder.svg" alt="Binder" /></a>&emsp;
<a href="/Teaching//optimization.fsx"><img src="img/badge-script.svg" alt="Script" /></a>&emsp;
<a href="/Teaching//optimization.ipynb"><img src="img/badge-notebook.svg" alt="Notebook" /></a></p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Stats, 0.5.0&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Data, 5.0.2&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: DiffSharp-lite&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Plotly.NET, 3.*&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Plotly.NET.Interactive, 3.*&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Quotes.YahooFinance, 0.0.5&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: NovaSBE.Finance, 0.5.0&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="id">Quotes</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="id">YahooFinance</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="id">NovaSBE</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="id">Finance</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="m">French</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 9)" onmouseover="showTip(event, 'fs2', 9)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="id">Stats</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="id">Plotly</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 12)" onmouseover="showTip(event, 'fs11', 12)" class="id">NET</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs12', 13)" onmouseover="showTip(event, 'fs12', 13)" class="id">DiffSharp</span>

<span onmouseout="hideTip(event, 'fs13', 14)" onmouseover="showTip(event, 'fs13', 14)" class="rt">Environment</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 15)" onmouseover="showTip(event, 'fs14', 15)" class="id">CurrentDirectory</span> <span class="k">&lt;-</span> <span class="k">__SOURCE_DIRECTORY__</span>
</code></pre>
<h1><a name="Portfolio-Optimization" class="anchor" href="#Portfolio-Optimization">Portfolio Optimization</a></h1>
<p>We're now going to see how to do mean-variance portfolio optimization.
The objective is to find the portfolio with the greatest return per
unit of standard deviation.</p>
<p>In particular, we're going to identify the tangency portfolio.
The tangency portfolio is the portfolio fully invested
in risky assets that has the maximum achievable sharpe ratio.
When there is a risk-free rate, the efficient frontier
of optimal portfolios is some combination of
the tangency portfolio and the risk-free asset.
Investors who want safe portfolios hold a lot
of risk-free bonds and very little of the tangency portfolio.
Investors who want riskier portfolios hold little risk-free bonds and
a lot of the tangency portfolio (or even lever the tangency portoflio).</p>
<p>One thing to keep in mind is that often you think
of this as the optimal weight per security.
But one well known problem is that trying to do this naively does not work well.
And by naively I mean taking a stock's average return and covariances in the sample and using that to estimate optimal weights.
In large part, this is because it is hard to estimate a stock's future returns.
I know. Big shock, right?</p>
<p>However, there are ways to do portfolio optimization that work better.
We can do it by creating large groups
of stocks with similar characteristics.
For example, a factor portfolio.
Then you estimate the expected return and covariance matrix using the factor.
That tends to give you better portfolios
because the characteristics that you're using
to form the portfolios help you estimate
the return and covariances of the stocks in it.</p>
<p>A type to hold our data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs15', 16)" onmouseover="showTip(event, 'fs15', 16)" class="rt">StockData</span> <span class="o">=</span>
    <span class="pn">{</span> <span class="prop">Symbol</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs16', 17)" onmouseover="showTip(event, 'fs16', 17)" class="rt">string</span> 
      <span class="prop">Date</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs17', 18)" onmouseover="showTip(event, 'fs17', 18)" class="vt">DateTime</span>
      <span class="prop">Return</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs18', 19)" onmouseover="showTip(event, 'fs18', 19)" class="vt">float</span> <span class="pn">}</span>
</code></pre>
<p>We get the Fama-French 3-Factor asset pricing model data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 20)" onmouseover="showTip(event, 'fs19', 20)" class="id">ff3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs20', 21)" onmouseover="showTip(event, 'fs20', 21)" class="fn">getFF3</span> <span onmouseout="hideTip(event, 'fs21', 22)" onmouseover="showTip(event, 'fs21', 22)" class="rt">Frequency</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 23)" onmouseover="showTip(event, 'fs22', 23)" class="id">Monthly</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs23', 24)" onmouseover="showTip(event, 'fs23', 24)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 25)" onmouseover="showTip(event, 'fs24', 25)" class="id">toList</span>

<span class="c">// Transform to a StockData record type.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 26)" onmouseover="showTip(event, 'fs25', 26)" class="id">ff3StockData</span> <span class="o">=</span>
    <span class="pn">[</span> 
       <span onmouseout="hideTip(event, 'fs19', 27)" onmouseover="showTip(event, 'fs19', 27)" class="id">ff3</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 28)" onmouseover="showTip(event, 'fs26', 28)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 29)" onmouseover="showTip(event, 'fs27', 29)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 30)" onmouseover="showTip(event, 'fs28', 30)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{</span><span class="prop">Symbol</span><span class="o">=</span><span class="s">&quot;HML&quot;</span><span class="pn">;</span><span class="prop">Date</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 31)" onmouseover="showTip(event, 'fs28', 31)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 32)" onmouseover="showTip(event, 'fs29', 32)" class="id">Date</span><span class="pn">;</span><span class="prop">Return</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 33)" onmouseover="showTip(event, 'fs28', 33)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 34)" onmouseover="showTip(event, 'fs30', 34)" class="id">Hml</span><span class="pn">}</span><span class="pn">)</span>
       <span onmouseout="hideTip(event, 'fs19', 35)" onmouseover="showTip(event, 'fs19', 35)" class="id">ff3</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 36)" onmouseover="showTip(event, 'fs26', 36)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 37)" onmouseover="showTip(event, 'fs27', 37)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 38)" onmouseover="showTip(event, 'fs28', 38)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{</span><span class="prop">Symbol</span><span class="o">=</span><span class="s">&quot;MktRf&quot;</span><span class="pn">;</span><span class="prop">Date</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 39)" onmouseover="showTip(event, 'fs28', 39)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 40)" onmouseover="showTip(event, 'fs29', 40)" class="id">Date</span><span class="pn">;</span><span class="prop">Return</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 41)" onmouseover="showTip(event, 'fs28', 41)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 42)" onmouseover="showTip(event, 'fs31', 42)" class="id">MktRf</span><span class="pn">}</span><span class="pn">)</span>
       <span onmouseout="hideTip(event, 'fs19', 43)" onmouseover="showTip(event, 'fs19', 43)" class="id">ff3</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 44)" onmouseover="showTip(event, 'fs26', 44)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 45)" onmouseover="showTip(event, 'fs27', 45)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 46)" onmouseover="showTip(event, 'fs28', 46)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{</span><span class="prop">Symbol</span><span class="o">=</span><span class="s">&quot;Smb&quot;</span><span class="pn">;</span><span class="prop">Date</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 48)" onmouseover="showTip(event, 'fs29', 48)" class="id">Date</span><span class="pn">;</span><span class="prop">Return</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs28', 49)" onmouseover="showTip(event, 'fs28', 49)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 50)" onmouseover="showTip(event, 'fs32', 50)" class="id">Smb</span><span class="pn">}</span><span class="pn">)</span>
    <span class="pn">]</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 51)" onmouseover="showTip(event, 'fs26', 51)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 52)" onmouseover="showTip(event, 'fs33', 52)" class="id">concat</span>
</code></pre>
<p>Let's get our factor data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 53)" onmouseover="showTip(event, 'fs34', 53)" class="id">tickers</span> <span class="o">=</span> 
    <span class="pn">[</span> 
        <span class="s">&quot;VBR&quot;</span> <span class="c">// Vanguard Small-cap Value ETF</span>
        <span class="s">&quot;VUG&quot;</span> <span class="c">// Vanguard Growth ETF</span>
        <span class="s">&quot;VTI&quot;</span> <span class="c">// Vanguard Total Stock Market ETF</span>
        <span class="s">&quot;BND&quot;</span> <span class="c">// Vanguard Total Bond Market ETF</span>
    <span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 54)" onmouseover="showTip(event, 'fs35', 54)" class="id">tickPrices</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs36', 55)" onmouseover="showTip(event, 'fs36', 55)" class="rt">YahooFinance</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 56)" onmouseover="showTip(event, 'fs37', 56)" class="id">History</span><span class="pn">(</span>
        <span onmouseout="hideTip(event, 'fs34', 57)" onmouseover="showTip(event, 'fs34', 57)" class="id">tickers</span><span class="pn">,</span>
        <span class="fn">startDate</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 58)" onmouseover="showTip(event, 'fs17', 58)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2010</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">,</span>
        <span class="fn">interval</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs38', 59)" onmouseover="showTip(event, 'fs38', 59)" class="m">Interval</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 60)" onmouseover="showTip(event, 'fs39', 60)" class="id">Monthly</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs35', 61)" onmouseover="showTip(event, 'fs35', 61)" class="id">tickPrices</span><span class="pn">[</span><span class="o">..</span><span class="n">3</span><span class="pn">]</span>
</code></pre>
<p>A function to calculate returns from Price observations</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 62)" onmouseover="showTip(event, 'fs40', 62)" class="fn">pricesToReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs41', 63)" onmouseover="showTip(event, 'fs41', 63)" class="fn">symbol</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs42', 64)" onmouseover="showTip(event, 'fs42', 64)" class="fn">adjPrices</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs43', 65)" onmouseover="showTip(event, 'fs43', 65)" class="rt">list</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs44', 66)" onmouseover="showTip(event, 'fs44', 66)" class="rt">Quote</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs42', 67)" onmouseover="showTip(event, 'fs42', 67)" class="fn">adjPrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 68)" onmouseover="showTip(event, 'fs26', 68)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs45', 69)" onmouseover="showTip(event, 'fs45', 69)" class="id">sortBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 70)" onmouseover="showTip(event, 'fs46', 70)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs46', 71)" onmouseover="showTip(event, 'fs46', 71)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 72)" onmouseover="showTip(event, 'fs47', 72)" class="id">Date</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 73)" onmouseover="showTip(event, 'fs26', 73)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 74)" onmouseover="showTip(event, 'fs48', 74)" class="id">pairwise</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 75)" onmouseover="showTip(event, 'fs26', 75)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 76)" onmouseover="showTip(event, 'fs27', 76)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs49', 77)" onmouseover="showTip(event, 'fs49', 77)" class="fn">day0</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs50', 78)" onmouseover="showTip(event, 'fs50', 78)" class="fn">day1</span><span class="pn">)</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 79)" onmouseover="showTip(event, 'fs51', 79)" class="fn">r</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 80)" onmouseover="showTip(event, 'fs50', 80)" class="fn">day1</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs52', 81)" onmouseover="showTip(event, 'fs52', 81)" class="id">AdjustedClose</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs49', 82)" onmouseover="showTip(event, 'fs49', 82)" class="fn">day0</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs52', 83)" onmouseover="showTip(event, 'fs52', 83)" class="id">AdjustedClose</span> <span class="o">-</span> <span class="n">1.0</span> 
        <span class="pn">{</span> <span class="prop">Symbol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 84)" onmouseover="showTip(event, 'fs41', 84)" class="fn">symbol</span> 
          <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 85)" onmouseover="showTip(event, 'fs50', 85)" class="fn">day1</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 86)" onmouseover="showTip(event, 'fs47', 86)" class="id">Date</span> 
          <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 87)" onmouseover="showTip(event, 'fs51', 87)" class="fn">r</span> <span class="pn">}</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 88)" onmouseover="showTip(event, 'fs53', 88)" class="id">testPriceObs</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs35', 89)" onmouseover="showTip(event, 'fs35', 89)" class="id">tickPrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 90)" onmouseover="showTip(event, 'fs26', 90)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 91)" onmouseover="showTip(event, 'fs54', 91)" class="id">filter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 92)" onmouseover="showTip(event, 'fs46', 92)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs46', 93)" onmouseover="showTip(event, 'fs46', 93)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 94)" onmouseover="showTip(event, 'fs55', 94)" class="id">Symbol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 95)" onmouseover="showTip(event, 'fs34', 95)" class="id">tickers</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 96)" onmouseover="showTip(event, 'fs26', 96)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 97)" onmouseover="showTip(event, 'fs56', 97)" class="id">truncate</span> <span class="n">4</span>
</code></pre>
<p>Looking at the results of grouping test prices by symbol.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs53', 98)" onmouseover="showTip(event, 'fs53', 98)" class="id">testPriceObs</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 99)" onmouseover="showTip(event, 'fs26', 99)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 100)" onmouseover="showTip(event, 'fs57', 100)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 101)" onmouseover="showTip(event, 'fs46', 101)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs46', 102)" onmouseover="showTip(event, 'fs46', 102)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 103)" onmouseover="showTip(event, 'fs55', 103)" class="id">Symbol</span><span class="pn">)</span>
</code></pre>
<p>Same but calculating return observations.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs53', 104)" onmouseover="showTip(event, 'fs53', 104)" class="id">testPriceObs</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 105)" onmouseover="showTip(event, 'fs26', 105)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 106)" onmouseover="showTip(event, 'fs57', 106)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 107)" onmouseover="showTip(event, 'fs46', 107)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs46', 108)" onmouseover="showTip(event, 'fs46', 108)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 109)" onmouseover="showTip(event, 'fs55', 109)" class="id">Symbol</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 110)" onmouseover="showTip(event, 'fs26', 110)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs58', 111)" onmouseover="showTip(event, 'fs58', 111)" class="id">collect</span> <span onmouseout="hideTip(event, 'fs40', 112)" onmouseover="showTip(event, 'fs40', 112)" class="fn">pricesToReturns</span>
</code></pre>
<p>Now for all of the price data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 113)" onmouseover="showTip(event, 'fs59', 113)" class="id">tickReturns</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs35', 114)" onmouseover="showTip(event, 'fs35', 114)" class="id">tickPrices</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 115)" onmouseover="showTip(event, 'fs26', 115)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 116)" onmouseover="showTip(event, 'fs57', 116)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 117)" onmouseover="showTip(event, 'fs46', 117)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs46', 118)" onmouseover="showTip(event, 'fs46', 118)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 119)" onmouseover="showTip(event, 'fs55', 119)" class="id">Symbol</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 120)" onmouseover="showTip(event, 'fs26', 120)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs58', 121)" onmouseover="showTip(event, 'fs58', 121)" class="id">collect</span> <span onmouseout="hideTip(event, 'fs40', 122)" onmouseover="showTip(event, 'fs40', 122)" class="fn">pricesToReturns</span>
</code></pre>
<p>And let's convert to excess returns</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 123)" onmouseover="showTip(event, 'fs60', 123)" class="id">rf</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 124)" onmouseover="showTip(event, 'fs61', 124)" class="fn">Map</span> <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs28', 125)" onmouseover="showTip(event, 'fs28', 125)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs19', 126)" onmouseover="showTip(event, 'fs19', 126)" class="id">ff3</span> <span class="k">do</span> <span onmouseout="hideTip(event, 'fs28', 127)" onmouseover="showTip(event, 'fs28', 127)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 128)" onmouseover="showTip(event, 'fs29', 128)" class="id">Date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 129)" onmouseover="showTip(event, 'fs28', 129)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs62', 130)" onmouseover="showTip(event, 'fs62', 130)" class="id">Rf</span> <span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs63', 131)" onmouseover="showTip(event, 'fs63', 131)" class="id">standardInvestmentsExcess</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs64', 132)" onmouseover="showTip(event, 'fs64', 132)" class="fn">maxff3Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 133)" onmouseover="showTip(event, 'fs19', 133)" class="id">ff3</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 134)" onmouseover="showTip(event, 'fs26', 134)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 135)" onmouseover="showTip(event, 'fs27', 135)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 136)" onmouseover="showTip(event, 'fs28', 136)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 137)" onmouseover="showTip(event, 'fs28', 137)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 138)" onmouseover="showTip(event, 'fs29', 138)" class="id">Date</span><span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 139)" onmouseover="showTip(event, 'fs26', 139)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs65', 140)" onmouseover="showTip(event, 'fs65', 140)" class="id">max</span>
    <span onmouseout="hideTip(event, 'fs59', 141)" onmouseover="showTip(event, 'fs59', 141)" class="id">tickReturns</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 142)" onmouseover="showTip(event, 'fs26', 142)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 143)" onmouseover="showTip(event, 'fs54', 143)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 144)" onmouseover="showTip(event, 'fs66', 144)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 145)" onmouseover="showTip(event, 'fs66', 145)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 146)" onmouseover="showTip(event, 'fs67', 146)" class="id">Date</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs64', 147)" onmouseover="showTip(event, 'fs64', 147)" class="fn">maxff3Date</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 148)" onmouseover="showTip(event, 'fs26', 148)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 149)" onmouseover="showTip(event, 'fs27', 149)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 150)" onmouseover="showTip(event, 'fs66', 150)" class="fn">x</span> <span class="k">-&gt;</span> 
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs61', 151)" onmouseover="showTip(event, 'fs61', 151)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs68', 152)" onmouseover="showTip(event, 'fs68', 152)" class="id">tryFind</span> <span onmouseout="hideTip(event, 'fs66', 153)" onmouseover="showTip(event, 'fs66', 153)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 154)" onmouseover="showTip(event, 'fs67', 154)" class="id">Date</span> <span onmouseout="hideTip(event, 'fs60', 155)" onmouseover="showTip(event, 'fs60', 155)" class="id">rf</span> <span class="k">with</span> 
        <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs69', 156)" onmouseover="showTip(event, 'fs69', 156)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs70', 157)" onmouseover="showTip(event, 'fs70', 157)" class="fn">failwith</span> <span class="s">$&quot;why isn&#39;t there a rf for {</span><span onmouseout="hideTip(event, 'fs66', 158)" onmouseover="showTip(event, 'fs66', 158)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 159)" onmouseover="showTip(event, 'fs67', 159)" class="id">Date</span><span class="s">}&quot;</span>
        <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs71', 160)" onmouseover="showTip(event, 'fs71', 160)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs72', 161)" onmouseover="showTip(event, 'fs72', 161)" class="fn">rf</span> <span class="k">-&gt;</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs66', 162)" onmouseover="showTip(event, 'fs66', 162)" class="fn">x</span> <span class="k">with</span> <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 163)" onmouseover="showTip(event, 'fs66', 163)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 164)" onmouseover="showTip(event, 'fs73', 164)" class="id">Return</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs72', 165)" onmouseover="showTip(event, 'fs72', 165)" class="fn">rf</span> <span class="pn">}</span><span class="pn">)</span>
</code></pre>
<p>If we did it right, the <code>VTI</code> return should be pretty similar to the <code>MktRF</code>
return from Ken French's website.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs63', 166)" onmouseover="showTip(event, 'fs63', 166)" class="id">standardInvestmentsExcess</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 167)" onmouseover="showTip(event, 'fs26', 167)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 168)" onmouseover="showTip(event, 'fs54', 168)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 169)" onmouseover="showTip(event, 'fs66', 169)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 170)" onmouseover="showTip(event, 'fs66', 170)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 171)" onmouseover="showTip(event, 'fs74', 171)" class="id">Symbol</span> <span class="o">=</span> <span class="s">&quot;VTI&quot;</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs66', 172)" onmouseover="showTip(event, 'fs66', 172)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 173)" onmouseover="showTip(event, 'fs67', 173)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs75', 174)" onmouseover="showTip(event, 'fs75', 174)" class="id">Year</span> <span class="o">=</span> <span class="n">2021</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 175)" onmouseover="showTip(event, 'fs26', 175)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 176)" onmouseover="showTip(event, 'fs27', 176)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 177)" onmouseover="showTip(event, 'fs66', 177)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 178)" onmouseover="showTip(event, 'fs66', 178)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 179)" onmouseover="showTip(event, 'fs67', 179)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs76', 180)" onmouseover="showTip(event, 'fs76', 180)" class="id">Month</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs77', 181)" onmouseover="showTip(event, 'fs77', 181)" class="fn">round</span> <span class="n">4</span> <span onmouseout="hideTip(event, 'fs66', 182)" onmouseover="showTip(event, 'fs66', 182)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 183)" onmouseover="showTip(event, 'fs73', 183)" class="id">Return</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 184)" onmouseover="showTip(event, 'fs26', 184)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs78', 185)" onmouseover="showTip(event, 'fs78', 185)" class="id">take</span> <span class="n">3</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val it: (int * float) list = [(1, 0.0006); (2, 0.0314); (3, 0.033)]</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs19', 186)" onmouseover="showTip(event, 'fs19', 186)" class="id">ff3</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 187)" onmouseover="showTip(event, 'fs26', 187)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 188)" onmouseover="showTip(event, 'fs54', 188)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 189)" onmouseover="showTip(event, 'fs28', 189)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 190)" onmouseover="showTip(event, 'fs28', 190)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 191)" onmouseover="showTip(event, 'fs29', 191)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs75', 192)" onmouseover="showTip(event, 'fs75', 192)" class="id">Year</span> <span class="o">=</span> <span class="n">2021</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 193)" onmouseover="showTip(event, 'fs26', 193)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 194)" onmouseover="showTip(event, 'fs27', 194)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 195)" onmouseover="showTip(event, 'fs28', 195)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 196)" onmouseover="showTip(event, 'fs28', 196)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 197)" onmouseover="showTip(event, 'fs29', 197)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs76', 198)" onmouseover="showTip(event, 'fs76', 198)" class="id">Month</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs77', 199)" onmouseover="showTip(event, 'fs77', 199)" class="fn">round</span> <span class="n">4</span> <span onmouseout="hideTip(event, 'fs28', 200)" onmouseover="showTip(event, 'fs28', 200)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 201)" onmouseover="showTip(event, 'fs31', 201)" class="id">MktRf</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 202)" onmouseover="showTip(event, 'fs26', 202)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs78', 203)" onmouseover="showTip(event, 'fs78', 203)" class="id">take</span> <span class="n">3</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val it: (int * float) list = [(1, -0.0003); (2, 0.0278); (3, 0.0308)]</code></pre></td></tr></table>
<p>Let's create a function that calculates covariances
for two securities using mutually overlapping data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Excess return by symbol</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 204)" onmouseover="showTip(event, 'fs79', 204)" class="id">returnMap</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs63', 205)" onmouseover="showTip(event, 'fs63', 205)" class="id">standardInvestmentsExcess</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 206)" onmouseover="showTip(event, 'fs26', 206)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 207)" onmouseover="showTip(event, 'fs27', 207)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 208)" onmouseover="showTip(event, 'fs66', 208)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs66', 209)" onmouseover="showTip(event, 'fs66', 209)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 210)" onmouseover="showTip(event, 'fs74', 210)" class="id">Symbol</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 211)" onmouseover="showTip(event, 'fs66', 211)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 212)" onmouseover="showTip(event, 'fs67', 212)" class="id">Date</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 213)" onmouseover="showTip(event, 'fs66', 213)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 214)" onmouseover="showTip(event, 'fs73', 214)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs61', 215)" onmouseover="showTip(event, 'fs61', 215)" class="fn">Map</span>

<span onmouseout="hideTip(event, 'fs79', 216)" onmouseover="showTip(event, 'fs79', 216)" class="id">returnMap</span><span class="pn">[</span><span class="s">&quot;VTI&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs17', 217)" onmouseover="showTip(event, 'fs17', 217)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2015</span><span class="pn">,</span><span class="n">12</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">]</span>
</code></pre>
<p>Now the cov</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 218)" onmouseover="showTip(event, 'fs80', 218)" class="fn">getCov</span> <span onmouseout="hideTip(event, 'fs81', 219)" onmouseover="showTip(event, 'fs81', 219)" class="fn">xId</span> <span onmouseout="hideTip(event, 'fs82', 220)" onmouseover="showTip(event, 'fs82', 220)" class="fn">yId</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs83', 221)" onmouseover="showTip(event, 'fs83', 221)" class="fn">xs</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs63', 222)" onmouseover="showTip(event, 'fs63', 222)" class="id">standardInvestmentsExcess</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 223)" onmouseover="showTip(event, 'fs26', 223)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 224)" onmouseover="showTip(event, 'fs54', 224)" class="id">filter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 225)" onmouseover="showTip(event, 'fs66', 225)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 226)" onmouseover="showTip(event, 'fs66', 226)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 227)" onmouseover="showTip(event, 'fs74', 227)" class="id">Symbol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs81', 228)" onmouseover="showTip(event, 'fs81', 228)" class="fn">xId</span><span class="pn">)</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs66', 229)" onmouseover="showTip(event, 'fs66', 229)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs83', 230)" onmouseover="showTip(event, 'fs83', 230)" class="fn">xs</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 231)" onmouseover="showTip(event, 'fs84', 231)" class="fn">yLookup</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs82', 232)" onmouseover="showTip(event, 'fs82', 232)" class="fn">yId</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 233)" onmouseover="showTip(event, 'fs66', 233)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 234)" onmouseover="showTip(event, 'fs67', 234)" class="id">Date</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs79', 235)" onmouseover="showTip(event, 'fs79', 235)" class="id">returnMap</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs85', 236)" onmouseover="showTip(event, 'fs85', 236)" class="id">ContainsKey</span> <span onmouseout="hideTip(event, 'fs84', 237)" onmouseover="showTip(event, 'fs84', 237)" class="fn">yLookup</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs66', 238)" onmouseover="showTip(event, 'fs66', 238)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 239)" onmouseover="showTip(event, 'fs73', 239)" class="id">Return</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs79', 240)" onmouseover="showTip(event, 'fs79', 240)" class="id">returnMap</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs84', 241)" onmouseover="showTip(event, 'fs84', 241)" class="fn">yLookup</span><span class="pn">]</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs86', 242)" onmouseover="showTip(event, 'fs86', 242)" class="fn">covOfPairs</span>

<span onmouseout="hideTip(event, 'fs80', 243)" onmouseover="showTip(event, 'fs80', 243)" class="fn">getCov</span> <span class="s">&quot;VBR&quot;</span> <span class="s">&quot;VTI&quot;</span>
</code></pre>
<p>A covariance matrix.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs87', 244)" onmouseover="showTip(event, 'fs87', 244)" class="id">covariances</span> <span class="o">=</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs88', 245)" onmouseover="showTip(event, 'fs88', 245)" class="fn">rowTick</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs34', 246)" onmouseover="showTip(event, 'fs34', 246)" class="id">tickers</span> <span class="k">do</span> 
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs89', 247)" onmouseover="showTip(event, 'fs89', 247)" class="fn">colTick</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs34', 248)" onmouseover="showTip(event, 'fs34', 248)" class="id">tickers</span> <span class="k">do</span>
            <span onmouseout="hideTip(event, 'fs80', 249)" onmouseover="showTip(event, 'fs80', 249)" class="fn">getCov</span> <span onmouseout="hideTip(event, 'fs88', 250)" onmouseover="showTip(event, 'fs88', 250)" class="fn">rowTick</span> <span onmouseout="hideTip(event, 'fs89', 251)" onmouseover="showTip(event, 'fs89', 251)" class="fn">colTick</span> <span class="pn">]</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs90', 252)" onmouseover="showTip(event, 'fs90', 252)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs91', 253)" onmouseover="showTip(event, 'fs91', 253)" class="id">tensor</span>
</code></pre>
<p>Mean/Average returns</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 254)" onmouseover="showTip(event, 'fs92', 254)" class="id">meansByTick</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs63', 255)" onmouseover="showTip(event, 'fs63', 255)" class="id">standardInvestmentsExcess</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 256)" onmouseover="showTip(event, 'fs26', 256)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 257)" onmouseover="showTip(event, 'fs57', 257)" class="id">groupBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 258)" onmouseover="showTip(event, 'fs66', 258)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 259)" onmouseover="showTip(event, 'fs66', 259)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 260)" onmouseover="showTip(event, 'fs74', 260)" class="id">Symbol</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 261)" onmouseover="showTip(event, 'fs26', 261)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 262)" onmouseover="showTip(event, 'fs27', 262)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs93', 263)" onmouseover="showTip(event, 'fs93', 263)" class="fn">sym</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs83', 264)" onmouseover="showTip(event, 'fs83', 264)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 265)" onmouseover="showTip(event, 'fs94', 265)" class="fn">symAvg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs83', 266)" onmouseover="showTip(event, 'fs83', 266)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 267)" onmouseover="showTip(event, 'fs26', 267)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs95', 268)" onmouseover="showTip(event, 'fs95', 268)" class="id">averageBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 269)" onmouseover="showTip(event, 'fs66', 269)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 270)" onmouseover="showTip(event, 'fs66', 270)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 271)" onmouseover="showTip(event, 'fs73', 271)" class="id">Return</span><span class="pn">)</span>
        <span onmouseout="hideTip(event, 'fs93', 272)" onmouseover="showTip(event, 'fs93', 272)" class="fn">sym</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs94', 273)" onmouseover="showTip(event, 'fs94', 273)" class="fn">symAvg</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs61', 274)" onmouseover="showTip(event, 'fs61', 274)" class="fn">Map</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 275)" onmouseover="showTip(event, 'fs96', 275)" class="id">means</span> <span class="o">=</span>
    <span class="c">// Make sure ticker avg returns are ordered by our ticker list</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs97', 276)" onmouseover="showTip(event, 'fs97', 276)" class="fn">ticker</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs34', 277)" onmouseover="showTip(event, 'fs34', 277)" class="id">tickers</span> <span class="k">do</span> <span onmouseout="hideTip(event, 'fs92', 278)" onmouseover="showTip(event, 'fs92', 278)" class="id">meansByTick</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs97', 279)" onmouseover="showTip(event, 'fs97', 279)" class="fn">ticker</span><span class="pn">]</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs90', 280)" onmouseover="showTip(event, 'fs90', 280)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs91', 281)" onmouseover="showTip(event, 'fs91', 281)" class="id">tensor</span>
</code></pre>
<p>This solution method for finding the tangency portfolio comes from Hilliar, Grinblatt, and Titman 2nd European Edition, Example 5.3.</p>
<p>Since it has the greatest possible Sharpe ratio, that means that you cannot rebalance the portfolio and increase the return per unit of standard deviation.</p>
<p>The solution method relies on the fact that covariance is like marginal variance. At the tangency portfolio, it must be the case that the ratio of each asset's risk premium to it's covariance with the tangency portfolio, <span class="math">\((r_i-r_f)/cov(r_i,r_p)\)</span>, is the same. Because that ratio is the return per unit of "marginal variance" and if it was not equal for all assets, then you could rebalance and increase the portfolio's return while holding the portfolio variance constant.</p>
<p>In the below algebra, we solve for the portfolio that has covariances with each asset equal to the asset's risk premium. Then we relever to have a portfolio weight equal to 1.0 (we can relever like this because everything is in excess returns) and then we are left with the tangency portfolio.</p>
<p>solve A * x = b for x</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs98', 282)" onmouseover="showTip(event, 'fs98', 282)" class="id">w&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 283)" onmouseover="showTip(event, 'fs90', 283)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs99', 284)" onmouseover="showTip(event, 'fs99', 284)" class="id">solve</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs87', 285)" onmouseover="showTip(event, 'fs87', 285)" class="id">covariances</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs96', 286)" onmouseover="showTip(event, 'fs96', 286)" class="id">means</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs100', 287)" onmouseover="showTip(event, 'fs100', 287)" class="id">w</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs98', 288)" onmouseover="showTip(event, 'fs98', 288)" class="id">w&#39;</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs98', 289)" onmouseover="showTip(event, 'fs98', 289)" class="id">w&#39;</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs101', 290)" onmouseover="showTip(event, 'fs101', 290)" class="id">sum</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>&lt;null&gt;</code></pre></td></tr></table>
<p>Portfolio variance</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs102', 291)" onmouseover="showTip(event, 'fs102', 291)" class="id">portVariance</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs100', 292)" onmouseover="showTip(event, 'fs100', 292)" class="id">w</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs103', 293)" onmouseover="showTip(event, 'fs103', 293)" class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs87', 294)" onmouseover="showTip(event, 'fs87', 294)" class="id">covariances</span><span class="pn">)</span><span class="pn">.</span><span class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs100', 295)" onmouseover="showTip(event, 'fs100', 295)" class="id">w</span><span class="pn">)</span>
</code></pre>
<p>Portfolio standard deviation</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs104', 296)" onmouseover="showTip(event, 'fs104', 296)" class="id">portStDev</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs102', 297)" onmouseover="showTip(event, 'fs102', 297)" class="id">portVariance</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs105', 298)" onmouseover="showTip(event, 'fs105', 298)" class="id">sqrt</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<p>Portfolio mean</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs106', 299)" onmouseover="showTip(event, 'fs106', 299)" class="id">portMean</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 300)" onmouseover="showTip(event, 'fs90', 300)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs107', 301)" onmouseover="showTip(event, 'fs107', 301)" class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs100', 302)" onmouseover="showTip(event, 'fs100', 302)" class="id">w</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs96', 303)" onmouseover="showTip(event, 'fs96', 303)" class="id">means</span><span class="pn">)</span>

<span class="c">// equivalent to</span>
<span class="fn">(</span><span onmouseout="hideTip(event, 'fs100', 304)" onmouseover="showTip(event, 'fs100', 304)" class="id">w</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs96', 305)" onmouseover="showTip(event, 'fs96', 305)" class="id">means</span><span class="pn">)</span><span class="pn">.</span><span class="id">sum</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<p>Annualized Sharpe ratio</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs108', 306)" onmouseover="showTip(event, 'fs108', 306)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span><span class="o">*</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs106', 307)" onmouseover="showTip(event, 'fs106', 307)" class="id">portMean</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs104', 308)" onmouseover="showTip(event, 'fs104', 308)" class="id">portStDev</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>tensor(0.9099)</code></pre></td></tr></table>
<p>You can use other methods for constrained optimization.</p>
<p><a href="https://github.com/mathnet/mathnet-numerics/blob/ab1ac92ccab575d51f6967cd785254a46210b4dd/src/Numerics.Tests/OptimizationTests/NonLinearCurveFittingTests.cs#L361">https://github.com/mathnet/mathnet-numerics/blob/ab1ac92ccab575d51f6967cd785254a46210b4dd/src/Numerics.Tests/OptimizationTests/NonLinearCurveFittingTests.cs#L361</a></p>
<h2><a name="Comparing-mean-variance-efficient-to-60-40" class="anchor" href="#Comparing-mean-variance-efficient-to-60-40">Comparing mean-variance efficient to 60/40.</a></h2>
<p>Now let's form the mean-variance efficient portfolios
based on the above optimal weights and compare them to
a 60/40 portfolio over our sample. A 60% stock and 40%
bond portfolio is a common investment portfolio.</p>
<p>Our weights are sorted by <code>symbols</code>. Let's put them into a
Map collection for easier referencing.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs109', 309)" onmouseover="showTip(event, 'fs109', 309)" class="id">weights</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs110', 310)" onmouseover="showTip(event, 'fs110', 310)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs111', 311)" onmouseover="showTip(event, 'fs111', 311)" class="id">zip</span> <span onmouseout="hideTip(event, 'fs34', 312)" onmouseover="showTip(event, 'fs34', 312)" class="id">tickers</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs100', 313)" onmouseover="showTip(event, 'fs100', 313)" class="id">w</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs112', 314)" onmouseover="showTip(event, 'fs112', 314)" class="id">toArray1D</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs18', 315)" onmouseover="showTip(event, 'fs18', 315)" class="vt">float</span><span class="pn">&gt;</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs61', 316)" onmouseover="showTip(event, 'fs61', 316)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs113', 317)" onmouseover="showTip(event, 'fs113', 317)" class="id">ofSeq</span>
</code></pre>
<p>Next, we'd like to get the symbol data grouped by date.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs114', 318)" onmouseover="showTip(event, 'fs114', 318)" class="id">stockDataByDate</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs63', 319)" onmouseover="showTip(event, 'fs63', 319)" class="id">standardInvestmentsExcess</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 320)" onmouseover="showTip(event, 'fs26', 320)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 321)" onmouseover="showTip(event, 'fs57', 321)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 322)" onmouseover="showTip(event, 'fs66', 322)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 323)" onmouseover="showTip(event, 'fs66', 323)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 324)" onmouseover="showTip(event, 'fs67', 324)" class="id">Date</span><span class="pn">)</span> <span class="c">// group all symbols on the same date together.</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 325)" onmouseover="showTip(event, 'fs26', 325)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs45', 326)" onmouseover="showTip(event, 'fs45', 326)" class="id">sortBy</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs115', 327)" onmouseover="showTip(event, 'fs115', 327)" class="fn">dt</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs83', 328)" onmouseover="showTip(event, 'fs83', 328)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs115', 329)" onmouseover="showTip(event, 'fs115', 329)" class="fn">dt</span><span class="pn">)</span> 
</code></pre>
<p>Now if we look we do not have all the symbols on all the dates.
This is because our ETFs (VTI, BND) did not start trading until later in our sample
and our strategy ended at the end of the year, while we have stock quotes
for VTI and BND trading recently.</p>
<p>Compare the first month of data</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs116', 330)" onmouseover="showTip(event, 'fs116', 330)" class="id">firstMonth</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs117', 331)" onmouseover="showTip(event, 'fs117', 331)" class="id">firstMonthDta</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs114', 332)" onmouseover="showTip(event, 'fs114', 332)" class="id">stockDataByDate</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span>

<span class="c">// look at it</span>
<span onmouseout="hideTip(event, 'fs117', 333)" onmouseover="showTip(event, 'fs117', 333)" class="id">firstMonthDta</span>
</code></pre>
<table class="pre"><tr><td><pre><code>[{ Symbol = "VBR"
   Date = 2/1/2010 12:00:00 AM
   Return = 0.05014204166 }; { Symbol = "VUG"
                               Date = 2/1/2010 12:00:00 AM
                               Return = 0.03872022931 };
 { Symbol = "VTI"
   Date = 2/1/2010 12:00:00 AM
   Return = 0.03440022685 }; { Symbol = "BND"
                               Date = 2/1/2010 12:00:00 AM
                               Return = 0.0001255992382 }]</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// How many stocks?</span>
<span onmouseout="hideTip(event, 'fs117', 334)" onmouseover="showTip(event, 'fs117', 334)" class="id">firstMonthDta</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 335)" onmouseover="showTip(event, 'fs118', 335)" class="id">Length</span>
</code></pre>
<table class="pre"><tr><td><pre><code>4</code></pre></td></tr></table>
<p>to the last month of data</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Last item</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs119', 336)" onmouseover="showTip(event, 'fs119', 336)" class="id">lastMonth</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs114', 337)" onmouseover="showTip(event, 'fs114', 337)" class="id">stockDataByDate</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 338)" onmouseover="showTip(event, 'fs26', 338)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs120', 339)" onmouseover="showTip(event, 'fs120', 339)" class="id">last</span> <span class="c">// last date group</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs121', 340)" onmouseover="showTip(event, 'fs121', 340)" class="fn">snd</span> <span class="c">// convert (date, StockData list) -&gt; StockData list</span>
<span class="c">// look at it</span>
<span onmouseout="hideTip(event, 'fs119', 341)" onmouseover="showTip(event, 'fs119', 341)" class="id">lastMonth</span>
</code></pre>
<table class="pre"><tr><td><pre><code>[{ Symbol = "VBR"
   Date = 12/1/2023 12:00:00 AM
   Return = 0.08702258748 }; { Symbol = "VUG"
                               Date = 12/1/2023 12:00:00 AM
                               Return = 0.03692989634 };
 { Symbol = "VTI"
   Date = 12/1/2023 12:00:00 AM
   Return = 0.04413987918 }; { Symbol = "BND"
                               Date = 12/1/2023 12:00:00 AM
                               Return = 0.02843875351 }]</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// How many stocks?</span>
<span onmouseout="hideTip(event, 'fs119', 342)" onmouseover="showTip(event, 'fs119', 342)" class="id">lastMonth</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 343)" onmouseover="showTip(event, 'fs118', 343)" class="id">Length</span>
</code></pre>
<table class="pre"><tr><td><pre><code>4</code></pre></td></tr></table>
<p>What's the first month when you have all 3 assets?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs122', 344)" onmouseover="showTip(event, 'fs122', 344)" class="id">allAssetsStart</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs114', 345)" onmouseover="showTip(event, 'fs114', 345)" class="id">stockDataByDate</span>
    <span class="c">// find the first array element where there are as many stocks as you have symbols</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 346)" onmouseover="showTip(event, 'fs26', 346)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 347)" onmouseover="showTip(event, 'fs123', 347)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs124', 348)" onmouseover="showTip(event, 'fs124', 348)" class="fn">month</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs125', 349)" onmouseover="showTip(event, 'fs125', 349)" class="fn">stocks</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs125', 350)" onmouseover="showTip(event, 'fs125', 350)" class="fn">stocks</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 351)" onmouseover="showTip(event, 'fs118', 351)" class="id">Length</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 352)" onmouseover="showTip(event, 'fs34', 352)" class="id">tickers</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 353)" onmouseover="showTip(event, 'fs118', 353)" class="id">Length</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs126', 354)" onmouseover="showTip(event, 'fs126', 354)" class="fn">fst</span> <span class="c">// convert (month, stocks) to month</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs127', 355)" onmouseover="showTip(event, 'fs127', 355)" class="id">allAssetsEnd</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs114', 356)" onmouseover="showTip(event, 'fs114', 356)" class="id">stockDataByDate</span>
    <span class="c">// find the last array element where there are as many stocks as you have symbols</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 357)" onmouseover="showTip(event, 'fs26', 357)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs128', 358)" onmouseover="showTip(event, 'fs128', 358)" class="id">findBack</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs124', 359)" onmouseover="showTip(event, 'fs124', 359)" class="fn">month</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs125', 360)" onmouseover="showTip(event, 'fs125', 360)" class="fn">stocks</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs125', 361)" onmouseover="showTip(event, 'fs125', 361)" class="fn">stocks</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 362)" onmouseover="showTip(event, 'fs118', 362)" class="id">Length</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 363)" onmouseover="showTip(event, 'fs34', 363)" class="id">tickers</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 364)" onmouseover="showTip(event, 'fs118', 364)" class="id">Length</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs126', 365)" onmouseover="showTip(event, 'fs126', 365)" class="fn">fst</span> <span class="c">// convert (month, stocks) to month</span>
</code></pre>
<p>Ok, let's filter our data between those dates.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs129', 366)" onmouseover="showTip(event, 'fs129', 366)" class="id">stockDataByDateComplete</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs114', 367)" onmouseover="showTip(event, 'fs114', 367)" class="id">stockDataByDate</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 368)" onmouseover="showTip(event, 'fs26', 368)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 369)" onmouseover="showTip(event, 'fs54', 369)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs130', 370)" onmouseover="showTip(event, 'fs130', 370)" class="fn">date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs125', 371)" onmouseover="showTip(event, 'fs125', 371)" class="fn">stocks</span><span class="pn">)</span> <span class="k">-&gt;</span> 
        <span onmouseout="hideTip(event, 'fs130', 372)" onmouseover="showTip(event, 'fs130', 372)" class="fn">date</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs122', 373)" onmouseover="showTip(event, 'fs122', 373)" class="id">allAssetsStart</span> <span class="o">&amp;&amp;</span>
        <span onmouseout="hideTip(event, 'fs130', 374)" onmouseover="showTip(event, 'fs130', 374)" class="fn">date</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs127', 375)" onmouseover="showTip(event, 'fs127', 375)" class="id">allAssetsEnd</span><span class="pn">)</span>
</code></pre>
<p>Double check that we have all assets in all months for this data.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs131', 376)" onmouseover="showTip(event, 'fs131', 376)" class="id">checkOfCompleteData</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs129', 377)" onmouseover="showTip(event, 'fs129', 377)" class="id">stockDataByDateComplete</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 378)" onmouseover="showTip(event, 'fs26', 378)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 379)" onmouseover="showTip(event, 'fs27', 379)" class="id">map</span> <span onmouseout="hideTip(event, 'fs121', 380)" onmouseover="showTip(event, 'fs121', 380)" class="fn">snd</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 381)" onmouseover="showTip(event, 'fs26', 381)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 382)" onmouseover="showTip(event, 'fs54', 382)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs132', 383)" onmouseover="showTip(event, 'fs132', 383)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs132', 384)" onmouseover="showTip(event, 'fs132', 384)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 385)" onmouseover="showTip(event, 'fs118', 385)" class="id">Length</span> <span class="o">&lt;&gt;</span> <span onmouseout="hideTip(event, 'fs34', 386)" onmouseover="showTip(event, 'fs34', 386)" class="id">tickers</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs118', 387)" onmouseover="showTip(event, 'fs118', 387)" class="id">Length</span><span class="pn">)</span> <span class="c">// discard rows where we have all symbols.</span>

<span class="k">if</span> <span class="fn">not</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs26', 388)" onmouseover="showTip(event, 'fs26', 388)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs133', 389)" onmouseover="showTip(event, 'fs133', 389)" class="id">isEmpty</span> <span onmouseout="hideTip(event, 'fs131', 390)" onmouseover="showTip(event, 'fs131', 390)" class="id">checkOfCompleteData</span><span class="pn">)</span> <span class="k">then</span> 
        <span onmouseout="hideTip(event, 'fs70', 391)" onmouseover="showTip(event, 'fs70', 391)" class="fn">failwith</span> <span class="s">&quot;stockDataByDateComplete has months with missing stocks&quot;</span>
</code></pre>
<p>Now let's make my mve and 60/40 ports</p>
<p>To start, let's take a test month so that it is easy to see
what we are doing.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs134', 392)" onmouseover="showTip(event, 'fs134', 392)" class="id">testMonth</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs129', 393)" onmouseover="showTip(event, 'fs129', 393)" class="id">stockDataByDateComplete</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 394)" onmouseover="showTip(event, 'fs26', 394)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 395)" onmouseover="showTip(event, 'fs123', 395)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs130', 396)" onmouseover="showTip(event, 'fs130', 396)" class="fn">date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs125', 397)" onmouseover="showTip(event, 'fs125', 397)" class="fn">stocks</span><span class="pn">)</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs130', 398)" onmouseover="showTip(event, 'fs130', 398)" class="fn">date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs122', 399)" onmouseover="showTip(event, 'fs122', 399)" class="id">allAssetsStart</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs121', 400)" onmouseover="showTip(event, 'fs121', 400)" class="fn">snd</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs135', 401)" onmouseover="showTip(event, 'fs135', 401)" class="id">testBnd</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs134', 402)" onmouseover="showTip(event, 'fs134', 402)" class="id">testMonth</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 403)" onmouseover="showTip(event, 'fs26', 403)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 404)" onmouseover="showTip(event, 'fs123', 404)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 405)" onmouseover="showTip(event, 'fs66', 405)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 406)" onmouseover="showTip(event, 'fs66', 406)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 407)" onmouseover="showTip(event, 'fs74', 407)" class="id">Symbol</span> <span class="o">=</span> <span class="s">&quot;BND&quot;</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs136', 408)" onmouseover="showTip(event, 'fs136', 408)" class="id">testVti</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs134', 409)" onmouseover="showTip(event, 'fs134', 409)" class="id">testMonth</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 410)" onmouseover="showTip(event, 'fs26', 410)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 411)" onmouseover="showTip(event, 'fs123', 411)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 412)" onmouseover="showTip(event, 'fs66', 412)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 413)" onmouseover="showTip(event, 'fs66', 413)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 414)" onmouseover="showTip(event, 'fs74', 414)" class="id">Symbol</span> <span class="o">=</span> <span class="s">&quot;VTI&quot;</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs137', 415)" onmouseover="showTip(event, 'fs137', 415)" class="id">testVBR</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs134', 416)" onmouseover="showTip(event, 'fs134', 416)" class="id">testMonth</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 417)" onmouseover="showTip(event, 'fs26', 417)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 418)" onmouseover="showTip(event, 'fs123', 418)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 419)" onmouseover="showTip(event, 'fs66', 419)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 420)" onmouseover="showTip(event, 'fs66', 420)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 421)" onmouseover="showTip(event, 'fs74', 421)" class="id">Symbol</span> <span class="o">=</span> <span class="s">&quot;VBR&quot;</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs135', 422)" onmouseover="showTip(event, 'fs135', 422)" class="id">testBnd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 423)" onmouseover="showTip(event, 'fs73', 423)" class="id">Return</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs109', 424)" onmouseover="showTip(event, 'fs109', 424)" class="id">weights</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;BND&quot;</span><span class="pn">]</span> <span class="o">+</span>
<span onmouseout="hideTip(event, 'fs136', 425)" onmouseover="showTip(event, 'fs136', 425)" class="id">testVti</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 426)" onmouseover="showTip(event, 'fs73', 426)" class="id">Return</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs109', 427)" onmouseover="showTip(event, 'fs109', 427)" class="id">weights</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;VTI&quot;</span><span class="pn">]</span> <span class="o">+</span>
<span onmouseout="hideTip(event, 'fs137', 428)" onmouseover="showTip(event, 'fs137', 428)" class="id">testVBR</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 429)" onmouseover="showTip(event, 'fs73', 429)" class="id">Return</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs109', 430)" onmouseover="showTip(event, 'fs109', 430)" class="id">weights</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;VBR&quot;</span><span class="pn">]</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.01717007635</code></pre></td></tr></table>
<p>Or, same thing but via iterating through the weights.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs138', 431)" onmouseover="showTip(event, 'fs138', 431)" class="uc">KeyValue</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs41', 432)" onmouseover="showTip(event, 'fs41', 432)" class="fn">symbol</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs139', 433)" onmouseover="showTip(event, 'fs139', 433)" class="fn">weight</span><span class="pn">)</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs109', 434)" onmouseover="showTip(event, 'fs109', 434)" class="id">weights</span> <span class="k">do</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs140', 435)" onmouseover="showTip(event, 'fs140', 435)" class="fn">symbolData</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs134', 436)" onmouseover="showTip(event, 'fs134', 436)" class="id">testMonth</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 437)" onmouseover="showTip(event, 'fs26', 437)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs123', 438)" onmouseover="showTip(event, 'fs123', 438)" class="id">find</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 439)" onmouseover="showTip(event, 'fs66', 439)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 440)" onmouseover="showTip(event, 'fs66', 440)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 441)" onmouseover="showTip(event, 'fs74', 441)" class="id">Symbol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 442)" onmouseover="showTip(event, 'fs41', 442)" class="fn">symbol</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs140', 443)" onmouseover="showTip(event, 'fs140', 443)" class="fn">symbolData</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 444)" onmouseover="showTip(event, 'fs73', 444)" class="id">Return</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs139', 445)" onmouseover="showTip(event, 'fs139', 445)" class="fn">weight</span><span class="pn">]</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 446)" onmouseover="showTip(event, 'fs26', 446)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs141', 447)" onmouseover="showTip(event, 'fs141', 447)" class="id">sum</span>    
</code></pre>
<table class="pre"><tr><td><pre><code>0.01982135984</code></pre></td></tr></table>
<p>Now in a function that takes weights and monthData as input</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs142', 448)" onmouseover="showTip(event, 'fs142', 448)" class="fn">portfolioMonthReturn</span> <span onmouseout="hideTip(event, 'fs109', 449)" onmouseover="showTip(event, 'fs109', 449)" class="fn">weights</span> <span onmouseout="hideTip(event, 'fs143', 450)" onmouseover="showTip(event, 'fs143', 450)" class="fn">monthData</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs109', 451)" onmouseover="showTip(event, 'fs109', 451)" class="fn">weights</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs61', 452)" onmouseover="showTip(event, 'fs61', 452)" class="m">Map</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs144', 453)" onmouseover="showTip(event, 'fs144', 453)" class="id">toList</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 454)" onmouseover="showTip(event, 'fs26', 454)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 455)" onmouseover="showTip(event, 'fs27', 455)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs41', 456)" onmouseover="showTip(event, 'fs41', 456)" class="fn">symbol</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs139', 457)" onmouseover="showTip(event, 'fs139', 457)" class="fn">weight</span><span class="pn">)</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs140', 458)" onmouseover="showTip(event, 'fs140', 458)" class="fn">symbolData</span> <span class="o">=</span> 
            <span class="c">// we&#39;re going to be more safe and use tryFind here so</span>
            <span class="c">// that our function is more reusable</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs143', 459)" onmouseover="showTip(event, 'fs143', 459)" class="fn">monthData</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 460)" onmouseover="showTip(event, 'fs26', 460)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs145', 461)" onmouseover="showTip(event, 'fs145', 461)" class="id">tryFind</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 462)" onmouseover="showTip(event, 'fs66', 462)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 463)" onmouseover="showTip(event, 'fs66', 463)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs74', 464)" onmouseover="showTip(event, 'fs74', 464)" class="id">Symbol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 465)" onmouseover="showTip(event, 'fs41', 465)" class="fn">symbol</span><span class="pn">)</span> <span class="k">with</span>
            <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs69', 466)" onmouseover="showTip(event, 'fs69', 466)" class="uc">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs70', 467)" onmouseover="showTip(event, 'fs70', 467)" class="fn">failwith</span> <span class="s">$&quot;You tried to find {</span><span onmouseout="hideTip(event, 'fs41', 468)" onmouseover="showTip(event, 'fs41', 468)" class="fn">symbol</span><span class="s">} in the data but it was not there&quot;</span>
            <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs71', 469)" onmouseover="showTip(event, 'fs71', 469)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs146', 470)" onmouseover="showTip(event, 'fs146', 470)" class="fn">data</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs146', 471)" onmouseover="showTip(event, 'fs146', 471)" class="fn">data</span>
        <span onmouseout="hideTip(event, 'fs140', 472)" onmouseover="showTip(event, 'fs140', 472)" class="fn">symbolData</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 473)" onmouseover="showTip(event, 'fs73', 473)" class="id">Return</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs139', 474)" onmouseover="showTip(event, 'fs139', 474)" class="fn">weight</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 475)" onmouseover="showTip(event, 'fs26', 475)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs141', 476)" onmouseover="showTip(event, 'fs141', 476)" class="id">sum</span>    
    
<span onmouseout="hideTip(event, 'fs142', 477)" onmouseover="showTip(event, 'fs142', 477)" class="fn">portfolioMonthReturn</span> <span onmouseout="hideTip(event, 'fs109', 478)" onmouseover="showTip(event, 'fs109', 478)" class="id">weights</span> <span onmouseout="hideTip(event, 'fs134', 479)" onmouseover="showTip(event, 'fs134', 479)" class="id">testMonth</span>
</code></pre>
<p>Here's a thought. We just made a function that takes
weights and a month as input. That means that it should
work if we give it different weights.</p>
<p>Let's try to give it 60/40 weights.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs147', 480)" onmouseover="showTip(event, 'fs147', 480)" class="id">weights6040</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 481)" onmouseover="showTip(event, 'fs61', 481)" class="fn">Map</span> <span class="pn">[</span><span class="pn">(</span><span class="s">&quot;VTI&quot;</span><span class="pn">,</span><span class="n">0.6</span><span class="pn">)</span><span class="pn">;</span><span class="pn">(</span><span class="s">&quot;BND&quot;</span><span class="pn">,</span><span class="n">0.4</span><span class="pn">)</span><span class="pn">]</span>

<span onmouseout="hideTip(event, 'fs147', 482)" onmouseover="showTip(event, 'fs147', 482)" class="id">weights6040</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;VTI&quot;</span><span class="pn">]</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs136', 483)" onmouseover="showTip(event, 'fs136', 483)" class="id">testVti</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 484)" onmouseover="showTip(event, 'fs73', 484)" class="id">Return</span> <span class="o">+</span>
<span onmouseout="hideTip(event, 'fs147', 485)" onmouseover="showTip(event, 'fs147', 485)" class="id">weights6040</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;BND&quot;</span><span class="pn">]</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs135', 486)" onmouseover="showTip(event, 'fs135', 486)" class="id">testBnd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 487)" onmouseover="showTip(event, 'fs73', 487)" class="id">Return</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.02069037581</code></pre></td></tr></table>
<p>Now compare to</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs142', 488)" onmouseover="showTip(event, 'fs142', 488)" class="fn">portfolioMonthReturn</span> <span onmouseout="hideTip(event, 'fs147', 489)" onmouseover="showTip(event, 'fs147', 489)" class="id">weights6040</span> <span onmouseout="hideTip(event, 'fs134', 490)" onmouseover="showTip(event, 'fs134', 490)" class="id">testMonth</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.02069037581</code></pre></td></tr></table>
<p>Now we're ready to make our mve and 60/40 portfolios.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs148', 491)" onmouseover="showTip(event, 'fs148', 491)" class="id">portMve</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs129', 492)" onmouseover="showTip(event, 'fs129', 492)" class="id">stockDataByDateComplete</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 493)" onmouseover="showTip(event, 'fs26', 493)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 494)" onmouseover="showTip(event, 'fs27', 494)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs130', 495)" onmouseover="showTip(event, 'fs130', 495)" class="fn">date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs149', 496)" onmouseover="showTip(event, 'fs149', 496)" class="fn">data</span><span class="pn">)</span> <span class="k">-&gt;</span> 
        <span class="pn">{</span> <span class="prop">Symbol</span> <span class="o">=</span> <span class="s">&quot;MVE&quot;</span>
          <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs130', 497)" onmouseover="showTip(event, 'fs130', 497)" class="fn">date</span>
          <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs142', 498)" onmouseover="showTip(event, 'fs142', 498)" class="fn">portfolioMonthReturn</span> <span onmouseout="hideTip(event, 'fs109', 499)" onmouseover="showTip(event, 'fs109', 499)" class="id">weights</span> <span onmouseout="hideTip(event, 'fs149', 500)" onmouseover="showTip(event, 'fs149', 500)" class="fn">data</span> <span class="pn">}</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs150', 501)" onmouseover="showTip(event, 'fs150', 501)" class="id">port6040</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs129', 502)" onmouseover="showTip(event, 'fs129', 502)" class="id">stockDataByDateComplete</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 503)" onmouseover="showTip(event, 'fs26', 503)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 504)" onmouseover="showTip(event, 'fs27', 504)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs130', 505)" onmouseover="showTip(event, 'fs130', 505)" class="fn">date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs149', 506)" onmouseover="showTip(event, 'fs149', 506)" class="fn">data</span><span class="pn">)</span> <span class="k">-&gt;</span> 
        <span class="pn">{</span> <span class="prop">Symbol</span> <span class="o">=</span> <span class="s">&quot;60/40&quot;</span>
          <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs130', 507)" onmouseover="showTip(event, 'fs130', 507)" class="fn">date</span> 
          <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs142', 508)" onmouseover="showTip(event, 'fs142', 508)" class="fn">portfolioMonthReturn</span> <span onmouseout="hideTip(event, 'fs147', 509)" onmouseover="showTip(event, 'fs147', 509)" class="id">weights6040</span> <span onmouseout="hideTip(event, 'fs149', 510)" onmouseover="showTip(event, 'fs149', 510)" class="fn">data</span><span class="pn">}</span> <span class="pn">)</span>
</code></pre>
<p>It is nice to plot cumulative returns.</p>
<p>A function to accumulate returns.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs151', 511)" onmouseover="showTip(event, 'fs151', 511)" class="fn">cumulateReturns</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs83', 512)" onmouseover="showTip(event, 'fs83', 512)" class="fn">xs</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs43', 513)" onmouseover="showTip(event, 'fs43', 513)" class="rt">list</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs15', 514)" onmouseover="showTip(event, 'fs15', 514)" class="rt">StockData</span><span class="pn">&gt;</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs152', 515)" onmouseover="showTip(event, 'fs152', 515)" class="mv">cr</span> <span class="o">=</span> <span class="n">1.0</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs66', 516)" onmouseover="showTip(event, 'fs66', 516)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs83', 517)" onmouseover="showTip(event, 'fs83', 517)" class="fn">xs</span> <span class="k">do</span> 
        <span onmouseout="hideTip(event, 'fs152', 518)" onmouseover="showTip(event, 'fs152', 518)" class="mv">cr</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs152', 519)" onmouseover="showTip(event, 'fs152', 519)" class="mv">cr</span> <span class="o">*</span> <span class="pn">(</span><span class="n">1.0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs66', 520)" onmouseover="showTip(event, 'fs66', 520)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 521)" onmouseover="showTip(event, 'fs73', 521)" class="id">Return</span><span class="pn">)</span>
        <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs66', 522)" onmouseover="showTip(event, 'fs66', 522)" class="fn">x</span> <span class="k">with</span> <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs152', 523)" onmouseover="showTip(event, 'fs152', 523)" class="mv">cr</span> <span class="pn">}</span> <span class="pn">]</span>
    
</code></pre>
<p>Ok, cumulative returns.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs153', 524)" onmouseover="showTip(event, 'fs153', 524)" class="id">portMveCumulative</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs148', 525)" onmouseover="showTip(event, 'fs148', 525)" class="id">portMve</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs151', 526)" onmouseover="showTip(event, 'fs151', 526)" class="fn">cumulateReturns</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs154', 527)" onmouseover="showTip(event, 'fs154', 527)" class="id">port6040Cumulative</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs150', 528)" onmouseover="showTip(event, 'fs150', 528)" class="id">port6040</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs151', 529)" onmouseover="showTip(event, 'fs151', 529)" class="fn">cumulateReturns</span>


<span class="k">let</span> <span onmouseout="hideTip(event, 'fs155', 530)" onmouseover="showTip(event, 'fs155', 530)" class="id">chartMVE</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs153', 531)" onmouseover="showTip(event, 'fs153', 531)" class="id">portMveCumulative</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 532)" onmouseover="showTip(event, 'fs26', 532)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 533)" onmouseover="showTip(event, 'fs27', 533)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 534)" onmouseover="showTip(event, 'fs66', 534)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 535)" onmouseover="showTip(event, 'fs66', 535)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 536)" onmouseover="showTip(event, 'fs67', 536)" class="id">Date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 537)" onmouseover="showTip(event, 'fs66', 537)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 538)" onmouseover="showTip(event, 'fs73', 538)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 539)" onmouseover="showTip(event, 'fs156', 539)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs157', 540)" onmouseover="showTip(event, 'fs157', 540)" class="id">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 541)" onmouseover="showTip(event, 'fs156', 541)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs158', 542)" onmouseover="showTip(event, 'fs158', 542)" class="id">withTraceInfo</span><span class="pn">(</span><span class="fn">Name</span><span class="o">=</span><span class="s">&quot;MVE&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs159', 543)" onmouseover="showTip(event, 'fs159', 543)" class="id">chart6040</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs154', 544)" onmouseover="showTip(event, 'fs154', 544)" class="id">port6040Cumulative</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 545)" onmouseover="showTip(event, 'fs26', 545)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 546)" onmouseover="showTip(event, 'fs27', 546)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 547)" onmouseover="showTip(event, 'fs66', 547)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 548)" onmouseover="showTip(event, 'fs66', 548)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 549)" onmouseover="showTip(event, 'fs67', 549)" class="id">Date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 550)" onmouseover="showTip(event, 'fs66', 550)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 551)" onmouseover="showTip(event, 'fs73', 551)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 552)" onmouseover="showTip(event, 'fs156', 552)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs157', 553)" onmouseover="showTip(event, 'fs157', 553)" class="id">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 554)" onmouseover="showTip(event, 'fs156', 554)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs158', 555)" onmouseover="showTip(event, 'fs158', 555)" class="id">withTraceInfo</span><span class="pn">(</span><span class="fn">Name</span><span class="o">=</span><span class="s">&quot;60/40&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs160', 556)" onmouseover="showTip(event, 'fs160', 556)" class="id">chartCombined</span> <span class="o">=</span>
    <span class="pn">[</span> <span onmouseout="hideTip(event, 'fs155', 557)" onmouseover="showTip(event, 'fs155', 557)" class="id">chartMVE</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs159', 558)" onmouseover="showTip(event, 'fs159', 558)" class="id">chart6040</span> <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 559)" onmouseover="showTip(event, 'fs156', 559)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs161', 560)" onmouseover="showTip(event, 'fs161', 560)" class="id">combine</span>
</code></pre>
<div id="f6d94952-21ac-49f6-bfe0-69dde715f333"><!-- Plotly chart will be drawn inside this DIV --></div>
<script type="text/javascript">

            var renderPlotly_f6d9495221ac49f6bfe069dde715f333 = function() {
            var fsharpPlotlyRequire = requirejs.config({context:'fsharp-plotly',paths:{plotly:'https://cdn.plot.ly/plotly-2.6.3.min'}}) || require;
            fsharpPlotlyRequire(['plotly'], function(Plotly) {

            var data = [{"type":"scatter","mode":"lines","x":["2010-02-01T00:00:00","2010-03-01T00:00:00","2010-04-01T00:00:00","2010-05-01T00:00:00","2010-06-01T00:00:00","2010-07-01T00:00:00","2010-08-01T00:00:00","2010-09-01T00:00:00","2010-10-01T00:00:00","2010-11-01T00:00:00","2010-12-01T00:00:00","2011-01-01T00:00:00","2011-02-01T00:00:00","2011-03-01T00:00:00","2011-04-01T00:00:00","2011-05-01T00:00:00","2011-06-01T00:00:00","2011-07-01T00:00:00","2011-08-01T00:00:00","2011-09-01T00:00:00","2011-10-01T00:00:00","2011-11-01T00:00:00","2011-12-01T00:00:00","2012-01-01T00:00:00","2012-02-01T00:00:00","2012-03-01T00:00:00","2012-04-01T00:00:00","2012-05-01T00:00:00","2012-06-01T00:00:00","2012-07-01T00:00:00","2012-08-01T00:00:00","2012-09-01T00:00:00","2012-10-01T00:00:00","2012-11-01T00:00:00","2012-12-01T00:00:00","2013-01-01T00:00:00","2013-02-01T00:00:00","2013-03-01T00:00:00","2013-04-01T00:00:00","2013-05-01T00:00:00","2013-06-01T00:00:00","2013-07-01T00:00:00","2013-08-01T00:00:00","2013-09-01T00:00:00","2013-10-01T00:00:00","2013-11-01T00:00:00","2013-12-01T00:00:00","2014-01-01T00:00:00","2014-02-01T00:00:00","2014-03-01T00:00:00","2014-04-01T00:00:00","2014-05-01T00:00:00","2014-06-01T00:00:00","2014-07-01T00:00:00","2014-08-01T00:00:00","2014-09-01T00:00:00","2014-10-01T00:00:00","2014-11-01T00:00:00","2014-12-01T00:00:00","2015-01-01T00:00:00","2015-02-01T00:00:00","2015-03-01T00:00:00","2015-04-01T00:00:00","2015-05-01T00:00:00","2015-06-01T00:00:00","2015-07-01T00:00:00","2015-08-01T00:00:00","2015-09-01T00:00:00","2015-10-01T00:00:00","2015-11-01T00:00:00","2015-12-01T00:00:00","2016-01-01T00:00:00","2016-02-01T00:00:00","2016-03-01T00:00:00","2016-04-01T00:00:00","2016-05-01T00:00:00","2016-06-01T00:00:00","2016-07-01T00:00:00","2016-08-01T00:00:00","2016-09-01T00:00:00","2016-10-01T00:00:00","2016-11-01T00:00:00","2016-12-01T00:00:00","2017-01-01T00:00:00","2017-02-01T00:00:00","2017-03-01T00:00:00","2017-04-01T00:00:00","2017-05-01T00:00:00","2017-06-01T00:00:00","2017-07-01T00:00:00","2017-08-01T00:00:00","2017-09-01T00:00:00","2017-10-01T00:00:00","2017-11-01T00:00:00","2017-12-01T00:00:00","2018-01-01T00:00:00","2018-02-01T00:00:00","2018-03-01T00:00:00","2018-04-01T00:00:00","2018-05-01T00:00:00","2018-06-01T00:00:00","2018-07-01T00:00:00","2018-08-01T00:00:00","2018-09-01T00:00:00","2018-10-01T00:00:00","2018-11-01T00:00:00","2018-12-01T00:00:00","2019-01-01T00:00:00","2019-02-01T00:00:00","2019-03-01T00:00:00","2019-04-01T00:00:00","2019-05-01T00:00:00","2019-06-01T00:00:00","2019-07-01T00:00:00","2019-08-01T00:00:00","2019-09-01T00:00:00","2019-10-01T00:00:00","2019-11-01T00:00:00","2019-12-01T00:00:00","2020-01-01T00:00:00","2020-02-01T00:00:00","2020-03-01T00:00:00","2020-04-01T00:00:00","2020-05-01T00:00:00","2020-06-01T00:00:00","2020-07-01T00:00:00","2020-08-01T00:00:00","2020-09-01T00:00:00","2020-10-01T00:00:00","2020-11-01T00:00:00","2020-12-01T00:00:00","2021-01-01T00:00:00","2021-02-01T00:00:00","2021-03-01T00:00:00","2021-04-01T00:00:00","2021-05-01T00:00:00","2021-06-01T00:00:00","2021-07-01T00:00:00","2021-08-01T00:00:00","2021-09-01T00:00:00","2021-10-01T00:00:00","2021-11-01T00:00:00","2021-12-01T00:00:00","2022-01-01T00:00:00","2022-02-01T00:00:00","2022-03-01T00:00:00","2022-04-01T00:00:00","2022-05-01T00:00:00","2022-06-01T00:00:00","2022-07-01T00:00:00","2022-08-01T00:00:00","2022-09-01T00:00:00","2022-10-01T00:00:00","2022-11-01T00:00:00","2022-12-01T00:00:00","2023-01-01T00:00:00","2023-02-01T00:00:00","2023-03-01T00:00:00","2023-04-01T00:00:00","2023-05-01T00:00:00","2023-06-01T00:00:00","2023-07-01T00:00:00","2023-08-01T00:00:00","2023-09-01T00:00:00","2023-10-01T00:00:00","2023-11-01T00:00:00","2023-12-01T00:00:00"],"y":[1.0198213598388743,1.0584231285470667,1.0532950734878852,0.9775407210876417,0.9360685023447711,1.0026327122739802,0.9753010092085882,1.0447966850952182,1.0976873008220727,1.087362854588516,1.1552072500336825,1.1842594165691303,1.2146441581831742,1.200503022855968,1.2479759535186719,1.2474609549849625,1.2206639363271201,1.216538075979692,1.1697552890971559,1.1070663333804203,1.208210034450613,1.2019309338859485,1.2220754899098984,1.2537319410135759,1.3193292660612117,1.3540704529255905,1.3604997432884265,1.2839263394338984,1.3154027796358145,1.352277396126695,1.3837325800120173,1.4003040810645875,1.3745294700305335,1.3831722206447916,1.3859299045390632,1.4312397030964912,1.444385814999806,1.4790135753459333,1.5307583539766545,1.554603516747211,1.5171584392896198,1.5977665249725037,1.5674598015264254,1.5958910092562506,1.6777657650594953,1.7159617251399115,1.7683948803183087,1.7042547754777027,1.7808838734163133,1.7625129245581135,1.793657287671576,1.8382893741418855,1.8451790580137697,1.864199421862811,1.9238737881680368,1.923482997586289,1.95725252839117,2.0252893860862184,2.0035590828310013,1.9586214670589217,2.06240981893383,1.98254501340287,2.040645731117652,2.0635280557220455,2.012564767285888,2.104181605982628,1.9642946776489714,1.923387079005791,2.0841007616367064,2.0827373318282763,2.07766463090308,1.9874444123677921,1.9637416662374367,2.0556246968885348,2.053512255381769,2.092651710333033,2.090886363238062,2.169531783077824,2.163144527959685,2.1583240070619505,2.131767325366416,2.115843821277983,2.126923323895635,2.1980794649051822,2.3030115437009604,2.3089688459430096,2.3563800265798527,2.4440669127148316,2.4209169062884963,2.492014519869775,2.528303248992162,2.5217304118263133,2.606145587791165,2.6730823762239,2.704464896725146,2.9129381196056263,2.829596076823715,2.704797612148158,2.72059167514999,2.7515986716235727,2.7621665420434307,2.8715156813355227,2.9848498362146927,3.0177846450215693,2.8487248640710097,2.887661456231299,2.681421894704798,2.848803279361026,2.927396632110116,3.027818553447148,3.1504799190703197,3.0018864222243993,3.19505621057059,3.2552220141459136,3.2827898847696786,3.253903160237736,3.339158922397831,3.4867431906330792,3.5608808936247054,3.673040419786536,3.4671829728353707,3.3078254046852953,3.741634521586545,3.9517923254903424,4.036156328269778,4.3540322835376655,4.730148998602986,4.566223472125215,4.305843909280515,4.586036113104272,4.696781301550721,4.599702052948199,4.516764244489313,4.588937825882017,4.860228964268732,4.807627905593927,5.053250242949511,5.289342687549047,5.463488699278607,5.137349740840098,5.559343049515561,5.561282167576781,5.692264197607449,5.283216947350937,4.978907351288024,5.171347409391922,4.602797982223766,4.509949677765538,4.21876147336948,4.595950920219221,4.379750791865105,3.9915198735781185,4.15872900053546,4.342671420927142,4.065801950405301,4.275547002739042,4.154771620102097,4.528410481920133,4.641729978916361,4.7941627225860595,4.958795030416106,5.0444238588909,4.990166098448609,4.725896022875124,4.675701164085426,5.113021775338017,5.158636027729156],"marker":{},"line":{},"name":"MVE"},{"type":"scatter","mode":"lines","x":["2010-02-01T00:00:00","2010-03-01T00:00:00","2010-04-01T00:00:00","2010-05-01T00:00:00","2010-06-01T00:00:00","2010-07-01T00:00:00","2010-08-01T00:00:00","2010-09-01T00:00:00","2010-10-01T00:00:00","2010-11-01T00:00:00","2010-12-01T00:00:00","2011-01-01T00:00:00","2011-02-01T00:00:00","2011-03-01T00:00:00","2011-04-01T00:00:00","2011-05-01T00:00:00","2011-06-01T00:00:00","2011-07-01T00:00:00","2011-08-01T00:00:00","2011-09-01T00:00:00","2011-10-01T00:00:00","2011-11-01T00:00:00","2011-12-01T00:00:00","2012-01-01T00:00:00","2012-02-01T00:00:00","2012-03-01T00:00:00","2012-04-01T00:00:00","2012-05-01T00:00:00","2012-06-01T00:00:00","2012-07-01T00:00:00","2012-08-01T00:00:00","2012-09-01T00:00:00","2012-10-01T00:00:00","2012-11-01T00:00:00","2012-12-01T00:00:00","2013-01-01T00:00:00","2013-02-01T00:00:00","2013-03-01T00:00:00","2013-04-01T00:00:00","2013-05-01T00:00:00","2013-06-01T00:00:00","2013-07-01T00:00:00","2013-08-01T00:00:00","2013-09-01T00:00:00","2013-10-01T00:00:00","2013-11-01T00:00:00","2013-12-01T00:00:00","2014-01-01T00:00:00","2014-02-01T00:00:00","2014-03-01T00:00:00","2014-04-01T00:00:00","2014-05-01T00:00:00","2014-06-01T00:00:00","2014-07-01T00:00:00","2014-08-01T00:00:00","2014-09-01T00:00:00","2014-10-01T00:00:00","2014-11-01T00:00:00","2014-12-01T00:00:00","2015-01-01T00:00:00","2015-02-01T00:00:00","2015-03-01T00:00:00","2015-04-01T00:00:00","2015-05-01T00:00:00","2015-06-01T00:00:00","2015-07-01T00:00:00","2015-08-01T00:00:00","2015-09-01T00:00:00","2015-10-01T00:00:00","2015-11-01T00:00:00","2015-12-01T00:00:00","2016-01-01T00:00:00","2016-02-01T00:00:00","2016-03-01T00:00:00","2016-04-01T00:00:00","2016-05-01T00:00:00","2016-06-01T00:00:00","2016-07-01T00:00:00","2016-08-01T00:00:00","2016-09-01T00:00:00","2016-10-01T00:00:00","2016-11-01T00:00:00","2016-12-01T00:00:00","2017-01-01T00:00:00","2017-02-01T00:00:00","2017-03-01T00:00:00","2017-04-01T00:00:00","2017-05-01T00:00:00","2017-06-01T00:00:00","2017-07-01T00:00:00","2017-08-01T00:00:00","2017-09-01T00:00:00","2017-10-01T00:00:00","2017-11-01T00:00:00","2017-12-01T00:00:00","2018-01-01T00:00:00","2018-02-01T00:00:00","2018-03-01T00:00:00","2018-04-01T00:00:00","2018-05-01T00:00:00","2018-06-01T00:00:00","2018-07-01T00:00:00","2018-08-01T00:00:00","2018-09-01T00:00:00","2018-10-01T00:00:00","2018-11-01T00:00:00","2018-12-01T00:00:00","2019-01-01T00:00:00","2019-02-01T00:00:00","2019-03-01T00:00:00","2019-04-01T00:00:00","2019-05-01T00:00:00","2019-06-01T00:00:00","2019-07-01T00:00:00","2019-08-01T00:00:00","2019-09-01T00:00:00","2019-10-01T00:00:00","2019-11-01T00:00:00","2019-12-01T00:00:00","2020-01-01T00:00:00","2020-02-01T00:00:00","2020-03-01T00:00:00","2020-04-01T00:00:00","2020-05-01T00:00:00","2020-06-01T00:00:00","2020-07-01T00:00:00","2020-08-01T00:00:00","2020-09-01T00:00:00","2020-10-01T00:00:00","2020-11-01T00:00:00","2020-12-01T00:00:00","2021-01-01T00:00:00","2021-02-01T00:00:00","2021-03-01T00:00:00","2021-04-01T00:00:00","2021-05-01T00:00:00","2021-06-01T00:00:00","2021-07-01T00:00:00","2021-08-01T00:00:00","2021-09-01T00:00:00","2021-10-01T00:00:00","2021-11-01T00:00:00","2021-12-01T00:00:00","2022-01-01T00:00:00","2022-02-01T00:00:00","2022-03-01T00:00:00","2022-04-01T00:00:00","2022-05-01T00:00:00","2022-06-01T00:00:00","2022-07-01T00:00:00","2022-08-01T00:00:00","2022-09-01T00:00:00","2022-10-01T00:00:00","2022-11-01T00:00:00","2022-12-01T00:00:00","2023-01-01T00:00:00","2023-02-01T00:00:00","2023-03-01T00:00:00","2023-04-01T00:00:00","2023-05-01T00:00:00","2023-06-01T00:00:00","2023-07-01T00:00:00","2023-08-01T00:00:00","2023-09-01T00:00:00","2023-10-01T00:00:00","2023-11-01T00:00:00","2023-12-01T00:00:00"],"y":[1.020690375805994,1.0563500023037045,1.0770961739213127,1.0309545500291155,0.9978796229914748,1.0464375806926858,1.023268329381237,1.0778283343640946,1.1086315289427626,1.108868924669322,1.1435949587401628,1.1662660862911354,1.1920813050865646,1.191337324912347,1.2219916152654136,1.220030464475212,1.2019823219583263,1.1964972132387268,1.160603177351822,1.107625640985648,1.1875811265933875,1.1846572751274391,1.189761588311007,1.23784846424926,1.2681778902360417,1.2856475081748266,1.2891837242265745,1.246251403320085,1.272934569764401,1.2897906424002246,1.3114166393418978,1.327945236116417,1.316762509380787,1.3241376674348861,1.3226917203528288,1.3692594723114222,1.381626211600345,1.4109517161993697,1.4331728471085625,1.444123225721157,1.4181092622267484,1.4733565625106242,1.4415100714261866,1.4772673422114004,1.5246251410880505,1.5474958011755042,1.5621288288182096,1.5501711402060698,1.5970365645993838,1.5966370246106858,1.6063938084436067,1.6335239266968706,1.655631392634681,1.6380502154672787,1.6863186382174173,1.6567056212450464,1.6935867397237159,1.7243273308116585,1.7157857355093942,1.7140681091108732,1.7627979524641781,1.7495164373041951,1.758420980843863,1.7688770984523858,1.7387041022676641,1.7671192886623175,1.7007504452839213,1.6714162311036662,1.7564997311799433,1.7600223024315438,1.7283389461077576,1.6861209101429793,1.6899717953166589,1.762723224349009,1.7772721253690675,1.7956187734299451,1.8079130094391518,1.860059171500794,1.859653740232956,1.856916986398095,1.8305004471977568,1.8607607406347348,1.875852295921594,1.9079573895287283,1.9526031026851596,1.947195275167699,1.970011388949422,1.986448629933888,1.9914080110600783,2.0213238464470615,2.0299334845523944,2.050337551378198,2.0804284200685763,2.115648180427033,2.124635181275271,2.1887483698715697,2.125991326691822,2.099495779730425,2.0998376106460155,2.1371261426169736,2.137260715573688,2.183724287525227,2.2309728896009178,2.2190058908278236,2.114395577323471,2.141371849995384,2.026277602784481,2.1466899656018996,2.18576824076645,2.210143414304304,2.264644366302126,2.1888425284065045,2.283620663012242,2.305180426074978,2.29822912578739,2.3071151683878885,2.3419715177672007,2.391966206911019,2.4181117494445616,2.445408629924385,2.3392917036066883,2.1221470403638554,2.319747674884379,2.401051650486971,2.4337519266309027,2.538645461902495,2.6371057722444355,2.573644420021658,2.543798155930596,2.7360149880139684,2.803729660280822,2.8004618503638428,2.8341210346017123,2.875985274851367,2.9780082632680784,2.9888620807069706,3.0384432456052277,3.0900354694942527,3.140654442402303,3.0381421884584343,3.167087511346919,3.1418595789813093,3.198167386786922,3.067919361177385,3.0061782314636925,3.0258822004622785,2.815789033397576,2.820769968187462,2.654741659468128,2.8336988869018667,2.733202203741282,2.524504770434926,2.636748708905646,2.7494051662552095,2.624905691775232,2.77272294905431,2.6912103496970383,2.7474981939603627,2.7685919626180735,2.752876710090957,2.843696714394899,2.8988403804221847,2.8443931594384546,2.7160105117472226,2.6494045223097658,2.835311394716121,2.9426546648987038],"marker":{},"line":{},"name":"60/40"}];
            var layout = {"width":600,"height":600,"template":{"layout":{"title":{"x":0.05},"font":{"color":"rgba(42, 63, 95, 1.0)"},"paper_bgcolor":"rgba(255, 255, 255, 1.0)","plot_bgcolor":"rgba(229, 236, 246, 1.0)","autotypenumbers":"strict","colorscale":{"diverging":[[0.0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1.0,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"hovermode":"closest","hoverlabel":{"align":"left"},"coloraxis":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"geo":{"showland":true,"landcolor":"rgba(229, 236, 246, 1.0)","showlakes":true,"lakecolor":"rgba(255, 255, 255, 1.0)","subunitcolor":"rgba(255, 255, 255, 1.0)","bgcolor":"rgba(255, 255, 255, 1.0)"},"mapbox":{"style":"light"},"polar":{"bgcolor":"rgba(229, 236, 246, 1.0)","radialaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""},"angularaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""}},"scene":{"xaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"yaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"zaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true}},"ternary":{"aaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"baxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"caxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"bgcolor":"rgba(229, 236, 246, 1.0)"},"xaxis":{"title":{"standoff":15},"ticks":"","automargin":true,"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"yaxis":{"title":{"standoff":15},"ticks":"","automargin":true,"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"shapedefaults":{"line":{"color":"rgba(42, 63, 95, 1.0)"}},"colorway":["rgba(99, 110, 250, 1.0)","rgba(239, 85, 59, 1.0)","rgba(0, 204, 150, 1.0)","rgba(171, 99, 250, 1.0)","rgba(255, 161, 90, 1.0)","rgba(25, 211, 243, 1.0)","rgba(255, 102, 146, 1.0)","rgba(182, 232, 128, 1.0)","rgba(255, 151, 255, 1.0)","rgba(254, 203, 82, 1.0)"]},"data":{"bar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"error_x":{"color":"rgba(42, 63, 95, 1.0)"},"error_y":{"color":"rgba(42, 63, 95, 1.0)"}}],"barpolar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"carpet":[{"aaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"},"baxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"}}],"choropleth":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"heatmap":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"histogram2d":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"pie":[{"automargin":true}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatter3d":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"surface":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"table":[{"cells":{"fill":{"color":"rgba(235, 240, 248, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}},"header":{"fill":{"color":"rgba(200, 212, 227, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}}}]}}};
            var config = {"responsive":true};
            Plotly.newPlot('f6d94952-21ac-49f6-bfe0-69dde715f333', data, layout, config);
});
            };
            if ((typeof(requirejs) !==  typeof(Function)) || (typeof(requirejs.config) !== typeof(Function))) {
                var script = document.createElement("script");
                script.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js");
                script.onload = function(){
                    renderPlotly_f6d9495221ac49f6bfe069dde715f333();
                };
                document.getElementsByTagName("head")[0].appendChild(script);
            }
            else {
                renderPlotly_f6d9495221ac49f6bfe069dde715f333();
            }
</script>

<p>Those are partly going to differ because they have different volatilities.
It we want to have a sense for which is better per unit of volatility,
then it can make sense to normalize volatilities.</p>
<p>First compare the MVE vol</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs148', 564)" onmouseover="showTip(event, 'fs148', 564)" class="id">portMve</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 565)" onmouseover="showTip(event, 'fs26', 565)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 566)" onmouseover="showTip(event, 'fs27', 566)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 567)" onmouseover="showTip(event, 'fs66', 567)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 568)" onmouseover="showTip(event, 'fs66', 568)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 569)" onmouseover="showTip(event, 'fs73', 569)" class="id">Return</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 570)" onmouseover="showTip(event, 'fs110', 570)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs164', 571)" onmouseover="showTip(event, 'fs164', 571)" class="id">stDev</span>
<span class="o">|&gt;</span> <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs165', 572)" onmouseover="showTip(event, 'fs165', 572)" class="fn">vol</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs108', 573)" onmouseover="showTip(event, 'fs108', 573)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs165', 574)" onmouseover="showTip(event, 'fs165', 574)" class="fn">vol</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.1410362071</code></pre></td></tr></table>
<p>To the 60/40 vol.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs150', 575)" onmouseover="showTip(event, 'fs150', 575)" class="id">port6040</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 576)" onmouseover="showTip(event, 'fs26', 576)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 577)" onmouseover="showTip(event, 'fs27', 577)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 578)" onmouseover="showTip(event, 'fs66', 578)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 579)" onmouseover="showTip(event, 'fs66', 579)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 580)" onmouseover="showTip(event, 'fs73', 580)" class="id">Return</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 581)" onmouseover="showTip(event, 'fs110', 581)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs164', 582)" onmouseover="showTip(event, 'fs164', 582)" class="id">stDev</span>
<span class="o">|&gt;</span> <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs165', 583)" onmouseover="showTip(event, 'fs165', 583)" class="fn">vol</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs108', 584)" onmouseover="showTip(event, 'fs108', 584)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs165', 585)" onmouseover="showTip(event, 'fs165', 585)" class="fn">vol</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.09997592207</code></pre></td></tr></table>
<p>Ok, cumulative returns of the normalized vol returns.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs166', 586)" onmouseover="showTip(event, 'fs166', 586)" class="fn">normalize10pctVol</span> <span onmouseout="hideTip(event, 'fs83', 587)" onmouseover="showTip(event, 'fs83', 587)" class="fn">xs</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs165', 588)" onmouseover="showTip(event, 'fs165', 588)" class="fn">vol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs83', 589)" onmouseover="showTip(event, 'fs83', 589)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 590)" onmouseover="showTip(event, 'fs26', 590)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 591)" onmouseover="showTip(event, 'fs27', 591)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 592)" onmouseover="showTip(event, 'fs66', 592)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 593)" onmouseover="showTip(event, 'fs66', 593)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 594)" onmouseover="showTip(event, 'fs73', 594)" class="id">Return</span><span class="pn">)</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 595)" onmouseover="showTip(event, 'fs110', 595)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs164', 596)" onmouseover="showTip(event, 'fs164', 596)" class="id">stDev</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs167', 597)" onmouseover="showTip(event, 'fs167', 597)" class="fn">annualizedVol</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs165', 598)" onmouseover="showTip(event, 'fs165', 598)" class="fn">vol</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs108', 599)" onmouseover="showTip(event, 'fs108', 599)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs83', 600)" onmouseover="showTip(event, 'fs83', 600)" class="fn">xs</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 601)" onmouseover="showTip(event, 'fs26', 601)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 602)" onmouseover="showTip(event, 'fs27', 602)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 603)" onmouseover="showTip(event, 'fs66', 603)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs66', 604)" onmouseover="showTip(event, 'fs66', 604)" class="fn">x</span> <span class="k">with</span> <span class="prop">Return</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 605)" onmouseover="showTip(event, 'fs66', 605)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 606)" onmouseover="showTip(event, 'fs73', 606)" class="id">Return</span> <span class="o">*</span> <span class="pn">(</span><span class="n">0.1</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs167', 607)" onmouseover="showTip(event, 'fs167', 607)" class="fn">annualizedVol</span><span class="pn">)</span><span class="pn">}</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs168', 608)" onmouseover="showTip(event, 'fs168', 608)" class="id">portMveCumulativeNormlizedVol</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs148', 609)" onmouseover="showTip(event, 'fs148', 609)" class="id">portMve</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 610)" onmouseover="showTip(event, 'fs166', 610)" class="fn">normalize10pctVol</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs151', 611)" onmouseover="showTip(event, 'fs151', 611)" class="fn">cumulateReturns</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs169', 612)" onmouseover="showTip(event, 'fs169', 612)" class="id">port6040CumulativeNormlizedVol</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs150', 613)" onmouseover="showTip(event, 'fs150', 613)" class="id">port6040</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs166', 614)" onmouseover="showTip(event, 'fs166', 614)" class="fn">normalize10pctVol</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs151', 615)" onmouseover="showTip(event, 'fs151', 615)" class="fn">cumulateReturns</span>


<span class="k">let</span> <span onmouseout="hideTip(event, 'fs170', 616)" onmouseover="showTip(event, 'fs170', 616)" class="id">chartMVENormlizedVol</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs168', 617)" onmouseover="showTip(event, 'fs168', 617)" class="id">portMveCumulativeNormlizedVol</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 618)" onmouseover="showTip(event, 'fs26', 618)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 619)" onmouseover="showTip(event, 'fs27', 619)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 620)" onmouseover="showTip(event, 'fs66', 620)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 621)" onmouseover="showTip(event, 'fs66', 621)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 622)" onmouseover="showTip(event, 'fs67', 622)" class="id">Date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 623)" onmouseover="showTip(event, 'fs66', 623)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 624)" onmouseover="showTip(event, 'fs73', 624)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 625)" onmouseover="showTip(event, 'fs156', 625)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs157', 626)" onmouseover="showTip(event, 'fs157', 626)" class="id">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 627)" onmouseover="showTip(event, 'fs156', 627)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs158', 628)" onmouseover="showTip(event, 'fs158', 628)" class="id">withTraceInfo</span><span class="pn">(</span><span class="fn">Name</span><span class="o">=</span><span class="s">&quot;MVE&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs171', 629)" onmouseover="showTip(event, 'fs171', 629)" class="id">chart6040NormlizedVol</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs169', 630)" onmouseover="showTip(event, 'fs169', 630)" class="id">port6040CumulativeNormlizedVol</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs26', 631)" onmouseover="showTip(event, 'fs26', 631)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 632)" onmouseover="showTip(event, 'fs27', 632)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs66', 633)" onmouseover="showTip(event, 'fs66', 633)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs66', 634)" onmouseover="showTip(event, 'fs66', 634)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs67', 635)" onmouseover="showTip(event, 'fs67', 635)" class="id">Date</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs66', 636)" onmouseover="showTip(event, 'fs66', 636)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs73', 637)" onmouseover="showTip(event, 'fs73', 637)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 638)" onmouseover="showTip(event, 'fs156', 638)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs157', 639)" onmouseover="showTip(event, 'fs157', 639)" class="id">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 640)" onmouseover="showTip(event, 'fs156', 640)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs158', 641)" onmouseover="showTip(event, 'fs158', 641)" class="id">withTraceInfo</span><span class="pn">(</span><span class="fn">Name</span><span class="o">=</span><span class="s">&quot;60/40&quot;</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs172', 642)" onmouseover="showTip(event, 'fs172', 642)" class="id">chartCombinedNormlizedVol</span> <span class="o">=</span>
    <span class="pn">[</span> <span onmouseout="hideTip(event, 'fs170', 643)" onmouseover="showTip(event, 'fs170', 643)" class="id">chartMVENormlizedVol</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs171', 644)" onmouseover="showTip(event, 'fs171', 644)" class="id">chart6040NormlizedVol</span> <span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs156', 645)" onmouseover="showTip(event, 'fs156', 645)" class="rt">Chart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs161', 646)" onmouseover="showTip(event, 'fs161', 646)" class="id">combine</span>
</code></pre>
<div id="180d832c-a0eb-4514-97d2-a5ba0c3568aa"><!-- Plotly chart will be drawn inside this DIV --></div>
<script type="text/javascript">

            var renderPlotly_180d832ca0eb451497d2a5ba0c3568aa = function() {
            var fsharpPlotlyRequire = requirejs.config({context:'fsharp-plotly',paths:{plotly:'https://cdn.plot.ly/plotly-2.6.3.min'}}) || require;
            fsharpPlotlyRequire(['plotly'], function(Plotly) {

            var data = [{"type":"scatter","mode":"lines","x":["2010-02-01T00:00:00","2010-03-01T00:00:00","2010-04-01T00:00:00","2010-05-01T00:00:00","2010-06-01T00:00:00","2010-07-01T00:00:00","2010-08-01T00:00:00","2010-09-01T00:00:00","2010-10-01T00:00:00","2010-11-01T00:00:00","2010-12-01T00:00:00","2011-01-01T00:00:00","2011-02-01T00:00:00","2011-03-01T00:00:00","2011-04-01T00:00:00","2011-05-01T00:00:00","2011-06-01T00:00:00","2011-07-01T00:00:00","2011-08-01T00:00:00","2011-09-01T00:00:00","2011-10-01T00:00:00","2011-11-01T00:00:00","2011-12-01T00:00:00","2012-01-01T00:00:00","2012-02-01T00:00:00","2012-03-01T00:00:00","2012-04-01T00:00:00","2012-05-01T00:00:00","2012-06-01T00:00:00","2012-07-01T00:00:00","2012-08-01T00:00:00","2012-09-01T00:00:00","2012-10-01T00:00:00","2012-11-01T00:00:00","2012-12-01T00:00:00","2013-01-01T00:00:00","2013-02-01T00:00:00","2013-03-01T00:00:00","2013-04-01T00:00:00","2013-05-01T00:00:00","2013-06-01T00:00:00","2013-07-01T00:00:00","2013-08-01T00:00:00","2013-09-01T00:00:00","2013-10-01T00:00:00","2013-11-01T00:00:00","2013-12-01T00:00:00","2014-01-01T00:00:00","2014-02-01T00:00:00","2014-03-01T00:00:00","2014-04-01T00:00:00","2014-05-01T00:00:00","2014-06-01T00:00:00","2014-07-01T00:00:00","2014-08-01T00:00:00","2014-09-01T00:00:00","2014-10-01T00:00:00","2014-11-01T00:00:00","2014-12-01T00:00:00","2015-01-01T00:00:00","2015-02-01T00:00:00","2015-03-01T00:00:00","2015-04-01T00:00:00","2015-05-01T00:00:00","2015-06-01T00:00:00","2015-07-01T00:00:00","2015-08-01T00:00:00","2015-09-01T00:00:00","2015-10-01T00:00:00","2015-11-01T00:00:00","2015-12-01T00:00:00","2016-01-01T00:00:00","2016-02-01T00:00:00","2016-03-01T00:00:00","2016-04-01T00:00:00","2016-05-01T00:00:00","2016-06-01T00:00:00","2016-07-01T00:00:00","2016-08-01T00:00:00","2016-09-01T00:00:00","2016-10-01T00:00:00","2016-11-01T00:00:00","2016-12-01T00:00:00","2017-01-01T00:00:00","2017-02-01T00:00:00","2017-03-01T00:00:00","2017-04-01T00:00:00","2017-05-01T00:00:00","2017-06-01T00:00:00","2017-07-01T00:00:00","2017-08-01T00:00:00","2017-09-01T00:00:00","2017-10-01T00:00:00","2017-11-01T00:00:00","2017-12-01T00:00:00","2018-01-01T00:00:00","2018-02-01T00:00:00","2018-03-01T00:00:00","2018-04-01T00:00:00","2018-05-01T00:00:00","2018-06-01T00:00:00","2018-07-01T00:00:00","2018-08-01T00:00:00","2018-09-01T00:00:00","2018-10-01T00:00:00","2018-11-01T00:00:00","2018-12-01T00:00:00","2019-01-01T00:00:00","2019-02-01T00:00:00","2019-03-01T00:00:00","2019-04-01T00:00:00","2019-05-01T00:00:00","2019-06-01T00:00:00","2019-07-01T00:00:00","2019-08-01T00:00:00","2019-09-01T00:00:00","2019-10-01T00:00:00","2019-11-01T00:00:00","2019-12-01T00:00:00","2020-01-01T00:00:00","2020-02-01T00:00:00","2020-03-01T00:00:00","2020-04-01T00:00:00","2020-05-01T00:00:00","2020-06-01T00:00:00","2020-07-01T00:00:00","2020-08-01T00:00:00","2020-09-01T00:00:00","2020-10-01T00:00:00","2020-11-01T00:00:00","2020-12-01T00:00:00","2021-01-01T00:00:00","2021-02-01T00:00:00","2021-03-01T00:00:00","2021-04-01T00:00:00","2021-05-01T00:00:00","2021-06-01T00:00:00","2021-07-01T00:00:00","2021-08-01T00:00:00","2021-09-01T00:00:00","2021-10-01T00:00:00","2021-11-01T00:00:00","2021-12-01T00:00:00","2022-01-01T00:00:00","2022-02-01T00:00:00","2022-03-01T00:00:00","2022-04-01T00:00:00","2022-05-01T00:00:00","2022-06-01T00:00:00","2022-07-01T00:00:00","2022-08-01T00:00:00","2022-09-01T00:00:00","2022-10-01T00:00:00","2022-11-01T00:00:00","2022-12-01T00:00:00","2023-01-01T00:00:00","2023-02-01T00:00:00","2023-03-01T00:00:00","2023-04-01T00:00:00","2023-05-01T00:00:00","2023-06-01T00:00:00","2023-07-01T00:00:00","2023-08-01T00:00:00","2023-09-01T00:00:00","2023-10-01T00:00:00","2023-11-01T00:00:00","2023-12-01T00:00:00"],"y":[1.0140540930919473,1.0412694229692219,1.0376923660272614,0.9847753265586607,0.9551523324802174,1.0033110785277817,0.98391875662086,1.0336292105848892,1.070729815527017,1.0635891711703627,1.110641678488424,1.1304460911107712,1.151011054344784,1.141509731235062,1.1735157594152867,1.173172392788862,1.1553037843529501,1.1525350328072284,1.121109409640956,1.0785090372440018,1.1483738285727025,1.1441421987732063,1.1577387126834529,1.1790026717559754,1.2227413453721312,1.2455707945196932,1.2497641296760895,1.1998898169276666,1.2207470286481068,1.2450111077368924,1.2655448944161103,1.2762911364645504,1.2596344389597132,1.2652502415401432,1.267038844864495,1.2964092661057691,1.304852259629879,1.3270327891817146,1.3599516961817546,1.374972269731893,1.3514900900425282,1.4024032339635142,1.3835420933564226,1.4013355634807105,1.4523106901342413,1.4757537888673737,1.507726663344383,1.4689525021176268,1.515783814338321,1.504697105750082,1.523549460765842,1.5504297329058088,1.5545498246485514,1.5659118127405607,1.601453016029823,1.6012223672865566,1.621154680499263,1.6611115282831723,1.648474444269264,1.6222588642056806,1.6832108193998137,1.6369952439503697,1.6710106169991026,1.6842962152795642,1.6548021309085281,1.7082143827574183,1.6276940300837448,1.6036592862838286,1.6986689196263396,1.6978809813591043,1.694948863789952,1.6427628159152645,1.6288713550893912,1.682910332539659,1.6816841045574613,1.704410537388567,1.7033910620016282,1.7488193896275215,1.7451688036100572,1.7424113053077532,1.7272101279140974,1.7180623966343618,1.7244412845246766,1.7653464680086928,1.8251000879968986,1.8284475032114729,1.855067902968,1.9040140495449551,1.8912267878569076,1.930607914012005,1.9505414641433,1.9469460553396751,1.9931570346985925,2.0294545665615336,2.0463482437756255,2.158193573663079,2.114411869972274,2.048290207231174,2.0567706779790447,2.0733914651106935,2.0790376237317743,2.1373951988019018,2.1972093339650196,2.2143992388926237,2.1264408307295124,2.1470485587933577,2.0383216733617084,2.128537785534059,2.170174274444706,2.222959325813839,2.286811964065146,2.210336358777145,2.3111856139832834,2.3420441574999895,2.3561074518657232,2.341407372269397,2.3849049906807713,2.4596433293054374,2.496725118427816,2.552484613079,2.4510529870491884,2.3711766736089896,2.591666923964247,2.6948795252624085,2.735671224674664,2.8884359141895786,3.0653502824314374,2.990028384386202,2.869137258424252,3.0015160676609183,3.0529082959953153,3.00816693334025,2.96970827163077,3.003354315141105,3.1292466779637857,3.1052336494952857,3.217720220015299,3.3243132833011844,3.4019171127699495,3.2579292986452937,3.4476774124051937,3.448530074155456,3.5061191599223007,3.3274767862487242,3.1915823684738167,3.279047886317155,3.023435643540311,2.9801920106256907,2.8437601793543155,3.024035763199003,2.9231716050123877,2.7394482316987823,2.8208163291217514,2.9092801035062394,2.777765791773919,2.8793697226951354,2.8216992447538596,3.001621541378411,3.0548794569257134,3.1260109380617753,3.2021245214705707,3.2413304226990816,3.216610735088209,3.0958291083479677,3.0725148591605906,3.2762737518855407,3.2969976992934145],"marker":{},"line":{},"name":"MVE"},{"type":"scatter","mode":"lines","x":["2010-02-01T00:00:00","2010-03-01T00:00:00","2010-04-01T00:00:00","2010-05-01T00:00:00","2010-06-01T00:00:00","2010-07-01T00:00:00","2010-08-01T00:00:00","2010-09-01T00:00:00","2010-10-01T00:00:00","2010-11-01T00:00:00","2010-12-01T00:00:00","2011-01-01T00:00:00","2011-02-01T00:00:00","2011-03-01T00:00:00","2011-04-01T00:00:00","2011-05-01T00:00:00","2011-06-01T00:00:00","2011-07-01T00:00:00","2011-08-01T00:00:00","2011-09-01T00:00:00","2011-10-01T00:00:00","2011-11-01T00:00:00","2011-12-01T00:00:00","2012-01-01T00:00:00","2012-02-01T00:00:00","2012-03-01T00:00:00","2012-04-01T00:00:00","2012-05-01T00:00:00","2012-06-01T00:00:00","2012-07-01T00:00:00","2012-08-01T00:00:00","2012-09-01T00:00:00","2012-10-01T00:00:00","2012-11-01T00:00:00","2012-12-01T00:00:00","2013-01-01T00:00:00","2013-02-01T00:00:00","2013-03-01T00:00:00","2013-04-01T00:00:00","2013-05-01T00:00:00","2013-06-01T00:00:00","2013-07-01T00:00:00","2013-08-01T00:00:00","2013-09-01T00:00:00","2013-10-01T00:00:00","2013-11-01T00:00:00","2013-12-01T00:00:00","2014-01-01T00:00:00","2014-02-01T00:00:00","2014-03-01T00:00:00","2014-04-01T00:00:00","2014-05-01T00:00:00","2014-06-01T00:00:00","2014-07-01T00:00:00","2014-08-01T00:00:00","2014-09-01T00:00:00","2014-10-01T00:00:00","2014-11-01T00:00:00","2014-12-01T00:00:00","2015-01-01T00:00:00","2015-02-01T00:00:00","2015-03-01T00:00:00","2015-04-01T00:00:00","2015-05-01T00:00:00","2015-06-01T00:00:00","2015-07-01T00:00:00","2015-08-01T00:00:00","2015-09-01T00:00:00","2015-10-01T00:00:00","2015-11-01T00:00:00","2015-12-01T00:00:00","2016-01-01T00:00:00","2016-02-01T00:00:00","2016-03-01T00:00:00","2016-04-01T00:00:00","2016-05-01T00:00:00","2016-06-01T00:00:00","2016-07-01T00:00:00","2016-08-01T00:00:00","2016-09-01T00:00:00","2016-10-01T00:00:00","2016-11-01T00:00:00","2016-12-01T00:00:00","2017-01-01T00:00:00","2017-02-01T00:00:00","2017-03-01T00:00:00","2017-04-01T00:00:00","2017-05-01T00:00:00","2017-06-01T00:00:00","2017-07-01T00:00:00","2017-08-01T00:00:00","2017-09-01T00:00:00","2017-10-01T00:00:00","2017-11-01T00:00:00","2017-12-01T00:00:00","2018-01-01T00:00:00","2018-02-01T00:00:00","2018-03-01T00:00:00","2018-04-01T00:00:00","2018-05-01T00:00:00","2018-06-01T00:00:00","2018-07-01T00:00:00","2018-08-01T00:00:00","2018-09-01T00:00:00","2018-10-01T00:00:00","2018-11-01T00:00:00","2018-12-01T00:00:00","2019-01-01T00:00:00","2019-02-01T00:00:00","2019-03-01T00:00:00","2019-04-01T00:00:00","2019-05-01T00:00:00","2019-06-01T00:00:00","2019-07-01T00:00:00","2019-08-01T00:00:00","2019-09-01T00:00:00","2019-10-01T00:00:00","2019-11-01T00:00:00","2019-12-01T00:00:00","2020-01-01T00:00:00","2020-02-01T00:00:00","2020-03-01T00:00:00","2020-04-01T00:00:00","2020-05-01T00:00:00","2020-06-01T00:00:00","2020-07-01T00:00:00","2020-08-01T00:00:00","2020-09-01T00:00:00","2020-10-01T00:00:00","2020-11-01T00:00:00","2020-12-01T00:00:00","2021-01-01T00:00:00","2021-02-01T00:00:00","2021-03-01T00:00:00","2021-04-01T00:00:00","2021-05-01T00:00:00","2021-06-01T00:00:00","2021-07-01T00:00:00","2021-08-01T00:00:00","2021-09-01T00:00:00","2021-10-01T00:00:00","2021-11-01T00:00:00","2021-12-01T00:00:00","2022-01-01T00:00:00","2022-02-01T00:00:00","2022-03-01T00:00:00","2022-04-01T00:00:00","2022-05-01T00:00:00","2022-06-01T00:00:00","2022-07-01T00:00:00","2022-08-01T00:00:00","2022-09-01T00:00:00","2022-10-01T00:00:00","2022-11-01T00:00:00","2022-12-01T00:00:00","2023-01-01T00:00:00","2023-02-01T00:00:00","2023-03-01T00:00:00","2023-04-01T00:00:00","2023-05-01T00:00:00","2023-06-01T00:00:00","2023-07-01T00:00:00","2023-08-01T00:00:00","2023-09-01T00:00:00","2023-10-01T00:00:00","2023-11-01T00:00:00","2023-12-01T00:00:00"],"y":[1.020695358819556,1.0563637476165875,1.0771151857013694,1.0309616345465349,0.9978785144947123,1.0464481128080416,1.023273048228928,1.0778464449607728,1.1086575758030013,1.1088950342821606,1.1436302495380606,1.1663075369301674,1.1921298907203228,1.1913857010382656,1.2220486191523037,1.2200869045374336,1.2020335802255817,1.1965469165198201,1.1606427445904524,1.1076506427161097,1.1876271898035626,1.1847025207292445,1.1898082582175757,1.2379086019905599,1.268246806266835,1.2857215811130263,1.2892588526065214,1.2463136894737334,1.2730046161328339,1.2898656761095366,1.3114981397949026,1.3280317447196104,1.3168455960957317,1.3242229958416933,1.3227766073213567,1.369358563848935,1.3817291766900222,1.4110639299601855,1.4332921802301184,1.444246108104718,1.4182236653822604,1.473488729314856,1.4416317109450096,1.4774006114603078,1.5247740891948458,1.5476524922746249,1.5622905261142066,1.550328719596313,1.597210196083953,1.5968105164222692,1.6065707104873366,1.6337103510729136,1.6558256649137115,1.63823819006626,1.6865237780325941,1.6569000258659163,1.6937943555161041,1.7245461194623788,1.7160013829773013,1.7142831269795307,1.763030820585713,1.7497443518122877,1.7586522001976057,1.7691122112621767,1.7389279368430357,1.7673536256244433,1.7009599948905259,1.6716151007968307,1.7567292180573324,1.760253098010515,1.7285579554452732,1.6863244007871991,1.6901766782561534,1.762954450653464,1.7775087645117609,1.7958622745258177,1.8081611390491559,1.8603270184482827,1.859921431141666,1.8571836241530932,1.8307569287579277,1.861028750959791,1.8761261150559823,1.9082436282919726,1.9529067933266344,1.9474968221144788,1.9703219650712582,1.986765756742984,1.9917271242045946,2.0216549594567104,2.0302680817680243,2.0506804266988077,2.08078357566107,2.116017832159437,2.1250085680234942,2.1891484675317106,2.1263648355257625,2.0998582514075563,2.1002002236790704,2.137504176884836,2.1376388060619522,2.184121789755768,2.231390373766209,2.2194182529581794,2.1147633007743094,2.141750763025242,2.026608426144653,2.1470694527925867,2.1861640492984984,2.21054950831327,2.2650736026437794,2.1892391380457967,2.2840572763188858,2.305626354854207,2.298672035406813,2.307561931008379,2.342433426498683,2.3924500190901674,2.418607148058906,2.4459161963042426,2.3397516822566,2.1225120147027337,2.3201942310592827,2.4015334426402375,2.434248157407894,2.5391883474100725,2.637693431324069,2.5742026499543207,2.5443427224818964,2.7366470064940733,2.8043936328097088,2.8011242618210406,2.834799515988092,2.876683863313589,2.978756210433148,2.989615368542857,3.0392209734655697,3.0908388315454434,3.1414831587182763,3.0389191598470546,3.167928521862158,3.142687812855667,3.1990240287041187,3.0687097386596225,3.006937829395922,3.026651523821647,2.816454329939786,2.821437641471098,2.655330038757063,2.8343700382025934,2.7338253436882156,2.52503005609096,2.637324387837369,2.7500325791651035,2.625474703010603,2.773359610845198,2.6918086591045993,2.7481225764958666,2.7692262201367814,2.7535035817124682,2.844366144926036,2.899536076020192,2.845062672126642,2.7166188791499075,2.6499819256380057,2.8359740970950855,2.9433683151135868],"marker":{},"line":{},"name":"60/40"}];
            var layout = {"width":600,"height":600,"template":{"layout":{"title":{"x":0.05},"font":{"color":"rgba(42, 63, 95, 1.0)"},"paper_bgcolor":"rgba(255, 255, 255, 1.0)","plot_bgcolor":"rgba(229, 236, 246, 1.0)","autotypenumbers":"strict","colorscale":{"diverging":[[0.0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1.0,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"hovermode":"closest","hoverlabel":{"align":"left"},"coloraxis":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"geo":{"showland":true,"landcolor":"rgba(229, 236, 246, 1.0)","showlakes":true,"lakecolor":"rgba(255, 255, 255, 1.0)","subunitcolor":"rgba(255, 255, 255, 1.0)","bgcolor":"rgba(255, 255, 255, 1.0)"},"mapbox":{"style":"light"},"polar":{"bgcolor":"rgba(229, 236, 246, 1.0)","radialaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""},"angularaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""}},"scene":{"xaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"yaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"zaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true}},"ternary":{"aaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"baxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"caxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"bgcolor":"rgba(229, 236, 246, 1.0)"},"xaxis":{"title":{"standoff":15},"ticks":"","automargin":true,"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"yaxis":{"title":{"standoff":15},"ticks":"","automargin":true,"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"shapedefaults":{"line":{"color":"rgba(42, 63, 95, 1.0)"}},"colorway":["rgba(99, 110, 250, 1.0)","rgba(239, 85, 59, 1.0)","rgba(0, 204, 150, 1.0)","rgba(171, 99, 250, 1.0)","rgba(255, 161, 90, 1.0)","rgba(25, 211, 243, 1.0)","rgba(255, 102, 146, 1.0)","rgba(182, 232, 128, 1.0)","rgba(255, 151, 255, 1.0)","rgba(254, 203, 82, 1.0)"]},"data":{"bar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"error_x":{"color":"rgba(42, 63, 95, 1.0)"},"error_y":{"color":"rgba(42, 63, 95, 1.0)"}}],"barpolar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"carpet":[{"aaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"},"baxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"}}],"choropleth":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"heatmap":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"histogram2d":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"pie":[{"automargin":true}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatter3d":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"surface":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"table":[{"cells":{"fill":{"color":"rgba(235, 240, 248, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}},"header":{"fill":{"color":"rgba(200, 212, 227, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}}}]}}};
            var config = {"responsive":true};
            Plotly.newPlot('180d832c-a0eb-4514-97d2-a5ba0c3568aa', data, layout, config);
});
            };
            if ((typeof(requirejs) !==  typeof(Function)) || (typeof(requirejs.config) !== typeof(Function))) {
                var script = document.createElement("script");
                script.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js");
                script.onload = function(){
                    renderPlotly_180d832ca0eb451497d2a5ba0c3568aa();
                };
                document.getElementsByTagName("head")[0].appendChild(script);
            }
            else {
                renderPlotly_180d832ca0eb451497d2a5ba0c3568aa();
            }
</script>

<h2><a name="Key-points-to-keep-in-mind" class="anchor" href="#Key-points-to-keep-in-mind">Key points to keep in mind.</a></h2>
<p>The mean-variance efficient portfolio will always look like the best portfolio in the sample period in which you estimated the weights. This is because we found it by literally looking for the portfolio with the highest sharpe ratio in that sample period.</p>
<p>A more meaningful comparison would be to estimate mean-variance efficient weights based on past data and see how those weights perform in future data. For instance, estimate weights 2000-2010, and use those weights to determine the portfolio that you're going to hold in 2011. Finally, compare it to 60/40 in 2011. That is an "out of sample" test because your test period (2011) is different from the period when the weights were estimated (2000-2010). Then repeat, always using data <em>before</em> the holding period as your training period to estimate the weights for the test holding period.</p>
<p>It is also important to remember that 10-20 years is not long enough to get a good estimate of a portfolio's expected return.</p>
<p>One way to see this is to compare equity returns 2000-2010 and 2010-2020.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs19', 650)" onmouseover="showTip(event, 'fs19', 650)" class="id">ff3</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 651)" onmouseover="showTip(event, 'fs110', 651)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs173', 652)" onmouseover="showTip(event, 'fs173', 652)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 653)" onmouseover="showTip(event, 'fs28', 653)" class="fn">x</span> <span class="k">-&gt;</span> 
    <span onmouseout="hideTip(event, 'fs28', 654)" onmouseover="showTip(event, 'fs28', 654)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 655)" onmouseover="showTip(event, 'fs29', 655)" class="id">Date</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 656)" onmouseover="showTip(event, 'fs17', 656)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2000</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs28', 657)" onmouseover="showTip(event, 'fs28', 657)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 658)" onmouseover="showTip(event, 'fs29', 658)" class="id">Date</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs17', 659)" onmouseover="showTip(event, 'fs17', 659)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2009</span><span class="pn">,</span><span class="n">12</span><span class="pn">,</span><span class="n">31</span><span class="pn">)</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 660)" onmouseover="showTip(event, 'fs110', 660)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs174', 661)" onmouseover="showTip(event, 'fs174', 661)" class="id">averageBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 662)" onmouseover="showTip(event, 'fs28', 662)" class="fn">x</span> <span class="k">-&gt;</span>
    <span class="n">12.0</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs28', 663)" onmouseover="showTip(event, 'fs28', 663)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 664)" onmouseover="showTip(event, 'fs31', 664)" class="id">MktRf</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>-0.01769</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs19', 665)" onmouseover="showTip(event, 'fs19', 665)" class="id">ff3</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 666)" onmouseover="showTip(event, 'fs110', 666)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs173', 667)" onmouseover="showTip(event, 'fs173', 667)" class="id">filter</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 668)" onmouseover="showTip(event, 'fs28', 668)" class="fn">x</span> <span class="k">-&gt;</span> 
    <span onmouseout="hideTip(event, 'fs28', 669)" onmouseover="showTip(event, 'fs28', 669)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 670)" onmouseover="showTip(event, 'fs29', 670)" class="id">Date</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs17', 671)" onmouseover="showTip(event, 'fs17', 671)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2010</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span> <span class="o">&amp;&amp;</span>
    <span onmouseout="hideTip(event, 'fs28', 672)" onmouseover="showTip(event, 'fs28', 672)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 673)" onmouseover="showTip(event, 'fs29', 673)" class="id">Date</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs17', 674)" onmouseover="showTip(event, 'fs17', 674)" class="fn">DateTime</span><span class="pn">(</span><span class="n">2019</span><span class="pn">,</span><span class="n">12</span><span class="pn">,</span><span class="n">31</span><span class="pn">)</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs110', 675)" onmouseover="showTip(event, 'fs110', 675)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs174', 676)" onmouseover="showTip(event, 'fs174', 676)" class="id">averageBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs28', 677)" onmouseover="showTip(event, 'fs28', 677)" class="fn">x</span> <span class="k">-&gt;</span>
    <span class="n">12.0</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs28', 678)" onmouseover="showTip(event, 'fs28', 678)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 679)" onmouseover="showTip(event, 'fs31', 679)" class="id">MktRf</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>0.13093</code></pre></td></tr></table>
<p>Neither of those 10-year periods is a good estimate of expected market returns.Thus it does not make sense to try forming a mean-variance efficient portfolio using the trailing 10-year period for estimating forward-looking returns.</p>
<p>If we look at US returns 1900-2012, the data indicates that equity excess returns were about 5.5%, and bond excess returns were about 1%. Covariances over shorter periods are more reasonable, so we can use the recent sample to estimate covariances and the long sample for means.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs175', 680)" onmouseover="showTip(event, 'fs175', 680)" class="id">symStockBond</span> <span class="o">=</span> <span class="pn">[</span><span class="s">&quot;VTI&quot;</span><span class="pn">;</span><span class="s">&quot;BND&quot;</span><span class="pn">]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs176', 681)" onmouseover="showTip(event, 'fs176', 681)" class="id">covStockBond</span> <span class="o">=</span>
    <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs177', 682)" onmouseover="showTip(event, 'fs177', 682)" class="fn">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs175', 683)" onmouseover="showTip(event, 'fs175', 683)" class="id">symStockBond</span> <span class="k">do</span>
        <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs178', 684)" onmouseover="showTip(event, 'fs178', 684)" class="fn">y</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs175', 685)" onmouseover="showTip(event, 'fs175', 685)" class="id">symStockBond</span> <span class="k">do</span>
            <span onmouseout="hideTip(event, 'fs80', 686)" onmouseover="showTip(event, 'fs80', 686)" class="fn">getCov</span> <span onmouseout="hideTip(event, 'fs177', 687)" onmouseover="showTip(event, 'fs177', 687)" class="fn">x</span> <span onmouseout="hideTip(event, 'fs178', 688)" onmouseover="showTip(event, 'fs178', 688)" class="fn">y</span> <span class="pn">]</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs90', 689)" onmouseover="showTip(event, 'fs90', 689)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs91', 690)" onmouseover="showTip(event, 'fs91', 690)" class="id">tensor</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs179', 691)" onmouseover="showTip(event, 'fs179', 691)" class="id">meansStockBond</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 692)" onmouseover="showTip(event, 'fs90', 692)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs91', 693)" onmouseover="showTip(event, 'fs91', 693)" class="id">tensor</span><span class="pn">(</span><span class="pn">[</span> <span class="n">0.055</span><span class="o">/</span><span class="n">12.0</span><span class="pn">;</span> <span class="n">0.01</span><span class="o">/</span><span class="n">12.0</span><span class="pn">]</span><span class="pn">)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs180', 694)" onmouseover="showTip(event, 'fs180', 694)" class="id">wStockBond</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs98', 695)" onmouseover="showTip(event, 'fs98', 695)" class="fn">w&#39;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs90', 696)" onmouseover="showTip(event, 'fs90', 696)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs99', 697)" onmouseover="showTip(event, 'fs99', 697)" class="id">solve</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs176', 698)" onmouseover="showTip(event, 'fs176', 698)" class="id">covStockBond</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs179', 699)" onmouseover="showTip(event, 'fs179', 699)" class="id">meansStockBond</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs98', 700)" onmouseover="showTip(event, 'fs98', 700)" class="fn">w&#39;</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs98', 701)" onmouseover="showTip(event, 'fs98', 701)" class="fn">w&#39;</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs101', 702)" onmouseover="showTip(event, 'fs101', 702)" class="id">sum</span><span class="pn">(</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs180', 703)" onmouseover="showTip(event, 'fs180', 703)" class="id">wStockBond</span>
</code></pre>
<table class="pre"><tr><td><pre><code>tensor([0.4083, 0.5917])</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs181', 704)" onmouseover="showTip(event, 'fs181', 704)" class="fn">stockBondSharpeAndSD</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs182', 705)" onmouseover="showTip(event, 'fs182', 705)" class="fn">weights</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs183', 706)" onmouseover="showTip(event, 'fs183', 706)" class="rt">Tensor</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs184', 707)" onmouseover="showTip(event, 'fs184', 707)" class="fn">sbVar</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs182', 708)" onmouseover="showTip(event, 'fs182', 708)" class="fn">weights</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs103', 709)" onmouseover="showTip(event, 'fs103', 709)" class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs176', 710)" onmouseover="showTip(event, 'fs176', 710)" class="id">covStockBond</span><span class="pn">)</span><span class="pn">.</span><span class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs182', 711)" onmouseover="showTip(event, 'fs182', 711)" class="fn">weights</span><span class="pn">)</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs185', 712)" onmouseover="showTip(event, 'fs185', 712)" class="fn">sbStDev</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs108', 713)" onmouseover="showTip(event, 'fs108', 713)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs108', 714)" onmouseover="showTip(event, 'fs108', 714)" class="fn">sqrt</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs184', 715)" onmouseover="showTip(event, 'fs184', 715)" class="fn">sbVar</span><span class="pn">)</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs186', 716)" onmouseover="showTip(event, 'fs186', 716)" class="fn">sbMean</span> <span class="o">=</span> <span class="n">12.0</span> <span class="o">*</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs182', 717)" onmouseover="showTip(event, 'fs182', 717)" class="fn">weights</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs103', 718)" onmouseover="showTip(event, 'fs103', 718)" class="id">matmul</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs179', 719)" onmouseover="showTip(event, 'fs179', 719)" class="id">meansStockBond</span><span class="pn">)</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs186', 720)" onmouseover="showTip(event, 'fs186', 720)" class="fn">sbMean</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs185', 721)" onmouseover="showTip(event, 'fs185', 721)" class="fn">sbStDev</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs185', 722)" onmouseover="showTip(event, 'fs185', 722)" class="fn">sbStDev</span>

<span onmouseout="hideTip(event, 'fs181', 723)" onmouseover="showTip(event, 'fs181', 723)" class="fn">stockBondSharpeAndSD</span> <span onmouseout="hideTip(event, 'fs180', 724)" onmouseover="showTip(event, 'fs180', 724)" class="id">wStockBond</span>
</code></pre>
<table class="pre"><tr><td><pre><code>(tensor(0.3758), tensor(0.0755))</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs181', 725)" onmouseover="showTip(event, 'fs181', 725)" class="fn">stockBondSharpeAndSD</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs90', 726)" onmouseover="showTip(event, 'fs90', 726)" class="rt">dsharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs91', 727)" onmouseover="showTip(event, 'fs91', 727)" class="id">tensor</span><span class="pn">(</span><span class="pn">[</span><span class="n">0.6</span><span class="pn">;</span><span class="n">0.4</span><span class="pn">]</span><span class="pn">)</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>(tensor(0.3701), tensor(0.1000))</code></pre></td></tr></table>

        <div class="fsdocs-tip" id="fs1">namespace System</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs3">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="fsdocs-tip" id="fs4">namespace Quotes</div>
<div class="fsdocs-tip" id="fs5">namespace Quotes.YahooFinance</div>
<div class="fsdocs-tip" id="fs6">namespace NovaSBE</div>
<div class="fsdocs-tip" id="fs7">namespace NovaSBE.Finance</div>
<div class="fsdocs-tip" id="fs8">module French

from NovaSBE.Finance</div>
<div class="fsdocs-tip" id="fs9">namespace FSharp.Stats</div>
<div class="fsdocs-tip" id="fs10">namespace Plotly</div>
<div class="fsdocs-tip" id="fs11">namespace Plotly.NET</div>
<div class="fsdocs-tip" id="fs12">namespace DiffSharp</div>
<div class="fsdocs-tip" id="fs13">type Environment =
  static member Exit: exitCode: int -&gt; unit
  static member ExpandEnvironmentVariables: name: string -&gt; string
  static member FailFast: message: string -&gt; unit + 1 overload
  static member GetCommandLineArgs: unit -&gt; string array
  static member GetEnvironmentVariable: variable: string -&gt; string + 1 overload
  static member GetEnvironmentVariables: unit -&gt; IDictionary + 1 overload
  static member GetFolderPath: folder: SpecialFolder -&gt; string + 1 overload
  static member GetLogicalDrives: unit -&gt; string array
  static member SetEnvironmentVariable: variable: string * value: string -&gt; unit + 1 overload
  static member CommandLine: string
  ...<br /><em>&lt;summary&gt;Provides information about, and means to manipulate, the current environment and platform. This class cannot be inherited.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs14">property Environment.CurrentDirectory: string with get, set<br /><em>&lt;summary&gt;Gets or sets the fully qualified path of the current working directory.&lt;/summary&gt;<br />&lt;exception cref=&quot;T:System.ArgumentException&quot;&gt;Attempted to set to an empty string (&quot;&quot;).&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Attempted to set to &lt;see langword=&quot;null&quot; /&gt;.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.IO.IOException&quot;&gt;An I/O error occurred.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.IO.DirectoryNotFoundException&quot;&gt;Attempted to set a local path that cannot be found.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.Security.SecurityException&quot;&gt;The caller does not have the appropriate permission.&lt;/exception&gt;<br />&lt;returns&gt;The directory path.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs15">type StockData =
  {
    Symbol: string
    Date: DateTime
    Return: float
  }</div>
<div class="fsdocs-tip" id="fs16">Multiple items<br />val string: value: &#39;T -&gt; string<br /><br />--------------------<br />type string = String</div>
<div class="fsdocs-tip" id="fs17">Multiple items<br />[&lt;Struct&gt;]
type DateTime =
  new: year: int * month: int * day: int -&gt; unit + 16 overloads
  member Add: value: TimeSpan -&gt; DateTime
  member AddDays: value: float -&gt; DateTime
  member AddHours: value: float -&gt; DateTime
  member AddMicroseconds: value: float -&gt; DateTime
  member AddMilliseconds: value: float -&gt; DateTime
  member AddMinutes: value: float -&gt; DateTime
  member AddMonths: months: int -&gt; DateTime
  member AddSeconds: value: float -&gt; DateTime
  member AddTicks: value: int64 -&gt; DateTime
  ...<br /><em>&lt;summary&gt;Represents an instant in time, typically expressed as a date and time of day.&lt;/summary&gt;</em><br /><br />--------------------<br />DateTime ()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="fsdocs-tip" id="fs18">Multiple items<br />val float: value: &#39;T -&gt; float (requires member op_Explicit)<br /><br />--------------------<br />type float = Double<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; =
  float</div>
<div class="fsdocs-tip" id="fs19">val ff3: FF3Obs list</div>
<div class="fsdocs-tip" id="fs20">val getFF3: frequency: Frequency -&gt; FF3Obs array</div>
<div class="fsdocs-tip" id="fs21">type Frequency =
  | Daily
  | Monthly</div>
<div class="fsdocs-tip" id="fs22">union case Frequency.Monthly: Frequency</div>
<div class="fsdocs-tip" id="fs23">Multiple items<br />type Array =
  new: unit -&gt; Array
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float array
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float array<br /><br />--------------------<br />new: unit -&gt; Array</div>
<div class="fsdocs-tip" id="fs24">val toList: array: &#39;T array -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs25">val ff3StockData: StockData list</div>
<div class="fsdocs-tip" id="fs26">Multiple items<br />module List

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to compute common statistical measure on list
&lt;/summary&gt;</em><br /><br />--------------------<br />module List

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List =
  new: unit -&gt; List
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float list
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float list<br /><br />--------------------<br />type List&lt;&#39;T&gt; =
  | op_Nil
  | op_ColonColon of Head: &#39;T * Tail: &#39;T list
  interface IReadOnlyList&lt;&#39;T&gt;
  interface IReadOnlyCollection&lt;&#39;T&gt;
  interface IEnumerable
  interface IEnumerable&lt;&#39;T&gt;
  member GetReverseIndex: rank: int * offset: int -&gt; int
  member GetSlice: startIndex: int option * endIndex: int option -&gt; &#39;T list
  static member Cons: head: &#39;T * tail: &#39;T list -&gt; &#39;T list
  member Head: &#39;T
  member IsEmpty: bool
  member Item: index: int -&gt; &#39;T with get
  ...<br /><br />--------------------<br />new: unit -&gt; List</div>
<div class="fsdocs-tip" id="fs27">val map: mapping: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U list</div>
<div class="fsdocs-tip" id="fs28">val x: FF3Obs</div>
<div class="fsdocs-tip" id="fs29">FF3Obs.Date: DateTime</div>
<div class="fsdocs-tip" id="fs30">FF3Obs.Hml: float</div>
<div class="fsdocs-tip" id="fs31">FF3Obs.MktRf: float</div>
<div class="fsdocs-tip" id="fs32">FF3Obs.Smb: float</div>
<div class="fsdocs-tip" id="fs33">val concat: lists: &#39;T list seq -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs34">val tickers: string list</div>
<div class="fsdocs-tip" id="fs35">val tickPrices: Quote list</div>
<div class="fsdocs-tip" id="fs36">type YahooFinance =
  static member Dividends: symbols: string list * ?startDate: DateTime * ?endDate: DateTime * ?interval: Interval * ?displayLogs: bool -&gt; Dividend list
  static member History: symbol: string * ?startDate: DateTime * ?endDate: DateTime * ?interval: Interval * ?displayLogs: bool -&gt; Quote list + 1 overload
  static member Meta: symbols: string list * ?startDate: DateTime * ?endDate: DateTime * ?interval: Interval * ?displayLogs: bool -&gt; Meta list</div>
<div class="fsdocs-tip" id="fs37">static member YahooFinance.History: symbols: string seq * ?startDate: DateTime * ?endDate: DateTime * ?interval: Interval * ?displayLogs: bool -&gt; Quote list<br />static member YahooFinance.History: symbol: string * ?startDate: DateTime * ?endDate: DateTime * ?interval: Interval * ?displayLogs: bool -&gt; Quote list</div>
<div class="fsdocs-tip" id="fs38">Multiple items<br />module Interval

from FSharp.Stats<br /><br />--------------------<br />type Interval =
  | Daily
  | Weekly
  | Monthly
  | Quarterly
  | SemiAnnual
  | Annual
  | TwoYear
  | FiveYear
  | TenYear
  | YearToDate
  ...
  override ToString: unit -&gt; string<br /><br />--------------------<br />type Interval&lt;&#39;a (requires comparison)&gt; =
  | Closed of &#39;a * &#39;a
  | LeftOpen of &#39;a * &#39;a
  | RightOpen of &#39;a * &#39;a
  | Open of &#39;a * &#39;a
  | Empty
  member GetEnd: unit -&gt; &#39;a
  member GetStart: unit -&gt; &#39;a
  override ToString: unit -&gt; string
  member ToTuple: unit -&gt; &#39;a * &#39;a
  member liesInInterval: value: &#39;a -&gt; bool
  static member CreateClosed: min: &#39;b * max: &#39;b -&gt; Interval&lt;&#39;b&gt; (requires comparison)
  static member CreateLeftOpen: min: &#39;a1 * max: &#39;a1 -&gt; Interval&lt;&#39;a1&gt; (requires comparison)
  static member CreateOpen: min: &#39;a1 * max: &#39;a1 -&gt; Interval&lt;&#39;a1&gt; (requires comparison)
  static member CreateRightOpen: min: &#39;a1 * max: &#39;a1 -&gt; Interval&lt;&#39;a1&gt; (requires comparison)
  static member ofSeq: source: &#39;a seq -&gt; Interval&lt;&#39;a&gt;
  ...<br /><em>&lt;summary&gt;
 Closed interval [Start,End]
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs39">union case Interval.Monthly: Interval</div>
<div class="fsdocs-tip" id="fs40">val pricesToReturns: symbol: string * adjPrices: Quote list -&gt; StockData list</div>
<div class="fsdocs-tip" id="fs41">val symbol: string</div>
<div class="fsdocs-tip" id="fs42">val adjPrices: Quote list</div>
<div class="fsdocs-tip" id="fs43">type &#39;T list = List&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs44">type Quote =
  {
    Symbol: string
    Date: DateTime
    Open: float
    High: float
    Low: float
    Close: float
    AdjustedClose: float
    Volume: decimal
  }</div>
<div class="fsdocs-tip" id="fs45">val sortBy: projection: (&#39;T -&gt; &#39;Key) -&gt; list: &#39;T list -&gt; &#39;T list (requires comparison)</div>
<div class="fsdocs-tip" id="fs46">val x: Quote</div>
<div class="fsdocs-tip" id="fs47">Quote.Date: DateTime</div>
<div class="fsdocs-tip" id="fs48">val pairwise: list: &#39;T list -&gt; (&#39;T * &#39;T) list</div>
<div class="fsdocs-tip" id="fs49">val day0: Quote</div>
<div class="fsdocs-tip" id="fs50">val day1: Quote</div>
<div class="fsdocs-tip" id="fs51">val r: float</div>
<div class="fsdocs-tip" id="fs52">Quote.AdjustedClose: float<br /><em>&lt;summary&gt;
 Split and dividend adjusted Close price
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs53">val testPriceObs: Quote list</div>
<div class="fsdocs-tip" id="fs54">val filter: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs55">Quote.Symbol: string</div>
<div class="fsdocs-tip" id="fs56">val truncate: count: int -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs57">val groupBy: projection: (&#39;T -&gt; &#39;Key) -&gt; list: &#39;T list -&gt; (&#39;Key * &#39;T list) list (requires equality)</div>
<div class="fsdocs-tip" id="fs58">val collect: mapping: (&#39;T -&gt; &#39;U list) -&gt; list: &#39;T list -&gt; &#39;U list</div>
<div class="fsdocs-tip" id="fs59">val tickReturns: StockData list</div>
<div class="fsdocs-tip" id="fs60">val rf: Map&lt;DateTime,float&gt;</div>
<div class="fsdocs-tip" id="fs61">Multiple items<br />module Map

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to strore specialised computations on maps
&lt;/summary&gt;</em><br /><br />--------------------<br />module Map

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Map&lt;&#39;Key,&#39;Value (requires comparison)&gt; =
  interface IReadOnlyDictionary&lt;&#39;Key,&#39;Value&gt;
  interface IReadOnlyCollection&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface IEnumerable
  interface IStructuralEquatable
  interface IComparable
  interface IEnumerable&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface ICollection&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;
  interface IDictionary&lt;&#39;Key,&#39;Value&gt;
  new: elements: (&#39;Key * &#39;Value) seq -&gt; Map&lt;&#39;Key,&#39;Value&gt;
  member Add: key: &#39;Key * value: &#39;Value -&gt; Map&lt;&#39;Key,&#39;Value&gt;
  ...<br /><br />--------------------<br />new: elements: (&#39;Key * &#39;Value) seq -&gt; Map&lt;&#39;Key,&#39;Value&gt;</div>
<div class="fsdocs-tip" id="fs62">FF3Obs.Rf: float</div>
<div class="fsdocs-tip" id="fs63">val standardInvestmentsExcess: StockData list</div>
<div class="fsdocs-tip" id="fs64">val maxff3Date: DateTime</div>
<div class="fsdocs-tip" id="fs65">val max: list: &#39;T list -&gt; &#39;T (requires comparison)</div>
<div class="fsdocs-tip" id="fs66">val x: StockData</div>
<div class="fsdocs-tip" id="fs67">StockData.Date: DateTime</div>
<div class="fsdocs-tip" id="fs68">val tryFind: key: &#39;Key -&gt; table: Map&lt;&#39;Key,&#39;T&gt; -&gt; &#39;T option (requires comparison)</div>
<div class="fsdocs-tip" id="fs69">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs70">val failwith: message: string -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs71">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs72">val rf: float</div>
<div class="fsdocs-tip" id="fs73">StockData.Return: float</div>
<div class="fsdocs-tip" id="fs74">StockData.Symbol: string</div>
<div class="fsdocs-tip" id="fs75">property DateTime.Year: int with get<br /><em>&lt;summary&gt;Gets the year component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The year, between 1 and 9999.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs76">property DateTime.Month: int with get<br /><em>&lt;summary&gt;Gets the month component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The month component, expressed as a value between 1 and 12.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs77">val round: digits: int -&gt; x: float -&gt; float<br /><em>&lt;summary&gt;
 Rounds a double-precision floating-point value to a specified number of fractional digits.  
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs78">val take: count: int -&gt; list: &#39;T list -&gt; &#39;T list</div>
<div class="fsdocs-tip" id="fs79">val returnMap: Map&lt;(string * DateTime),float&gt;<br /><em>&#160;Excess return by symbol</em></div>
<div class="fsdocs-tip" id="fs80">val getCov: xId: string -&gt; yId: string -&gt; float</div>
<div class="fsdocs-tip" id="fs81">val xId: string</div>
<div class="fsdocs-tip" id="fs82">val yId: string</div>
<div class="fsdocs-tip" id="fs83">val xs: StockData list</div>
<div class="fsdocs-tip" id="fs84">val yLookup: string * DateTime</div>
<div class="fsdocs-tip" id="fs85">member Map.ContainsKey: key: &#39;Key -&gt; bool</div>
<div class="fsdocs-tip" id="fs86">val covOfPairs: seq: (&#39;T * &#39;T) seq -&gt; &#39;U (requires member ( * ) and member (+) and member (+) and member Zero and member DivideByInt and member (-) and member ( * ))<br /><em>&lt;summary&gt;
   Computes the sample covariance of two random variables.
   The covariance will be calculated between the paired observations.    
 &lt;/summary&gt;<br />&lt;param name=&quot;seq&quot;&gt;The input sequence.&lt;/param&gt;<br />&lt;remarks&gt;Returns NaN if data is empty or if any entry is NaN.&lt;/remarks&gt;<br />&lt;returns&gt;sample covariance estimator (Bessel&#39;s correction by N-1)&lt;/returns&gt;<br />&lt;example&gt;&lt;code&gt; 
 // Consider a sequence of paired x and y values:
 // [(x1, y1); (x2, y2); (x3, y3); (x4, y4); ... ]
 let xy = [(5., 2.); (12., 8.); (18., 18.); (-23., -20.); (45., 28.)]
 
 // To get the sample covariance between x and y:
 xy |&amp;gt; Seq.covOfPairs // evaluates to 434.90
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs87">val covariances: Tensor</div>
<div class="fsdocs-tip" id="fs88">val rowTick: string</div>
<div class="fsdocs-tip" id="fs89">val colTick: string</div>
<div class="fsdocs-tip" id="fs90">type dsharp =
  static member abs: input: Tensor -&gt; Tensor
  static member acos: input: Tensor -&gt; Tensor
  static member add: a: Tensor * b: Tensor -&gt; Tensor
  static member arange: endVal: float * ?startVal: float * ?step: float * ?device: Device * ?dtype: Dtype * ?backend: Backend -&gt; Tensor + 1 overload
  static member arangeLike: input: Tensor * endVal: float * ?startVal: float * ?step: float * ?device: Device * ?dtype: Dtype * ?backend: Backend -&gt; Tensor + 1 overload
  static member argmax: input: Tensor -&gt; int array + 1 overload
  static member argmin: input: Tensor -&gt; int array + 1 overload
  static member asin: input: Tensor -&gt; Tensor
  static member atan: input: Tensor -&gt; Tensor
  static member backends: unit -&gt; Backend list
  ...<br /><em>&lt;summary&gt;
 Tensor operations
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs91">static member dsharp.tensor: value: obj * ?device: Device * ?dtype: Dtype * ?backend: Backend -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs92">val meansByTick: Map&lt;string,float&gt;</div>
<div class="fsdocs-tip" id="fs93">val sym: string</div>
<div class="fsdocs-tip" id="fs94">val symAvg: float</div>
<div class="fsdocs-tip" id="fs95">val averageBy: projection: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U (requires member (+) and member DivideByInt and member Zero)</div>
<div class="fsdocs-tip" id="fs96">val means: Tensor</div>
<div class="fsdocs-tip" id="fs97">val ticker: string</div>
<div class="fsdocs-tip" id="fs98">val w&#39;: Tensor</div>
<div class="fsdocs-tip" id="fs99">static member dsharp.solve: a: Tensor * b: Tensor -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs100">val w: Tensor</div>
<div class="fsdocs-tip" id="fs101">member Tensor.sum: ?dtype: Dtype -&gt; Tensor<br />member Tensor.sum: dim: int * ?keepDim: bool * ?dtype: Dtype -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs102">val portVariance: Tensor</div>
<div class="fsdocs-tip" id="fs103">member Tensor.matmul: b: Tensor -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs104">val portStDev: Tensor</div>
<div class="fsdocs-tip" id="fs105">member Tensor.sqrt: unit -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs106">val portMean: Tensor</div>
<div class="fsdocs-tip" id="fs107">static member dsharp.matmul: a: Tensor * b: Tensor -&gt; Tensor</div>
<div class="fsdocs-tip" id="fs108">val sqrt: value: &#39;T -&gt; &#39;U (requires member Sqrt)</div>
<div class="fsdocs-tip" id="fs109">val weights: Map&lt;string,float&gt;</div>
<div class="fsdocs-tip" id="fs110">Multiple items<br />module Seq

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to compute common statistical measure
&lt;/summary&gt;</em><br /><br />--------------------<br />module Seq

from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Seq =
  new: unit -&gt; Seq
  static member geomspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float seq
  static member linspace: start: float * stop: float * num: int * ?IncludeEndpoint: bool -&gt; float seq<br /><br />--------------------<br />new: unit -&gt; Seq</div>
<div class="fsdocs-tip" id="fs111">val zip: source1: &#39;T1 seq -&gt; source2: &#39;T2 seq -&gt; (&#39;T1 * &#39;T2) seq</div>
<div class="fsdocs-tip" id="fs112">member Tensor.toArray1D: unit -&gt; &#39;T array</div>
<div class="fsdocs-tip" id="fs113">val ofSeq: elements: (&#39;Key * &#39;T) seq -&gt; Map&lt;&#39;Key,&#39;T&gt; (requires comparison)</div>
<div class="fsdocs-tip" id="fs114">val stockDataByDate: (DateTime * StockData list) list</div>
<div class="fsdocs-tip" id="fs115">val dt: DateTime</div>
<div class="fsdocs-tip" id="fs116">val firstMonth: DateTime</div>
<div class="fsdocs-tip" id="fs117">val firstMonthDta: StockData list</div>
<div class="fsdocs-tip" id="fs118">property List.Length: int with get</div>
<div class="fsdocs-tip" id="fs119">val lastMonth: StockData list</div>
<div class="fsdocs-tip" id="fs120">val last: list: &#39;T list -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs121">val snd: tuple: (&#39;T1 * &#39;T2) -&gt; &#39;T2</div>
<div class="fsdocs-tip" id="fs122">val allAssetsStart: DateTime</div>
<div class="fsdocs-tip" id="fs123">val find: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs124">val month: DateTime</div>
<div class="fsdocs-tip" id="fs125">val stocks: StockData list</div>
<div class="fsdocs-tip" id="fs126">val fst: tuple: (&#39;T1 * &#39;T2) -&gt; &#39;T1</div>
<div class="fsdocs-tip" id="fs127">val allAssetsEnd: DateTime</div>
<div class="fsdocs-tip" id="fs128">val findBack: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs129">val stockDataByDateComplete: (DateTime * StockData list) list</div>
<div class="fsdocs-tip" id="fs130">val date: DateTime</div>
<div class="fsdocs-tip" id="fs131">val checkOfCompleteData: StockData list list</div>
<div class="fsdocs-tip" id="fs132">val x: StockData list</div>
<div class="fsdocs-tip" id="fs133">val isEmpty: list: &#39;T list -&gt; bool</div>
<div class="fsdocs-tip" id="fs134">val testMonth: StockData list</div>
<div class="fsdocs-tip" id="fs135">val testBnd: StockData</div>
<div class="fsdocs-tip" id="fs136">val testVti: StockData</div>
<div class="fsdocs-tip" id="fs137">val testVBR: StockData</div>
<div class="fsdocs-tip" id="fs138">active recognizer KeyValue: Collections.Generic.KeyValuePair&lt;&#39;Key,&#39;Value&gt; -&gt; &#39;Key * &#39;Value</div>
<div class="fsdocs-tip" id="fs139">val weight: float</div>
<div class="fsdocs-tip" id="fs140">val symbolData: StockData</div>
<div class="fsdocs-tip" id="fs141">val sum: list: &#39;T list -&gt; &#39;T (requires member (+) and member Zero)</div>
<div class="fsdocs-tip" id="fs142">val portfolioMonthReturn: weights: Map&lt;string,float&gt; -&gt; monthData: StockData list -&gt; float</div>
<div class="fsdocs-tip" id="fs143">val monthData: StockData list</div>
<div class="fsdocs-tip" id="fs144">val toList: table: Map&lt;&#39;Key,&#39;T&gt; -&gt; (&#39;Key * &#39;T) list (requires comparison)</div>
<div class="fsdocs-tip" id="fs145">val tryFind: predicate: (&#39;T -&gt; bool) -&gt; list: &#39;T list -&gt; &#39;T option</div>
<div class="fsdocs-tip" id="fs146">val data: StockData</div>
<div class="fsdocs-tip" id="fs147">val weights6040: Map&lt;string,float&gt;</div>
<div class="fsdocs-tip" id="fs148">val portMve: StockData list</div>
<div class="fsdocs-tip" id="fs149">val data: StockData list</div>
<div class="fsdocs-tip" id="fs150">val port6040: StockData list</div>
<div class="fsdocs-tip" id="fs151">val cumulateReturns: xs: StockData list -&gt; StockData list</div>
<div class="fsdocs-tip" id="fs152">val mutable cr: float</div>
<div class="fsdocs-tip" id="fs153">val portMveCumulative: StockData list</div>
<div class="fsdocs-tip" id="fs154">val port6040Cumulative: StockData list</div>
<div class="fsdocs-tip" id="fs155">val chartMVE: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs156">type Chart =
  static member AnnotatedHeatmap: zData: #(&#39;a1 seq) seq * annotationText: #(string seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?XGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?YGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a5 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a5 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ZSmooth: SmoothAlg * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?ReverseYAxis: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a5 :&gt; IConvertible) + 1 overload
  static member Area: x: #IConvertible seq * y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: MarkerSymbol * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: MarkerSymbol seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: GroupNorm * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 1 overload
  static member Bar: values: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Keys: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: PatternShape * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: PatternShape seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: Pattern * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  static member BoxPlot: [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?WhiskerWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?BoxPoints: BoxPoints * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?BoxMean: BoxMean * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Jitter: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?PointPos: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutlineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutlineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Outline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?AlignmentGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OffsetGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Notched: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?NotchWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?QuartileMethod: QuartileMethod * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 2 overloads
  static member Bubble: x: #IConvertible seq * y: #IConvertible seq * sizes: int seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: MarkerSymbol * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: MarkerSymbol seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: GroupNorm * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible) + 1 overload
  static member Candlestick: ``open`` : #IConvertible seq * high: #IConvertible seq * low: #IConvertible seq * close: #IConvertible seq * x: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a5 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a5 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?IncreasingColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Increasing: FinanceMarker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?DecreasingColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Decreasing: FinanceMarker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?WhiskerWidth: float * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a5 :&gt; IConvertible) + 1 overload
  static member Column: values: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Keys: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPatternShape: PatternShape * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerPatternShape: PatternShape seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerPattern: Pattern * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Base: #IConvertible * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiWidth: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  static member Contour: zData: #(&#39;a1 seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineDash: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLineSmoothing: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLine: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursColoring: ContourColoring * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursOperation: ConstraintOperation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContoursType: ContourType * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowContourLabels: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ContourLabelFont: Font * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Contours: Contours * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?NContours: int * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a4 :&gt; IConvertible)
  static member Funnel: x: #IConvertible seq * y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Width: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Offset: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: TextPosition * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: TextPosition seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: Orientation * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?AlignmentGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OffsetGroup: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: Marker * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?TextInfo: TextInfo * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLineColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLineStyle: DrawingStyle * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorFillColor: Color * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ConnectorLine: Line * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Connector: FunnelConnector * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?InsideTextFont: Font * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?OutsideTextFont: Font * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a2 :&gt; IConvertible)
  static member Heatmap: zData: #(&#39;a1 seq) seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?X: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?XGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Y: #IConvertible seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?YGap: int * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a4 * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a4 seq * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorBar: ColorBar * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ColorScale: Colorscale * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ReverseScale: bool * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?ZSmooth: SmoothAlg * [&lt;Optional; DefaultParameterValue ((null :&gt; obj))&gt;] ?Transpose: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Optional; DefaultParameterValue ((false :&gt; obj))&gt;] ?ReverseYAxis: bool * [&lt;Optional; DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart (requires &#39;a1 :&gt; IConvertible and &#39;a4 :&gt; IConvertible) + 1 overload
  ...</div>
<div class="fsdocs-tip" id="fs157">static member Chart.Line: xy: (#IConvertible * #IConvertible) seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;c * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;c seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: StyleParam.MarkerSymbol * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: StyleParam.MarkerSymbol seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: StyleParam.DrawingStyle * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: StyleParam.Orientation * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: StyleParam.GroupNorm * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Fill: StyleParam.Fill * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;c :&gt; IConvertible)<br />static member Chart.Line: x: #IConvertible seq * y: #IConvertible seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowMarkers: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Opacity: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiOpacity: float seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Text: &#39;a2 * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiText: &#39;a2 seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?TextPosition: StyleParam.TextPosition * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiTextPosition: StyleParam.TextPosition seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerOutline: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MarkerSymbol: StyleParam.MarkerSymbol * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?MultiMarkerSymbol: StyleParam.MarkerSymbol seq * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Marker: TraceObjects.Marker * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineColorScale: StyleParam.Colorscale * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineWidth: float * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LineDash: StyleParam.DrawingStyle * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Line: Line * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?StackGroup: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Orientation: StyleParam.Orientation * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?GroupNorm: StyleParam.GroupNorm * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Fill: StyleParam.Fill * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?FillColor: Color * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((false :&gt; obj))&gt;] ?UseWebGL: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((true :&gt; obj))&gt;] ?UseDefaults: bool -&gt; GenericChart.GenericChart (requires &#39;a2 :&gt; IConvertible)</div>
<div class="fsdocs-tip" id="fs158">static member Chart.withTraceInfo: [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Name: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?Visible: StyleParam.Visible * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?ShowLegend: bool * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LegendRank: int * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LegendGroup: string * [&lt;Runtime.InteropServices.Optional; Runtime.InteropServices.DefaultParameterValue ((null :&gt; obj))&gt;] ?LegendGroupTitle: Title -&gt; (GenericChart.GenericChart -&gt; GenericChart.GenericChart)</div>
<div class="fsdocs-tip" id="fs159">val chart6040: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs160">val chartCombined: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs161">static member Chart.combine: gCharts: GenericChart.GenericChart seq -&gt; GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs162">module GenericChart

from Plotly.NET<br /><em>&lt;summary&gt;
 Module to represent a GenericChart
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs163">val toChartHTML: gChart: GenericChart.GenericChart -&gt; string<br /><em>&lt;summary&gt;
 Converts a GenericChart to it HTML representation. The div layer has a default size of 600 if not specified otherwise.
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs164">val stDev: items: &#39;T seq -&gt; &#39;U (requires member (-) and member Zero and member DivideByInt and member (+) and member ( * ) and member (+) and member (/) and member Sqrt)<br /><em>&lt;summary&gt;
   Computes the sample standard deviation
 &lt;/summary&gt;<br />&lt;param name=&quot;items&quot;&gt;The input sequence.&lt;/param&gt;<br />&lt;remarks&gt;Returns NaN if data is empty or if any entry is NaN.&lt;/remarks&gt;<br />&lt;returns&gt;standard deviation of a sample (Bessel&#39;s correction by N-1)&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs165">val vol: float</div>
<div class="fsdocs-tip" id="fs166">val normalize10pctVol: xs: StockData list -&gt; StockData list</div>
<div class="fsdocs-tip" id="fs167">val annualizedVol: float</div>
<div class="fsdocs-tip" id="fs168">val portMveCumulativeNormlizedVol: StockData list</div>
<div class="fsdocs-tip" id="fs169">val port6040CumulativeNormlizedVol: StockData list</div>
<div class="fsdocs-tip" id="fs170">val chartMVENormlizedVol: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs171">val chart6040NormlizedVol: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs172">val chartCombinedNormlizedVol: GenericChart.GenericChart</div>
<div class="fsdocs-tip" id="fs173">val filter: predicate: (&#39;T -&gt; bool) -&gt; source: &#39;T seq -&gt; &#39;T seq</div>
<div class="fsdocs-tip" id="fs174">val averageBy: projection: (&#39;T -&gt; &#39;U) -&gt; source: &#39;T seq -&gt; &#39;U (requires member (+) and member DivideByInt and member Zero)</div>
<div class="fsdocs-tip" id="fs175">val symStockBond: string list</div>
<div class="fsdocs-tip" id="fs176">val covStockBond: Tensor</div>
<div class="fsdocs-tip" id="fs177">val x: string</div>
<div class="fsdocs-tip" id="fs178">val y: string</div>
<div class="fsdocs-tip" id="fs179">val meansStockBond: Tensor</div>
<div class="fsdocs-tip" id="fs180">val wStockBond: Tensor</div>
<div class="fsdocs-tip" id="fs181">val stockBondSharpeAndSD: weights: Tensor -&gt; Tensor * Tensor</div>
<div class="fsdocs-tip" id="fs182">val weights: Tensor</div>
<div class="fsdocs-tip" id="fs183">type Tensor =
  private | TensorC of primalRaw: RawTensor
          | TensorF of primal: Tensor * derivative: Tensor * nestingTag: uint32
          | TensorR of primal: Tensor * derivative: Tensor ref * parentOp: TensorOp * fanout: uint32 ref * nestingTag: uint32
  interface IConvertible
  interface IComparable
  override Equals: other: obj -&gt; bool
  override GetHashCode: unit -&gt; int
  member GetSlice: bounds: int array2d -&gt; Tensor
  override ToString: unit -&gt; string
  member abs: unit -&gt; Tensor
  member acos: unit -&gt; Tensor
  member add: b: Tensor -&gt; Tensor + 1 overload
  member addSlice: location: int seq * b: Tensor -&gt; Tensor
  ...<br /><em>&lt;summary&gt;
   Represents a multi-dimensional data type containing elements of a single data type.
 &lt;/summary&gt;<br />&lt;example&gt;
   A tensor can be constructed from a list or sequence using &lt;see cref=&quot;M:DiffSharp.dsharp.tensor(System.Object)&quot; /&gt;&lt;code&gt;
    let t = dsharp.tensor([[1.; -1.]; [1.; -1.]])
  &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs184">val sbVar: Tensor</div>
<div class="fsdocs-tip" id="fs185">val sbStDev: Tensor</div>
<div class="fsdocs-tip" id="fs186">val sbMean: Tensor</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Portfolio-Optimization">
      Portfolio Optimization
    </a>
  </li>
  <li class="level-2">
    <a href="#Comparing-mean-variance-efficient-to-60-40">
      Comparing mean-variance efficient to 60/40.
    </a>
  </li>
  <li class="level-2">
    <a href="#Key-points-to-keep-in-mind">
      Key points to keep in mind.
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="/Teaching/content/fsdocs-tips.js"></script>
<script type="module" src="/Teaching/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="/Teaching/content/fsdocs-theme.js"></script>
<script type="module" src="/Teaching/content/fsdocs-search.js"></script>

</body>
</html>